import{k as s,bd as ve,$ as B,Z as G,A as Ve,o as c,c as w,p as l,w as o,q as n,m as i,b as y,y as L,D as m,E as C,F as Q,a as R,C as _e,x as U,bf as H}from"./main.8e3d834c.js";import{_ as ge}from"./AppDateTimePicker.96354d05.js";import{_ as De,a as he}from"./EditEmployeeDrawer.38110e9b.js";import{_ as be}from"./ConfirmationDialog.5022fad8.js";import{s as z}from"./successMiddleware.60712f12.js";import{e as J}from"./errorsMiddleware.e88e793d.js";import{u as we}from"./useAttendanceStore.c9fc99d0.js";import{a as ye}from"./VOverlay.e098729e.js";import{a as K,V as j}from"./VBtn.d45a6048.js";import{a as _,V as q}from"./VRow.45fdd78b.js";import{V as F,c as S}from"./VCard.23579ef6.js";import{V as X}from"./VDivider.6d6bcb40.js";import{V as xe}from"./VAutocomplete.bf2fd8ca.js";import{V as ke,a as Ae}from"./VTabs.521b0d68.js";import{V as Ee,a as Ce}from"./VWindowItem.011c0acb.js";import{V as Ue}from"./VTable.aae49bb7.js";import{V as qe}from"./VSwitch.1d7d7135.js";import{V as M}from"./VCheckbox.fd84d358.js";import{V as Se}from"./VPagination.25f4202e.js";import"./VField.b13be34f.js";import"./index.a0fbf071.js";import"./VInput.221caba9.js";import"./router.96bf7663.js";import"./VImg.5f2c6d35.js";import"./position.c80f08b0.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VSpacer.8cabb308.js";import"./VAvatar.a16965d6.js";import"./VForm.b347f109.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.810b1049.js";/* empty css                   */import"./VCounter.1ff827ea.js";import"./VNavigationDrawer.d95beabf.js";import"./ssrBoot.455730b9.js";import"./DialogCloseBtn.6e92c959.js";import"./VDialog.60004fa2.js";import"./scopeId.5ac90517.js";import"./dialog-transition.721de8d1.js";import"./lazy.a8f563f0.js";import"./VSelect.97f52872.js";import"./VList.5eb680d2.js";import"./VMenu.07de16f8.js";import"./VCheckboxBtn.515d277c.js";import"./VSelectionControl.a2ce79b7.js";import"./VChip.d81a1f97.js";import"./filter.524761c6.js";import"./VSlideGroup.09119cf8.js";const $e={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ne={class:"pa-6"},Pe={class:"ma-7"},Te={class:"pt-5"},Oe=i("th",{class:"text-left"}," Quit Employee ",-1),Ie={class:"text-left"},Be=i("th",{class:"text-left"}," Remove Employee ",-1),Le={class:"text-left"},Qe=i("tr",null,[i("th",{class:"text-left"}," date "),i("th",{class:"text-left"}," Presence ")],-1),Re=i("th",{class:"text-left"}," ALL DAYS ",-1),ze={class:"text-left"},je={class:"text-left"},Fe={class:"text-left"},Me={class:"text-sm text-disabled"},We={__name:"[id]_temp",setup(Ye){const x=we(),ee=s(""),$=ve(),te=s(!1),u=s({isActive:!0}),g=s(0);s([]),s(!1),s(),s();const N=s(""),h=s("");s();const W=s(10),p=s(1),b=s(1),le=s(0);let f=s({employees:[],dates:[]});s({});let Y=s({}),v=s({list:[]}),D=s({}),k=s({});const A=()=>{u.value.isActive=!0,x.fetchAttendanceData(Number($.params.id)).then(e=>{f.value.employees=e.data.employees,v.value.list=e.data.restEmployees,f.value.dates=e.data.dates,N.value=e.data.minDate,h.value=e.data.maxDate,console.log(N),u.value.isActive=!1}).catch(e=>{console.error(e),u.value.isActive=!1})};B(A),B(()=>{p.value>b.value&&(p.value=b.value)}),G(ee,()=>{A()});const P=s(!1),T=s(!1),E=s(!1);let V=s();B(()=>{p.value>b.value&&(p.value=b.value)});const ae=Ve(()=>{const e=Y.value.length?(p.value-1)*W.value+1:0,t=Y.value.length+(p.value-1)*W.value;return`Showing ${e} to ${t} of ${le.value} entries`}),oe=()=>{u.value.isActive=!0,x.submitAttendance(f,$.params.id).then(e=>{z(e.data.message),u.value.isActive=!1,router.push("/apps/attendance/preview/"+$.params.id)}).catch(e=>{u.value.isActive=!1})},se=e=>{u.value.isActive=!0,x.updateAttendance(e).then(t=>{z(t.data.message),u.value.isActive=!1,A()}).catch(t=>{J(t.data.message),u.value.isActive=!1})},ne=e=>{u.value.isActive=!0,x.deleteAttendance(e).then(t=>{u.value.isActive=!1,z(t.data.message)}).catch(t=>{J(t.data.message),u.value.isActive=!1}),A()},O=s(!0),I=e=>(e.toString(),""),ie=e=>{console.log(e.allDays);for(let t=0;t<e.workingDays.length;t++)e.workingDays[t].present=!e.allDays;console.log(e)},re=e=>e.name===void 0?"Select An Employee":e.name+" "+e.surname,ue=()=>{var e=de(v.value.list,D.value);f.value.employees.push({...e}),v.value.list.splice(Z(v.value.list,D),1)},de=(e,t)=>{for(let d=0;d<e.length;d++)if(e[d].id===t)return e[d]},ce=e=>{v.value.list.push({...e}),f.value.employees.splice(Z(f.value.employees,e.id),1)};G(v.value,()=>{console.log(v)});const Z=(e,t)=>{for(let d=0;d<e.length;d++)if(e[d].id===t)return d},me=e=>{console.log(h._value);for(let t=0;t<e.workingDays.length;t++)e.workingDays[t].date>=e.quitDate?e.workingDays[t].present=!1:e.workingDays[t].present=!0},pe=e=>{if(console.log(e.quitEmployee),e.quitEmployee)e.quitDate=h._value,console.log(e.quitDate),console.log(h._value);else for(let t=0;t<e.workingDays.length;t++)e.workingDays[t].present=!0};return(e,t)=>{const d=ge;return c(),w("section",null,[l(q,null,{default:o(()=>[l(ye,{"model-value":n(u).isActive,class:"align-center justify-center"},{default:o(()=>[l(K,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l(_,{cols:"9"},{default:o(()=>[l(F,{title:"New Attendance"},{default:o(()=>[l(X),l(S,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[i("div",$e,[i("div",null,[n(te)?(c(),y(K,{key:0,indeterminate:"",color:"primary"})):L("",!0)])])]),_:1}),i("div",Ne,[l(q,null,{default:o(()=>[l(_,{cols:"8"},{default:o(()=>[l(xe,{modelValue:n(D),"onUpdate:modelValue":t[0]||(t[0]=a=>m(D)?D.value=a:D=a),items:n(v).list,label:"Employee","item-value":"id","item-title":re},null,8,["modelValue","items"])]),_:1}),l(_,{cols:"3"},{default:o(()=>[l(j,{block:"",color:"default",variant:"tonal",onClick:ue},{default:o(()=>[C(" Add ")]),_:1})]),_:1})]),_:1})]),i("div",Pe,[l(q,null,{default:o(()=>[l(_,{cols:"5",sm:"4"},{default:o(()=>[l(ke,{modelValue:n(g),"onUpdate:modelValue":t[1]||(t[1]=a=>m(g)?g.value=a:null),direction:"vertical",class:"v-tabs-pill"},{default:o(()=>[(c(!0),w(Q,null,R(n(f).employees,a=>(c(),y(Ae,null,{default:o(()=>[l(_e,{start:"",icon:"tabler-user"}),C(" "+U(a.name)+" "+U(a.surname),1)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1}),l(_,{cols:"7",sm:"8"},{default:o(()=>[l(F,null,{default:o(()=>[l(S,null,{default:o(()=>[l(Ee,{modelValue:n(g),"onUpdate:modelValue":t[3]||(t[3]=a=>m(g)?g.value=a:null)},{default:o(()=>[(c(!0),w(Q,null,R(n(f).employees,a=>(c(),y(Ce,null,{default:o(()=>[l(Ue,null,{default:o(()=>[i("thead",null,[i("tr",Te,[Oe,i("th",Ie,[l(q,null,{default:o(()=>[l(_,{cols:"4"},{default:o(()=>[l(qe,{modelValue:a.quitEmployee,"onUpdate:modelValue":r=>a.quitEmployee=r,inset:"",onChange:r=>pe(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),a.quitEmployee?(c(),y(_,{key:0,cols:"8"},{default:o(()=>[l(d,{modelValue:a.quitDate,"onUpdate:modelValue":r=>a.quitDate=r,label:"End Date",onChange:r=>me(a),config:{minDate:`${n(N)}`,maxDate:`${n(h)}`}},null,8,["modelValue","onUpdate:modelValue","onChange","config"])]),_:2},1024)):L("",!0)]),_:2},1024)])]),i("tr",null,[Be,i("th",Le,[l(M,{modelValue:n(k),"onUpdate:modelValue":t[2]||(t[2]=r=>m(k)?k.value=r:k=r),label:I(n(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error",onClick:r=>ce(a)},null,8,["modelValue","label","onClick"])])]),Qe]),i("tbody",null,[i("tr",null,[Re,i("th",ze,[l(M,{modelValue:a.allDays,"onUpdate:modelValue":r=>a.allDays=r,label:I(n(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error",onClick:r=>ie(a)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])])]),(c(!0),w(Q,null,R(a.workingDays,r=>(c(),w("tr",null,[i("th",je,U(r.date),1),i("th",Fe,[l(M,{modelValue:r.present,"onUpdate:modelValue":fe=>r.present=fe,label:I(n(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error"},null,8,["modelValue","onUpdate:modelValue","label"])])]))),256))])]),_:2},1024)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(X),l(S,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[i("span",Me,U(n(ae)),1),l(Se,{modelValue:n(p),"onUpdate:modelValue":t[4]||(t[4]=a=>m(p)?p.value=a:null),size:"small","total-visible":5,length:n(b)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:o(()=>[l(F,{class:"mb-8"},{default:o(()=>[l(S,null,{default:o(()=>[l(j,{block:"","prepend-icon":"tabler-send",class:"mb-2"},{default:o(()=>[C(" Send Invoice ")]),_:1}),l(j,{block:"",color:"default",variant:"tonal",onClick:oe},{default:o(()=>[C(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(De,{isDrawerOpen:n(P),"onUpdate:isDrawerOpen":t[5]||(t[5]=a=>m(P)?P.value=a:null),onEmployeeData:e.addNewEmployee},null,8,["isDrawerOpen","onEmployeeData"]),l(he,{isDrawerOpen:n(T),"onUpdate:isDrawerOpen":t[6]||(t[6]=a=>m(T)?T.value=a:null),employee:n(V),"onUpdate:employee":t[7]||(t[7]=a=>m(V)?V.value=a:V=a),onEmployeeData:se},null,8,["isDrawerOpen","employee"]),n(E)?(c(),y(be,{key:0,isDialogVisible:n(E),"onUpdate:isDialogVisible":t[8]||(t[8]=a=>m(E)?E.value=a:null),employee:n(V),"onUpdate:employee":t[9]||(t[9]=a=>m(V)?V.value=a:V=a),onEmployeeData:ne},null,8,["isDialogVisible","employee"])):L("",!0)])}}};typeof H=="function"&&H(We);export{We as default};
