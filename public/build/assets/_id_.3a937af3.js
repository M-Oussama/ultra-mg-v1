import{bd as G,k as _,Z as E,q as e,o as n,c as m,p as s,w as i,m as t,x as o,b as w,y as c,F as M,a as Q,E as h,D as V,bf as Z}from"./main.80073fb3.js";import{_ as Y}from"./InvoiceAddPaymentDrawer.2a6b447e.js";import{_ as H}from"./InvoiceSendInvoiceDrawer.8eb648d3.js";import{u as J}from"./usereturnStore.ed87dba5.js";import{a as W,V as I}from"./VBtn.bc513066.js";import{a as X}from"./VOverlay.ba4319b9.js";import{a as f,V as R}from"./VRow.e327326a.js";import{V as A,c as g}from"./VCard.bed48467.js";import{V as T}from"./VDivider.c8bf408f.js";import{V as tt}from"./VTable.6035f281.js";import{V as b}from"./VInput.b30e6f3e.js";import{V as C}from"./VSwitch.ead5d0f8.js";import{V as L}from"./VAutocomplete.a415af86.js";import{V as K}from"./VTextField.f7f47561.js";import"./AppDateTimePicker.291f7947.js";import"./VField.95c31d27.js";import"./index.4672e601.js";import"./position.a8816655.js";import"./router.9f57d7dd.js";import"./easing.36b781ab.js";import"./useSaleStore.556239d8.js";import"./errorsMiddleware.7ae287f7.js";import"./successMiddleware.e1481932.js";import"./VSpacer.f6e4a849.js";import"./VAvatar.755a82ce.js";import"./VImg.19a712b4.js";import"./VForm.afb9be88.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.93cf1113.js";/* empty css                   */import"./VCounter.770fe3f3.js";import"./VNavigationDrawer.7eedad6d.js";import"./ssrBoot.2abef11c.js";import"./VChip.1cdee411.js";import"./lazy.172a4f89.js";import"./VSelectionControl.816c4425.js";import"./VSelect.eb06e1d1.js";import"./VList.dace6270.js";import"./dialog-transition.4fc1b9b4.js";import"./VMenu.5e377b50.js";import"./scopeId.7979a6ee.js";import"./VCheckboxBtn.9ec2021d.js";import"./filter.7efe6ffd.js";const et={key:0},st={class:"ma-sm-3"},ot={class:"d-flex align-center mb-6"},lt={class:"font-weight-bold text-xl"},it={class:"mb-0"},dt=t("h4",{class:"mb-0"}," KASR EL ABTALE, 19000, SETIF ",-1),at={class:"mb-0"},nt={class:"mb-0"},rt={class:"mt-4 ma-sm-4"},ct={class:"font-weight-medium text-xl mb-2"},mt={class:"mb-2"},ut=t("span",null,"Date : ",-1),_t={class:"font-weight-semibold"},xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},ht=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),pt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ft={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},bt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),vt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},wt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},gt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),yt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},Vt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},kt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),Nt={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},Ft={class:"font-weight-medium text-sm mb-2"},jt={key:0,class:"mb-2 text-sm"},Dt=t("span",null,"Payment: ",-1),Tt={class:"font-weight-semibold"},Ct={class:"mb-2 text-sm"},St=t("span",null,"Date : ",-1),It={class:"font-weight-semibold"},Rt={class:"v-col-md-6"},At=t("h4",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center"},null,-1),Ut={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Pt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-weight-bold"}," Client ",-1),Ot={class:"v-col-md-10 border-left padding-8 data-font text-weight-bold"},Bt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Et=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-weight-bold"}," Address ",-1),Zt={class:"v-col-md-10 border-left padding-8 data-font text-weight-bold"},Lt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Kt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-weight-bold"}," Phone ",-1),$t={class:"v-col-md-10 border-left padding-8 data-font text-weight-bold"},qt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},zt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-weight-bold"}," Email ",-1),Gt={class:"v-col-md-10 border-left padding-8 data-font text-weight-bold"},Mt=t("div",{class:"v-col-md-2"},null,-1),Qt={key:0,class:"v-col-md-4"},Yt=t("h4",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center text-h4 align-center"},null,-1),Ht={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},Jt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," N\xB0RC ",-1),Wt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},te=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," N\xB0IF ",-1),ee={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},se={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},oe=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," N\xB0IS ",-1),le={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},ie={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},de=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0 text-h4 text-weight-bold"},[t("span",null," N\xB0ART ")],-1),ae={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font text-h4 text-weight-bold"},ne={key:1,class:"v-col-md-4"},re=t("h4",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),ce={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},me=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Bon Retour ",-1),ue={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},_e={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},xe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Date ",-1),he={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},pe=t("th",{class:"text-sm-caption text-h4 text-weight-bold",scope:"col"}," ID ",-1),fe={key:0,class:"text-sm-caption text-h4 text-weight-bold",scope:"col"},be=t("th",{class:"text-sm-caption text-h4 text-weight-bold",scope:"col"}," name ",-1),ve={key:1,scope:"col",class:"text-center text-sm-caption text-h4 text-weight-bold"},we=t("th",{scope:"col",class:"text-center text-sm-caption text-h4 text-weight-bold"}," QTY ",-1),ge={key:2,scope:"col",class:"text-center text-sm-caption text-h4 text-weight-bold"},ye={class:"text-no-wrap text-sm-caption text-h4 text-weight-bold"},Ve={key:0,class:"text-no-wrap text-sm-caption text-h4 text-weight-bold"},ke={class:"text-no-wrap"},Ne={class:"text-sm-caption mb-0 text-h4 text-weight-bold"},Fe={key:1,class:"text-center text-sm-caption text-h4 text-weight-bold"},je={class:"text-center text-sm-caption text-h4 text-weight-bold"},De={key:2,class:"text-center text-sm-caption text-h4 text-weight-bold"},Te={class:"my-2 mx-sm-5 v-col-md-6"},Ce={key:0,class:"mt-10 d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Se=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Ancien solde ",-1),Ie={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Re={key:1,class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ae={key:0,class:"v-col-md-5 text-sm-subtitle-2 border-right text-success text-h4 text-weight-bold"},Ue={key:1,class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"},Pe={key:2,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-success text-h4 text-weight-bold"},Oe={key:3,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Be={class:"my-2 mx-sm-4 v-col-md-4"},Ee={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ze=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Total ",-1),Le={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Ke=t("div",{class:"d-flex mx-sm-4"},[t("h6",{class:"text-sm font-weight-semibold me-1"}," Note: "),t("span",null,"Merci pour votre r\xE8glement rapide. Nous appr\xE9cions votre collaboration ")],-1),$e={class:"d-flex align-center justify-space-between mt-5"},qe={class:"d-flex align-center justify-space-between"},ze={class:"d-flex align-center justify-space-between"},Ge={class:"d-flex align-center justify-space-between"},Me={key:0},Qe={__name:"[id]",setup(Ye){const $=J(),U=G(),a=_({id:1,balance:0,total_amount:0,sale_date:null,client_id:1,sale_status:{id:-1,name:""},amount_letter:"",notes:"",client:{id:-1,name:"",surname:"",address:"",email:"",phone:"",NRC:"",NIF:"",NART:"",NIS:""},sale_items:[]}),l=_({sku:!1,invoice:!1,price:!0,paymentType:"Espece",sold:!1}),p=_(0),P=_();let y=_([]);const k=_(1),x=_({name:"",address:"",phone:"",email:"",NRC:"",NIF:"",NART:"",NIS:"",capitale:""});let N=_([]);const O=_(!1);_();const S=_(!1),F=_(!1),B=_({isActive:!1});$.fetchReturn(Number(U.params.id)).then(u=>{a.value=u.data.product_return,p.value=u.data.sold,P.value={...a.value.client},N=u.data.companies,y=u.data.clients,x.value=N[0],O.value=!0}).catch(u=>{console.log(u)});const q=()=>{window.print()};E(k,(u,r,d)=>{x.value=N[u-1],console.log(x)});const z=u=>u.name+" "+u.surname,j=_("Facture Proforma"),D=_();return E(D,(u,r,d)=>{u||(a.value.client=P);for(let v=0;v<y.length;v++)y[v].id===u&&(a.value.client={...y[v]})}),(u,r)=>e(O)?(n(),m("section",et,[s(X,{"model-value":e(B).isActive,class:"align-center justify-center"},{default:i(()=>[s(W,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),s(R,null,{default:i(()=>[s(f,{class:"printed",cols:"12",md:"9"},{default:i(()=>[s(A,null,{default:i(()=>[s(g,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row pb-0"},{default:i(()=>[s(R,null,{default:i(()=>[s(f,{cols:"8"},{default:i(()=>[t("div",st,[t("div",ot,[t("h6",lt,o(e(x).name),1)]),t("h4",it,o(e(x).address),1),dt,t("h4",at,o(e(x).email),1),t("h4",nt,o(e(x).phone),1)])]),_:1}),e(l).invoice?c("",!0):(n(),w(f,{key:0,cols:"4"},{default:i(()=>[t("div",rt,[t("h6",ct," Bon Retour #"+o(e(a).id),1),t("h4",mt,[ut,t("span",_t,o(e(a).date),1)])])]),_:1})),e(l).invoice?(n(),w(f,{key:1,cols:"4",class:"mt-5"},{default:i(()=>[t("div",xt,[ht,t("div",pt,o(e(x).NRC),1)]),t("div",ft,[bt,t("div",vt,o(e(x).NIF),1)]),t("div",wt,[gt,t("div",yt,o(e(x).NIS),1)]),t("div",Vt,[kt,t("div",Nt,o(e(x).NART),1)])]),_:1})):c("",!0)]),_:1})]),_:1}),e(l).invoice?(n(),w(T,{key:0})):c("",!0),e(l).invoice?(n(),w(R,{key:1,class:"ma-3 text-center"},{default:i(()=>[s(f,{cols:"4"},{default:i(()=>[t("h6",Ft,o(e(j))+" #"+o(e(a).id),1)]),_:1}),s(f,{cols:"4"},{default:i(()=>[e(l).price?(n(),m("h4",jt,[Dt,t("span",Tt,o(e(l).paymentType),1)])):c("",!0)]),_:1}),s(f,{cols:"4"},{default:i(()=>[t("h4",Ct,[St,t("span",It,o(e(a).sale_date),1)])]),_:1})]),_:1})):c("",!0),s(g,{class:"invoiceGeneral d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row"},{default:i(()=>[t("div",Rt,[At,t("div",Ut,[Pt,t("div",Ot,o(e(a).client.name)+" "+o(e(a).client.surname),1)]),t("div",Bt,[Et,t("div",Zt,o(e(a).client.address),1)]),t("div",Lt,[Kt,t("div",$t,o(e(a).client.phone),1)]),t("div",qt,[zt,t("div",Gt,o(e(a).client.email),1)])]),Mt,e(l).invoice?(n(),m("div",Qt,[Yt,t("div",Ht,[Jt,t("div",Wt,o(e(a).client.NRC),1)]),t("div",Xt,[te,t("div",ee,o(e(a).client.NIF),1)]),t("div",se,[oe,t("div",le,o(e(a).client.NIS),1)]),t("div",ie,[de,t("div",ae,o(e(a).client.NART),1)])])):c("",!0),e(l).invoice?c("",!0):(n(),m("div",ne,[re,t("div",ce,[me,t("div",ue," #"+o(e(a).id),1)]),t("div",_e,[xe,t("div",he,o(e(a).date),1)])]))]),_:1}),s(T),s(tt,null,{default:i(()=>[t("thead",null,[t("tr",null,[pe,e(l).sku?(n(),m("th",fe," SKU ")):c("",!0),be,e(l).price?(n(),m("th",ve," Price ")):c("",!0),we,e(l).price?(n(),m("th",ge," TOTAL ")):c("",!0)])]),t("tbody",null,[(n(!0),m(M,null,Q(e(a).sale_items,(d,v)=>(n(),m("tr",{key:d.name},[t("td",ye,o(v+1),1),e(l).sku?(n(),m("td",Ve,o(d.product.SKU),1)):c("",!0),t("td",ke,[t("h4",Ne,o(d.product.name),1)]),e(l).price?(n(),m("td",Fe,o(d.price)+" DZD ",1)):c("",!0),t("td",je,o(d.quantity),1),e(l).price?(n(),m("td",De,o(d.total_price)+" DZD ",1)):c("",!0)]))),128))])]),_:1}),e(l).price?(n(),w(T,{key:2,class:"my-2"})):c("",!0),e(l).price?(n(),w(g,{key:3,class:"d-flex justify-space-between flex-column flex-sm-row print-row pt-0"},{default:i(()=>[t("div",Te,[t("h5",null,"La Facture est arret\xE9e \xE0 la somme de : "+o(e(a).amount_letter),1),e(l).sold?(n(),m("div",Ce,[Se,t("div",Ie,o(parseFloat(e(p)).toFixed(2))+" DZD ",1)])):c("",!0),e(l).sold?(n(),m("div",Re,[e(l).price?(n(),m("div",Ae," Nouveau ")):c("",!0),e(l).price?c("",!0):(n(),m("div",Ue," Nouveau ")),e(l).price?(n(),m("div",Pe,o(parseFloat(e(p))>0?(parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2))+" DZD ",1)):c("",!0),e(l).price?c("",!0):(n(),m("div",Oe,o(parseFloat(e(p))>0?(parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2))+" DZD ",1))])):c("",!0)]),t("div",Be,[t("div",Ee,[Ze,t("div",Le,o(e(a).total_amount)+" DZD ",1)])])]),_:1})):c("",!0),s(T),s(g,null,{default:i(()=>[Ke]),_:1})]),_:1})]),_:1}),s(f,{cols:"12",md:"3",class:"d-print-none"},{default:i(()=>[s(A,null,{default:i(()=>[s(g,null,{default:i(()=>[s(I,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:r[0]||(r[0]=d=>F.value=!0)},{default:i(()=>[h(" Send Invoice ")]),_:1}),s(I,{block:"",variant:"tonal",color:"secondary",class:"mb-2",onClick:q},{default:i(()=>[h(" Print ")]),_:1}),s(I,{block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-return-edit-id",params:{id:e(U).params.id}}},{default:i(()=>[h(" Edit Invoice ")]),_:1},8,["to"])]),_:1})]),_:1}),s(A,{class:"mt-7"},{default:i(()=>[s(g,null,{default:i(()=>[t("div",$e,[s(b,{for:"sold"},{default:i(()=>[h(" Sold ")]),_:1}),t("div",null,[s(C,{id:"sku",modelValue:e(l).sold,"onUpdate:modelValue":r[1]||(r[1]=d=>e(l).sold=d)},null,8,["modelValue"])])]),t("div",qe,[s(b,{for:"price"},{default:i(()=>[h(" SKU ")]),_:1}),t("div",null,[s(C,{id:"sku",modelValue:e(l).sku,"onUpdate:modelValue":r[2]||(r[2]=d=>e(l).sku=d)},null,8,["modelValue"])])]),t("div",ze,[s(b,{for:"price"},{default:i(()=>[h(" Facture ")]),_:1}),t("div",null,[s(C,{id:"sku",modelValue:e(l).invoice,"onUpdate:modelValue":r[3]||(r[3]=d=>e(l).invoice=d)},null,8,["modelValue"])])]),t("div",Ge,[s(b,{for:"price"},{default:i(()=>[h(" Price ")]),_:1}),t("div",null,[s(C,{id:"price",modelValue:e(l).price,"onUpdate:modelValue":r[4]||(r[4]=d=>e(l).price=d)},null,8,["modelValue"])])]),t("div",null,[s(b,{class:"mb-4 mt-1"},{default:i(()=>[h(" Company ")]),_:1}),s(L,{modelValue:e(k),"onUpdate:modelValue":r[5]||(r[5]=d=>V(k)?k.value=d:null),items:e(N),"item-value":"id",class:"text-sm-subtitle-2","item-title":"name",label:"Company"},null,8,["modelValue","items"])]),t("div",null,[t("div",null,[s(b,{for:"payment-terms",class:"mb-1 mt-1"},{default:i(()=>[h(" Payment ")]),_:1}),s(K,{modelValue:e(l).paymentType,"onUpdate:modelValue":r[6]||(r[6]=d=>e(l).paymentType=d),placeholder:"Thanks for your business"},null,8,["modelValue"])])]),e(l).invoice?(n(),m("div",Me,[s(b,{for:"payment-terms",class:"mb-1 mt-1"},{default:i(()=>[h(" Invoice Type ")]),_:1}),s(K,{modelValue:e(j),"onUpdate:modelValue":r[7]||(r[7]=d=>V(j)?j.value=d:null),placeholder:"Put the Invoice Type"},null,8,["modelValue"])])):c("",!0),t("div",null,[s(b,{class:"mb-4 mt-1"},{default:i(()=>[h(" Client ")]),_:1}),s(L,{clearable:"",modelValue:e(D),"onUpdate:modelValue":r[8]||(r[8]=d=>V(D)?D.value=d:null),items:e(y),"item-value":"id","item-title":z,label:"Client"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),s(Y,{data:e(a),loading:e(B),isDrawerOpen:e(S),"onUpdate:isDrawerOpen":r[9]||(r[9]=d=>V(S)?S.value=d:null)},null,8,["data","loading","isDrawerOpen"]),s(H,{isDrawerOpen:e(F),"onUpdate:isDrawerOpen":r[10]||(r[10]=d=>V(F)?F.value=d:null)},null,8,["isDrawerOpen"])])):c("",!0)}};typeof Z=="function"&&Z(Qe);export{Qe as default};
