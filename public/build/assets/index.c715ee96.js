import{k as i,o as w,b as P,w as t,m,p as e,C as U,q as r,P as K,D as g,be as W,E as h,ay as I,Z as H,bc as ne,a1 as F,$ as E,A as ue,r as de,c as B,F as ce,a as pe,x as A,H as me,I as fe,y as ve,bf as G}from"./main.c6a9724c.js";import{r as q}from"./validators.330a354f.js";import{V as Q}from"./VSpacer.e083bbdb.js";import{V as D,a as J}from"./VBtn.e7c07512.js";import{V as T,c as j}from"./VCard.f64c0a01.js";import{V as X}from"./VForm.821cf149.js";import{V as Z,a as O}from"./VRow.ecaee667.js";import{V as $}from"./VTextField.0d61a0d0.js";import{V as Y}from"./VNavigationDrawer.ef81bf50.js";import{_ as Ve}from"./DialogCloseBtn.19a72d91.js";import{V as _e}from"./VDialog.6f70ea41.js";import{e as R}from"./errorsMiddleware.a5bff1e6.js";import{s as M}from"./successMiddleware.c29016f5.js";import{a as be}from"./VOverlay.01171e20.js";import{V as L}from"./VDivider.8e59889f.js";import{V as ge}from"./VSelect.f71ec185.js";import{V as De}from"./VTable.ee980c27.js";import{V as we}from"./VAvatar.6f1bab4f.js";import{V as ye}from"./VImg.ed211343.js";import{V as xe}from"./VPagination.b3436b20.js";import"./index.b522f886.js";import"./router.8721ce32.js";import"./position.262cc80a.js";import"./VInput.ab935992.js";import"./index.cb3fbeaa.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.d7dc540f.js";import"./easing.36b781ab.js";import"./VCounter.92e789e6.js";import"./ssrBoot.6ecdcdd2.js";import"./scopeId.b6fae753.js";import"./dialog-transition.29115eac.js";import"./lazy.55ef32ef.js";import"./VList.d03d65eb.js";import"./VMenu.b523d10a.js";import"./VCheckboxBtn.a2176904.js";import"./VSelectionControl.3b08e1e2.js";import"./VChip.7e863aa4.js";const he={class:"d-flex align-center pa-6 pb-1"},ke=m("h6",{class:"text-h6"}," Add Permission ",-1),Ce={__name:"AddNewDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(b,{emit:d}){const V=b,_=i(!1),n=i(),f=i(""),s=i(""),u=()=>{d("update:isDrawerOpen",!1),I(()=>{var c,a;(c=n.value)==null||c.reset(),(a=n.value)==null||a.resetValidation()})},k=()=>{var c;(c=n.value)==null||c.validate().then(({valid:a})=>{a&&(d("objectData",{action:f.value,subject:s.value}),d("update:isDrawerOpen",!1),I(()=>{var p,C;(p=n.value)==null||p.reset(),(C=n.value)==null||C.resetValidation()}))})},y=c=>{d("update:isDrawerOpen",c)};return(c,a)=>(w(),P(Y,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":V.isDrawerOpen,"onUpdate:modelValue":y},{default:t(()=>[m("div",he,[ke,e(Q),e(D,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:u},{default:t(()=>[e(U,{size:"18",icon:"tabler-x"})]),_:1})]),e(r(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(T,{flat:""},{default:t(()=>[e(j,null,{default:t(()=>[e(X,{ref_key:"refForm",ref:n,modelValue:r(_),"onUpdate:modelValue":a[2]||(a[2]=p=>g(_)?_.value=p:null),onSubmit:W(k,["prevent"])},{default:t(()=>[e(Z,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e($,{modelValue:r(f),"onUpdate:modelValue":a[0]||(a[0]=p=>g(f)?f.value=p:null),rules:[r(q)],label:"Action"},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e($,{modelValue:r(s),"onUpdate:modelValue":a[1]||(a[1]=p=>g(s)?s.value=p:null),rules:[r(q)],label:"Subject"},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(D,{type:"submit",class:"me-3"},{default:t(()=>[h(" Submit ")]),_:1}),e(D,{type:"reset",variant:"tonal",color:"secondary",onClick:u},{default:t(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Pe={class:"d-flex align-center pa-6 pb-1"},Oe=m("h6",{class:"text-h6"}," Edit Permission ",-1),je={__name:"EditDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},permission:{type:Object}},emits:["update:isDrawerOpen","objectData"],setup(b,{emit:d}){const V=b;H(()=>V.permission,c=>{c&&(f.value=c.id||0,s.value=c.action||"",u.value=c.subject||"")});const _=i(!1),n=i(),f=i(),s=i(""),u=i(""),k=()=>{d("update:isDrawerOpen",!1),I(()=>{var c,a;(c=n.value)==null||c.reset(),(a=n.value)==null||a.resetValidation()})},y=()=>{var c;(c=n.value)==null||c.validate().then(({valid:a})=>{a&&(d("objectData",{id:f.value,action:s.value,subject:u.value}),d("update:isDrawerOpen",!1),I(()=>{var p,C;(p=n.value)==null||p.reset(),(C=n.value)==null||C.resetValidation()}))})};return(c,a)=>(w(),P(Y,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":V.isDrawerOpen},{default:t(()=>[m("div",Pe,[Oe,e(Q),e(D,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:k},{default:t(()=>[e(U,{size:"18",icon:"tabler-x"})]),_:1})]),e(r(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(T,{flat:""},{default:t(()=>[e(j,null,{default:t(()=>[e(X,{ref_key:"refForm",ref:n,modelValue:r(_),"onUpdate:modelValue":a[2]||(a[2]=p=>g(_)?_.value=p:null),onSubmit:W(y,["prevent"])},{default:t(()=>[e(Z,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e($,{modelValue:r(s),"onUpdate:modelValue":a[0]||(a[0]=p=>g(s)?s.value=p:null),rules:[r(q)],label:"Action"},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e($,{modelValue:r(u),"onUpdate:modelValue":a[1]||(a[1]=p=>g(u)?u.value=p:null),rules:[r(q)],label:"Subject"},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(D,{type:"submit",class:"me-3"},{default:t(()=>[h(" Submit ")]),_:1}),e(D,{type:"reset",variant:"tonal",color:"secondary",onClick:k},{default:t(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Se={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},permission:{type:Object,required:!0}},emits:["update:isDrawerOpen","objectData"],setup(b,{emit:d}){const V=b,_=i(),n=()=>{d("update:isDialogVisible",!1)};H(()=>V.permission,s=>{s&&(_.value=s.id||0)});const f=()=>{d("objectData",{id:V.permission.id}),d("update:isDialogVisible",!1)};return(s,u)=>{const k=Ve;return w(),P(_e,{modelValue:V.isDialogVisible,"onUpdate:modelValue":u[2]||(u[2]=y=>V.isDialogVisible=y),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(k,{onClick:u[0]||(u[0]=y=>n())}),e(T,{title:"Confirmation"},{default:t(()=>[e(j,null,{default:t(()=>[h(" Are you sure you want to delete this Permission ? ")]),_:1}),e(j,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(D,{color:"secondary",variant:"tonal",onClick:u[1]||(u[1]=y=>d("update:isDialogVisible",!1))},{default:t(()=>[h(" Disagree ")]),_:1}),e(D,{onClick:f},{default:t(()=>[h(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ae=ne("PermissionStore",{actions:{fetchData(b){return F.get("/api/permissions/list",{params:b})},addPermission(b){const{action:d,subject:V}=b;return new Promise((_,n)=>{F.post("/api/permissions/store",{action:d,subject:V}).then(f=>_(f)).catch(f=>n(f))})},updatePermission(b){const{id:d,action:V,subject:_}=b;return new Promise((n,f)=>{let s={action:V,subject:_};F.post("/api/permissions/update/"+d,s).then(u=>n(u)).catch(u=>f(u))})},deletePermission(b){const{id:d}=b;return new Promise((V,_)=>{F.delete("/api/permissions/delete/"+d).then(n=>V(n)).catch(n=>_(n))})}}});const Ue={class:"me-3",style:{width:"80px"}},$e={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{width:"10rem"}},Ne=m("thead",null,[m("tr",null,[m("th",{scope:"col"}," ID "),m("th",{scope:"col"}," permission "),m("th",{scope:"col"}," ACTIONS ")])],-1),Fe={class:"d-flex align-center"},Be={key:1},Ie={class:"d-flex flex-column"},qe={class:"text-base"},Te={class:"text-center",style:{width:"5rem"}},Ee=m("tr",null,[m("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Re=[Ee],Me={class:"text-sm text-disabled"},Le={__name:"index",setup(b){const d=Ae(),V=i(""),_=i(!1),n=i(!0);i(),i(),i();const f=i(10),s=i(1),u=i(1),k=i(0);let y=i([]),c=i([]);const a=i({isActive:!1}),p=()=>{a.value.isActive=!0,d.fetchData({searchValue:V.value,perPage:f.value,currentPage:s.value}).then(v=>{c.value=v.data.permissions,a.value.isActive=!1,_.value=!1}).catch(v=>{a.value.isActive=!1,console.error(v)})};E(p),E(()=>{s.value>u.value&&(s.value=u.value)}),H(V,()=>{_.value=!0,p()});const C=v=>v==="subscriber"?{color:"warning",icon:"tabler-user"}:v==="author"?{color:"success",icon:"tabler-circle-check"}:v==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:v==="editor"?{color:"info",icon:"tabler-pencil"}:v==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},z=i(!1),N=i(!1),S=i(!1);let x=i();E(()=>{s.value>u.value&&(s.value=u.value)});const ee=ue(()=>{const v=y.value.length?(s.value-1)*f.value+1:0,l=y.value.length+(s.value-1)*f.value;return`Showing ${v} to ${l} of ${k.value} entries`}),te=v=>{a.value.isActive=!0,d.addPermission(v).then(l=>{p(),M(l.data.message)}).catch(l=>{a.value.isActive=!1,R(l.response.data.message)})},ae=v=>{a.value.isActive=!0,d.updatePermission(v).then(l=>{p(),M(l.data.message)}).catch(l=>{a.value.isActive=!1,R(l.response.data.message)})},le=v=>{a.value.isActive=!0,d.deletePermission(v).then(l=>{p(),M(l.data.message)}).catch(l=>{a.value.isActive=!1,R(l.response.data.message)})},oe=v=>{N.value=!0,x=v},se=v=>{S.value=!0,x=v};return(v,l)=>{const ie=de("RouterLink");return w(),B("section",null,[e(Z,null,{default:t(()=>[e(be,{"model-value":r(a).isActive,class:"align-center justify-center"},{default:t(()=>[e(J,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(O,{cols:"12"},{default:t(()=>[e(T,{title:"permissions"},{default:t(()=>[e(L),e(j,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[m("div",Ue,[e(ge,{modelValue:r(f),"onUpdate:modelValue":l[0]||(l[0]=o=>g(f)?f.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Q),m("div",$e,[m("div",ze,[r(_)?(w(),P(J,{key:0,indeterminate:"",color:"primary"})):(w(),P($,{key:1,onInput:l[1]||(l[1]=o=>n.value=!0),ref:"searchField",modelValue:r(V),"onUpdate:modelValue":l[2]||(l[2]=o=>g(V)?V.value=o:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(D,{"prepend-icon":"tabler-plus",onClick:l[3]||(l[3]=o=>z.value=!0)},{default:t(()=>[h(" Add New permission ")]),_:1})])]),_:1}),e(L),e(De,{class:"text-no-wrap"},{default:t(()=>[Ne,m("tbody",null,[(w(!0),B(ce,null,pe(r(c),o=>(w(),B("tr",{key:o.id,style:{height:"3.75rem"}},[m("td",null,A(o.id),1),m("td",null,[m("div",Fe,[e(we,{variant:"tonal",color:C(o.action).color,class:"me-3",size:"38"},{default:t(()=>[o.avatar?(w(),P(ye,{key:0,src:o.avatar},null,8,["src"])):(w(),B("span",Be,A(o.action.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),m("div",Ie,[m("h6",qe,[e(ie,{to:{name:"apps-user-view-id",params:{id:o.id}},class:"font-weight-medium user-list-name"},{default:t(()=>[h(A(o.action)+"- "+A(o.subject),1)]),_:2},1032,["to"])])])])]),m("td",Te,[e(D,{icon:"",size:"x-small",color:"default",variant:"text",onClick:re=>oe(o)},{default:t(()=>[e(U,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(D,{icon:"",size:"x-small",color:"default",variant:"text",onClick:re=>se(o)},{default:t(()=>[e(U,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(D,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(U,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),me(m("tfoot",null,Re,512),[[fe,!r(c).length]])]),_:1}),e(L),e(j,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[m("span",Me,A(r(ee)),1),e(xe,{modelValue:r(s),"onUpdate:modelValue":l[4]||(l[4]=o=>g(s)?s.value=o:null),size:"small","total-visible":5,length:r(u)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ce,{isDrawerOpen:r(z),"onUpdate:isDrawerOpen":l[5]||(l[5]=o=>g(z)?z.value=o:null),onObjectData:te},null,8,["isDrawerOpen"]),e(je,{isDrawerOpen:r(N),"onUpdate:isDrawerOpen":l[6]||(l[6]=o=>g(N)?N.value=o:null),permission:r(x),"onUpdate:permission":l[7]||(l[7]=o=>g(x)?x.value=o:x=o),onObjectData:ae},null,8,["isDrawerOpen","permission"]),r(S)?(w(),P(Se,{key:0,isDialogVisible:r(S),"onUpdate:isDialogVisible":l[8]||(l[8]=o=>g(S)?S.value=o:null),permission:r(x),"onUpdate:permission":l[9]||(l[9]=o=>g(x)?x.value=o:x=o),onObjectData:le},null,8,["isDialogVisible","permission"])):ve("",!0)])}}};typeof G=="function"&&G(Le);export{Le as default};
