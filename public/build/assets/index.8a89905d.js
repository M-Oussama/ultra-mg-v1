import{bc as Z,a1 as D,k as i,$ as S,Z as G,A as J,r as K,o as f,c as C,p as a,w as r,q as n,m as s,D as y,b as P,E as U,F as W,a as X,x as V,C as z,H as Y,I as ee,y as te}from"./main.e3ae6f5b.js";import{_ as ae,a as le}from"./EditEmployeeDrawer.42794e31.js";import{_ as se}from"./ConfirmationDialog.1fa5b90c.js";import{s as $,e as I}from"./errorsMiddleware.cd79b49a.js";import{a as oe}from"./VOverlay.bef3a4a8.js";import{a as T,V as g}from"./VBtn.78b9f864.js";import{a as ie,V as re}from"./VRow.307db058.js";import{V as ne,c as B}from"./VCard.9574192c.js";import{V as N}from"./VDivider.04b9ef9a.js";import{V as pe}from"./VSelect.e8db8923.js";import{V as me}from"./VSpacer.50e7ecc1.js";import{V as de}from"./VTextField.c4710a67.js";import{V as ue}from"./VTable.24eac033.js";import{V as ce}from"./VAvatar.a66dff35.js";import{V as ve}from"./VImg.a8f9a1c8.js";import{V as fe}from"./VPagination.29fbda3c.js";import"./AppDateTimePicker.fa89fced.js";import"./VField.93385836.js";import"./index.ba8dc909.js";import"./VInput.ebff45cb.js";import"./router.92e08cce.js";import"./position.4c99774d.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VForm.724a7186.js";import"./forwardRefs.c003b6b8.js";import"./VNavigationDrawer.2a3e31b0.js";import"./ssrBoot.170b97eb.js";import"./DialogCloseBtn.91cc9156.js";import"./VDialog.6cfe2dfa.js";import"./scopeId.55b8accf.js";import"./dialog-transition.cc00eae2.js";import"./lazy.f3535b64.js";import"./VList.d6dc74e3.js";import"./VMenu.d6d893ca.js";import"./VCheckboxBtn.41b91637.js";import"./VSelectionControl.90a7537b.js";import"./VChip.dd80b8e5.js";/* empty css                   */import"./VCounter.a137105a.js";const ye=Z("EmployeeStore",{actions:{fetchEmployees(u){return D.get("/api/employees/list",{params:u})},addEmployee(u){const p=u.employee.value;return new Promise((m,d)=>{D.post("/api/employees/store",{employee:p}).then(l=>m(l)).catch(l=>d(l))})},updateEmployee(u){const p=u.employee.value;return new Promise((m,d)=>{let l={employee:p};D.post("/api/employees/update/"+p.id,l).then(x=>m(x)).catch(x=>d(x))})},fetchEmployee(u){return new Promise((p,m)=>{D.get(`/apps/employees/${u}`).then(d=>p(d)).catch(d=>m(d))})},deleteEmployee(u){const{id:p}=u;return new Promise((m,d)=>{D.delete("/api/employees/delete/"+p).then(l=>m(l)).catch(l=>d(l))})}}});const he={class:"me-3",style:{width:"80px"}},_e={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ve={style:{width:"9rem"}},ge=s("thead",null,[s("tr",null,[s("th",{scope:"col"}," ID "),s("th",{scope:"col"}," Employee "),s("th",{scope:"col"}," email "),s("th",{scope:"col"}," ACTIONS ")])],-1),xe={class:"d-flex align-center"},we={key:1},Ee={class:"d-flex flex-column"},be={class:"text-base"},De={class:"text-sm text-disabled"},Ae={class:"text-capitalize text-base font-weight-semibold"},ke={class:"text-center",style:{width:"5rem"}},Ce=s("tr",null,[s("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Pe=[Ce],ze={class:"text-sm text-disabled"},_t={__name:"index",setup(u){const p=ye(),m=i(""),d=i(!1),l=i({isActive:!0}),x=i(!0);i(),i(),i();const h=i(10),c=i(1),_=i(1),O=i(0);let w=i([]);const E=()=>{l.value.isActive=!0,p.fetchEmployees({searchValue:m.value,perPage:h.value,currentPage:c.value}).then(o=>{w.value=o.data.employees.data,_.value=o.data.totalPage,O.value=o.data.totalEmployees,d.value=!1,l.value.isActive=!1}).catch(o=>{console.error(o),l.value.isActive=!1})};S(E),S(()=>{c.value>_.value&&(c.value=_.value)}),G(m,()=>{E()});const A=i(!1),k=i(!1),b=i(!1);let v=i();S(()=>{c.value>_.value&&(c.value=_.value)});const F=J(()=>{const o=w.value.length?(c.value-1)*h.value+1:0,e=w.value.length+(c.value-1)*h.value;return`Showing ${o} to ${e} of ${O.value} entries`}),R=o=>{l.value.isActive=!0,p.addEmployee(o).then(e=>{$(e.data.message),l.value.isActive=!1,E()}).catch(e=>{I(e.data.message),l.value.isActive=!1})},L=o=>{l.value.isActive=!0,p.updateEmployee(o).then(e=>{$(e.data.message),l.value.isActive=!1,E()}).catch(e=>{I(e.data.message),l.value.isActive=!1})},j=o=>{l.value.isActive=!0,p.deleteEmployee(o).then(e=>{l.value.isActive=!1,$(e.data.message)}).catch(e=>{I(e.data.message),l.value.isActive=!1}),E()},q=o=>{k.value=!0,v=o},M=o=>{b.value=!0,v=o};return(o,e)=>{const H=K("RouterLink");return f(),C("section",null,[a(re,null,{default:r(()=>[a(oe,{"model-value":n(l).isActive,class:"align-center justify-center"},{default:r(()=>[a(T,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),a(ie,{cols:"12"},{default:r(()=>[a(ne,{title:"Employees"},{default:r(()=>[a(N),a(B,{class:"d-flex flex-wrap py-4 gap-4"},{default:r(()=>[s("div",he,[a(pe,{modelValue:n(h),"onUpdate:modelValue":e[0]||(e[0]=t=>y(h)?h.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(me),s("div",_e,[s("div",Ve,[n(d)?(f(),P(T,{key:0,indeterminate:"",color:"primary"})):(f(),P(de,{key:1,onInput:e[1]||(e[1]=t=>x.value=!0),ref:"searchField",modelValue:n(m),"onUpdate:modelValue":e[2]||(e[2]=t=>y(m)?m.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),a(g,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:r(()=>[U(" Export ")]),_:1}),a(g,{"prepend-icon":"tabler-plus",onClick:e[3]||(e[3]=t=>A.value=!0)},{default:r(()=>[U(" New Employee ")]),_:1})])]),_:1}),a(N),a(ue,{class:"text-no-wrap"},{default:r(()=>[ge,s("tbody",null,[(f(!0),C(W,null,X(n(w),t=>(f(),C("tr",{key:t.id,style:{height:"3.75rem"}},[s("td",null,V(t.id),1),s("td",null,[s("div",xe,[a(ce,{variant:"tonal",class:"me-3",size:"38"},{default:r(()=>[t.avatar?(f(),P(ve,{key:0,src:t.avatar},null,8,["src"])):(f(),C("span",we,V(t.name.toUpperCase().charAt(0)),1))]),_:2},1024),s("div",Ee,[s("h6",be,[a(H,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"font-weight-medium user-list-name"},{default:r(()=>[U(V(t.name),1)]),_:2},1032,["to"])]),s("span",De,"@"+V(t.email),1)])])]),s("td",null,[s("span",Ae,V(t.email),1)]),s("td",ke,[a(g,{icon:"",size:"x-small",color:"default",variant:"text",onClick:Q=>q(t)},{default:r(()=>[a(z,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(g,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-attendance-employees-id",params:{id:t.id}}},{default:r(()=>[a(z,{size:"22",icon:"tabler-viewfinder"})]),_:2},1032,["to"]),a(g,{icon:"",size:"x-small",color:"default",variant:"text",onClick:Q=>M(t)},{default:r(()=>[a(z,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(g,{icon:"",size:"x-small",color:"default",variant:"text"},{default:r(()=>[a(z,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),Y(s("tfoot",null,Pe,512),[[ee,!n(w).length]])]),_:1}),a(N),a(B,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:r(()=>[s("span",ze,V(n(F)),1),a(fe,{modelValue:n(c),"onUpdate:modelValue":e[4]||(e[4]=t=>y(c)?c.value=t:null),size:"small","total-visible":5,length:n(_)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),a(ae,{isDrawerOpen:n(A),"onUpdate:isDrawerOpen":e[5]||(e[5]=t=>y(A)?A.value=t:null),onEmployeeData:R},null,8,["isDrawerOpen"]),a(le,{isDrawerOpen:n(k),"onUpdate:isDrawerOpen":e[6]||(e[6]=t=>y(k)?k.value=t:null),employee:n(v),"onUpdate:employee":e[7]||(e[7]=t=>y(v)?v.value=t:v=t),onEmployeeData:L},null,8,["isDrawerOpen","employee"]),n(b)?(f(),P(se,{key:0,isDialogVisible:n(b),"onUpdate:isDialogVisible":e[8]||(e[8]=t=>y(b)?b.value=t:null),employee:n(v),"onUpdate:employee":e[9]||(e[9]=t=>y(v)?v.value=t:v=t),onEmployeeData:j},null,8,["isDialogVisible","employee"])):te("",!0)])}}};export{_t as default};
