import{k as r,Z as H,bd as Q,r as ne,o as b,b as E,w as a,m as n,p as e,C as $,q as i,P as se,D as g,be as re,E as y,ay as ie,$ as T,A as de,c as I,F as ue,a as ce,x as A,y as pe,H as me,I as fe,bf as Y}from"./main.8e3d834c.js";import{_ as ve}from"./DialogCloseBtn.6e92c959.js";import{s as G}from"./successMiddleware.60712f12.js";import{e as P}from"./errorsMiddleware.e88e793d.js";import{u as J}from"./useVacationStore.210eafc1.js";import{V as K}from"./VSpacer.8cabb308.js";import{V as v,a as W}from"./VBtn.d45a6048.js";import{V as B,c as S}from"./VCard.23579ef6.js";import{V as _e}from"./VForm.b347f109.js";import{V as X,a as O}from"./VRow.45fdd78b.js";import{V as Z}from"./VInput.221caba9.js";import{V as j}from"./VTextField.810b1049.js";import{V as Ve}from"./VNavigationDrawer.d95beabf.js";import{_ as ge}from"./AddNewVacation.11ee64b7.js";import{a as ye}from"./VOverlay.e098729e.js";import{V as M}from"./VDivider.6d6bcb40.js";import{V as De}from"./VSelect.97f52872.js";import{V as xe}from"./VTable.aae49bb7.js";import{V as we}from"./VMenu.07de16f8.js";import{V as he}from"./VList.5eb680d2.js";import{V as be}from"./VPagination.25f4202e.js";import{V as Ce}from"./VDialog.60004fa2.js";import"./VAvatar.a16965d6.js";import"./router.96bf7663.js";import"./VImg.5f2c6d35.js";import"./position.c80f08b0.js";import"./forwardRefs.c003b6b8.js";import"./index.a0fbf071.js";/* empty css                   */import"./VField.b13be34f.js";import"./easing.36b781ab.js";import"./VCounter.1ff827ea.js";import"./ssrBoot.455730b9.js";import"./lazy.a8f563f0.js";import"./dialog-transition.721de8d1.js";import"./VCheckboxBtn.515d277c.js";import"./VSelectionControl.a2ce79b7.js";import"./VChip.d81a1f97.js";import"./scopeId.5ac90517.js";const ke={class:"d-flex align-center pa-6 pb-1"},$e=n("h6",{class:"text-h6"}," Add New Record ",-1),Ae={__name:"EditVacation",props:{isDrawerOpen:{type:null,required:!0},loading:{type:null,required:!0},vacation:{type:Object,required:!0}},setup(R){const _=R,C=J(),t=r({start_date:"",end_date:"",end_date_restrict:new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+(new Date().getDate()+1),count:0});H(()=>_.vacation,o=>{o&&(t.value={...o})}),Q();const k=r(!1),c=r();r(),r({id:-1});const U=()=>{_.isDrawerOpen.open=!1,ie(()=>{var o,d;(o=c.value)==null||o.reset(),(d=c.value)==null||d.resetValidation()})},N=()=>{t.value.start_date===""||t.value.start_date===null||t.value.end_date===""||t.value.end_date===null||t.value.count<=0?((t.value.start_date===""||t.value.start_date===null)&&P("Warning","start date must be selected"),t.value.count<=0&&P("Warning","count days starts from 1 ")):(_.loading.isActive=!0,C.updateVacation(D(t.value.start_date),D(t.value.end_date),t.value.id,t.value.count).then(o=>{_.isDrawerOpen.open=!1,_.loading.isActive=!1,G(o.data.msg),location.reload()}).catch(o=>{_.loading.isActive=!1,P("Error Occured",o.response.data.message)}))},h=o=>{_.isDrawerOpen.value.open=o};function m(o){return parseInt(o)<10?"0"+o:o}const V=o=>{const d=o.getDate(),p=o.getMonth()+1;return`${o.getFullYear()}-${m(p)}-${m(d)}`},z=()=>{t.value.start_date===null&&(t.value.end_date=null),(t.value.start_date===""||t.value.start_date>=t.value.end_date&&t.value.end_date!=="")&&(t.value.end_date=""),w(),t.value.end_date_restrict=new Date(new Date(t.value.start_date).getTime()+24*60*60*2e3).toISOString().split("T")[0]},D=o=>{if(o!=null&&o!==""){console.log(o);let d=new Date(o),p=d.getFullYear(),f=String(d.getMonth()+1).padStart(2,"0"),F=String(d.getDate()).padStart(2,"0");return`${p}-${f}-${F}`}return o},x=()=>{w()},w=()=>{if(t.value.start_date){let o=new Date(t.value.start_date);t.value.end_date=new Date(o.getTime()+t.value.count*24*60*60*1e3)}console.log(t.value.end_date)};return(o,d)=>{const p=ne("VueDatePicker");return b(),E(Ve,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":_.isDrawerOpen.open,"onUpdate:modelValue":h},{default:a(()=>[n("div",ke,[$e,e(K),e(v,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:U},{default:a(()=>[e($,{size:"18",icon:"tabler-x"})]),_:1})]),e(i(se),{options:{wheelPropagation:!1}},{default:a(()=>[e(B,{flat:""},{default:a(()=>[e(S,null,{default:a(()=>[e(_e,{ref_key:"refForm",ref:c,modelValue:i(k),"onUpdate:modelValue":d[3]||(d[3]=f=>g(k)?k.value=f:null),onSubmit:re(N,["prevent"])},{default:a(()=>[e(X,null,{default:a(()=>[e(O,{cols:"12"},{default:a(()=>[e(Z,null,{default:a(()=>[y(" Vacation Start Date ")]),_:1}),e(p,{modelValue:i(t).start_date,"onUpdate:modelValue":[d[0]||(d[0]=f=>i(t).start_date=f),z],"auto-apply":"",format:V},null,8,["modelValue"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(j,{modelValue:i(t).count,"onUpdate:modelValue":[d[1]||(d[1]=f=>i(t).count=f),x],type:"number",label:"Vacation Days"},null,8,["modelValue"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(Z,null,{default:a(()=>[y(" Vacation End Date ")]),_:1}),e(p,{modelValue:i(t).end_date,"onUpdate:modelValue":d[2]||(d[2]=f=>i(t).end_date=f),"auto-apply":"",disabled:"true",format:V,"min-date":i(t).end_date_restrict},null,8,["modelValue","min-date"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(v,{type:"submit",class:"me-3"},{default:a(()=>[y(" Submit ")]),_:1}),e(v,{type:"reset",variant:"tonal",color:"secondary",onClick:U},{default:a(()=>[y(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Se={class:"me-3",style:{width:"80px"}},Oe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ue={style:{width:"9rem"}},ze=n("thead",null,[n("tr",null,[n("th",{scope:"col"}," ID "),n("th",{scope:"col"}," Start Date "),n("th",{scope:"col"}," End Date "),n("th",{scope:"col"}," Period "),n("th",{scope:"col"}," ACTIONS ")])],-1),Ee={class:"d-flex align-center"},Pe={class:"d-flex flex-column"},Ne={class:"text-base"},Fe={class:"d-flex align-center"},Te={class:"d-flex flex-column"},Ie={class:"text-base"},Me={class:"d-flex align-center"},Be={class:"d-flex flex-column"},Re={class:"text-base"},Le={class:"text-center",style:{width:"5rem"}},qe=n("tr",null,[n("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Ye=[qe],We={class:"text-sm text-disabled"},Ze={__name:"[id]",setup(R){const _=J(),C=r(""),t=r("Employees"),k=r(!1),c=r({isActive:!0}),U=Q(),N=r(!0);r(),r("mahgounoussama23@gmail.com"),r(),r();const h=r(10),m=r(1),V=r(1),z=r(0);let D=r([]),x=r({open:!1}),w=r({open:!1}),o=r({open:!1});r(!1),r(!0);const d=()=>{c.value.isActive=!0,_.fetchListRecord(Number(U.params.id)).then(u=>{D.value=u.data.list.data,V.value=u.data.totalPage,z.value=u.data.totalVacation,k.value=!1,c.value.isActive=!1,console.log(u)}).catch(u=>{console.log(u),c.value.isActive=!1})};T(d),T(()=>{m.value>V.value&&(m.value=V.value)}),H(C,()=>{d()}),r(!1);let p=r(null);T(()=>{m.value>V.value&&(m.value=V.value)});const f=de(()=>{const u=D.value.length?(m.value-1)*h.value+1:0,s=D.value.length+(m.value-1)*h.value;return`Showing ${u} to ${s} of ${z.value} entries`}),F=u=>{p.value=u,x.value.open=!0},ee=u=>{p.value=u,w.value.open=!0},te=()=>{o.value.open=!0},ae=u=>{p.value=u,x.value.open=!0},le=()=>{c.value.isActive=!0,w.value.open=!1,_.deleteVacation(p.value.id).then(u=>{c.value.isActive=!1,console.log(u),G(u.data.message),d()}).catch(u=>{P(u.data.message),c.value.isActive=!1})},L=()=>{w.value.open=!1};return(u,s)=>{const oe=ve;return b(),I("section",null,[e(X,null,{default:a(()=>[e(ye,{"model-value":i(c).isActive,class:"align-center justify-center"},{default:a(()=>[e(W,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(O,{cols:"12"},{default:a(()=>[e(B,{title:i(t)},{default:a(()=>[e(M),e(S,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[n("div",Se,[e(De,{modelValue:i(h),"onUpdate:modelValue":s[0]||(s[0]=l=>g(h)?h.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(K),n("div",Oe,[n("div",Ue,[i(k)?(b(),E(W,{key:0,indeterminate:"",color:"primary"})):(b(),E(j,{key:1,onInput:s[1]||(s[1]=l=>N.value=!0),ref:"searchField",modelValue:i(C),"onUpdate:modelValue":s[2]||(s[2]=l=>g(C)?C.value=l:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(v,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:a(()=>[y(" Export ")]),_:1}),e(v,{color:"primary","prepend-icon":"tabler-plus",onClick:s[3]||(s[3]=l=>te())},{default:a(()=>[y(" New Vacation ")]),_:1})])]),_:1}),e(M),e(xe,{class:"text-no-wrap"},{default:a(()=>[ze,n("tbody",null,[(b(!0),I(ue,null,ce(i(D),l=>(b(),I("tr",{key:l.id,style:{height:"3.75rem"}},[n("td",null,A(l.id),1),n("td",null,[n("div",Ee,[n("div",Pe,[n("h6",Ne,A(l.start_date),1)])])]),n("td",null,[n("div",Fe,[n("div",Te,[n("h6",Ie,A(l.end_date),1)])])]),n("td",null,[n("div",Me,[n("div",Be,[n("h6",Re,A(l.count)+" days ",1)])])]),n("td",Le,[e(v,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-employee-vacation-preview-id",params:{id:l.id}}},{default:a(()=>[e($,{size:"22",icon:"tabler-screen-share"})]),_:2},1032,["to"]),l.last?(b(),E(v,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:q=>F(l)},{default:a(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):pe("",!0),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:q=>ae(l)},{default:a(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e($,{size:"22",icon:"tabler-trash",onClick:q=>ee(l)},null,8,["onClick"])]),_:2},1024),e(v,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e($,{size:22,icon:"tabler-dots-vertical"}),e(we,{activator:"parent"},{default:a(()=>[e(he,{density:"compact"})]),_:1})]),_:1})])]))),128))]),me(n("tfoot",null,Ye,512),[[fe,!i(D).length]])]),_:1}),e(M),e(S,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[n("span",We,A(i(f)),1),e(be,{modelValue:i(m),"onUpdate:modelValue":s[4]||(s[4]=l=>g(m)?m.value=l:null),size:"small","total-visible":5,length:i(V)},null,8,["modelValue","length"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),e(Ae,{isDrawerOpen:i(x),"onUpdate:isDrawerOpen":s[5]||(s[5]=l=>g(x)?x.value=l:x=l),vacation:i(p),"onUpdate:vacation":s[6]||(s[6]=l=>g(p)?p.value=l:p=l),loading:i(c),"onUpdate:loading":s[7]||(s[7]=l=>g(c)?c.value=l:null)},null,8,["isDrawerOpen","vacation","loading"]),e(ge,{isDrawerOpen:i(o),"onUpdate:isDrawerOpen":s[8]||(s[8]=l=>g(o)?o.value=l:o=l),loading:i(c),"onUpdate:loading":s[9]||(s[9]=l=>g(c)?c.value=l:null)},null,8,["isDrawerOpen","loading"]),e(Ce,{modelValue:i(w).open,"onUpdate:modelValue":s[12]||(s[12]=l=>i(w).open=l),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(oe,{onClick:s[10]||(s[10]=l=>L())}),e(B,{title:"Confirmation"},{default:a(()=>[e(S,null,{default:a(()=>[y(" Are you sure you want to delete this record ? ")]),_:1}),e(S,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(v,{color:"secondary",variant:"tonal",onClick:s[11]||(s[11]=l=>L())},{default:a(()=>[y(" Disagree ")]),_:1}),e(v,{onClick:le},{default:a(()=>[y(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};typeof Y=="function"&&Y(Ze);export{Ze as default};
