import{k as i,$ as A,Z as Y,A as G,o as D,c as z,p as a,w as n,q as o,m as l,D as d,b as P,E as h,F as J,a as K,x as c,C,H as W,I as X,bf as T}from"./main.a88fc9d8.js";import{_ as ee}from"./DialogCloseBtn.ed5aa0e1.js";import{_ as te,a as ae}from"./EditBenefitDrawer.3b27b472.js";import{s as le}from"./successMiddleware.18bb07f4.js";import{e as oe}from"./errorsMiddleware.f9131f1f.js";import{u as se}from"./useSaleStore.86ca9cbe.js";import{a as ie}from"./VOverlay.7b08ee76.js";import{a as $,V as m}from"./VBtn.4793733a.js";import{a as ne,V as re}from"./VRow.3acaa8a0.js";import{V as E,c as k}from"./VCard.a26580f4.js";import{V as U}from"./VDivider.d969cb35.js";import{V as de}from"./VSelect.41ef638f.js";import{V as ue}from"./VSpacer.ac05d315.js";import{V as pe}from"./VTextField.79a7cac4.js";import{V as me}from"./VTable.a6c0afbb.js";import{V as ce}from"./VPagination.fd41084f.js";import{V as fe}from"./VDialog.879f8fb2.js";/* empty css                        */import"./VForm.1d060c86.js";import"./VInput.962bc6d0.js";import"./router.f48c532b.js";import"./index.60e81d91.js";import"./VImg.da644a47.js";import"./forwardRefs.c003b6b8.js";import"./VAutocomplete.4023fb6b.js";import"./filter.c6a69fa4.js";import"./VList.9cd035e1.js";import"./VAvatar.d9fc142d.js";import"./VMenu.28d24987.js";import"./scopeId.a6fee37a.js";import"./dialog-transition.c09ab3d4.js";import"./easing.36b781ab.js";import"./VCheckboxBtn.13b6a266.js";import"./VSelectionControl.b0dab7de.js";import"./VChip.a15d7a7c.js";import"./VNavigationDrawer.10bb7940.js";import"./ssrBoot.f27232d8.js";import"./lazy.a1de406b.js";import"./position.954b49b2.js";/* empty css                   */import"./VField.c1b1c013.js";import"./VCounter.217b097a.js";const ve={class:"me-3",style:{width:"80px"}},ge={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},xe={style:{width:"9rem"}},Ve=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," ID "),l("th",{scope:"col"}," MONTH/YEAR "),l("th",{scope:"col"}," AMOUNT "),l("th",{scope:"col"}," NET BENEFIT "),l("th",{scope:"col"}," Quantity "),l("th",{scope:"col"}," ACTIONS ")])],-1),_e={class:"text-capitalize text-base font-weight-semibold"},we={class:"text-capitalize text-base font-weight-semibold"},ye={class:"text-capitalize text-base font-weight-semibold"},De={class:"text-capitalize text-base font-weight-semibold"},he={class:"text-center",style:{width:"5rem"}},be=l("tr",null,[l("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Be=[be],Ce={class:"text-sm text-disabled"},ke={__name:"index",setup(Ae){const N=se(),V=i(""),O=i(!1),r=i({isActive:!0}),I=i(!0);i(),i(),i();const f=i(10),u=i(1),v=i(1),S=i(0);let p=i([]),g=i([]),_=i([]);i([]);const w=()=>{r.value.isActive=!0,N.fetchBenefits({searchValue:V.value,perPage:f.value,currentPage:u.value}).then(s=>{p.value=s.data.benefits.data,g.value=s.data.months,_.value=s.data.years,v.value=s.data.totalPage,S.value=s.data.totalBenefits,O.value=!1,r.value.isActive=!1}).catch(s=>{console.error(s),r.value.isActive=!1})};A(w),A(()=>{u.value>v.value&&(u.value=v.value)}),Y(V,()=>{w()});const b=i({open:!1}),B=i({open:!1}),y=i({open:!1}),x=i();A(()=>{u.value>v.value&&(u.value=v.value)});const M=G(()=>{const s=p.value.length?(u.value-1)*f.value+1:0,t=p.value.length+(u.value-1)*f.value;return`Showing ${s} to ${t} of ${S.value} entries`}),j=s=>{w()},R=s=>{w()},Z=s=>{x.value=s,B.value.open=!0},H=s=>{y.value.open=!0,x.value=s},F=()=>{y.value.open=!1},Q=()=>{r.value.isActive=!0,y.value.open=!1,N.deleteBenefit(x.value.id).then(s=>{r.value.isActive=!1,le(s.data.message),w()}).catch(s=>{oe(s.data.message),r.value.isActive=!1})};return(s,t)=>{const q=ee;return D(),z("section",null,[a(re,null,{default:n(()=>[a(ie,{"model-value":o(r).isActive,class:"align-center justify-center"},{default:n(()=>[a($,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),a(ne,{cols:"12"},{default:n(()=>[a(E,{title:"Benefits"},{default:n(()=>[a(U),a(k,{class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[l("div",ve,[a(de,{modelValue:o(f),"onUpdate:modelValue":t[0]||(t[0]=e=>d(f)?f.value=e:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(ue),l("div",ge,[l("div",xe,[o(O)?(D(),P($,{key:0,indeterminate:"",color:"primary"})):(D(),P(pe,{key:1,onInput:t[1]||(t[1]=e=>I.value=!0),ref:"searchField",modelValue:o(V),"onUpdate:modelValue":t[2]||(t[2]=e=>d(V)?V.value=e:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),a(m,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:n(()=>[h(" Export ")]),_:1}),a(m,{"prepend-icon":"tabler-plus",onClick:t[3]||(t[3]=e=>o(b).open=!0)},{default:n(()=>[h(" Add Benefit ")]),_:1})])]),_:1}),a(U),a(me,{class:"text-no-wrap"},{default:n(()=>[Ve,l("tbody",null,[(D(!0),z(J,null,K(o(p),e=>(D(),z("tr",{key:e.id,style:{height:"3.75rem"}},[l("td",null,c(e.id),1),l("td",null,[l("span",_e,c(o(g)[e.month-1].name)+" / "+c(e.year),1)]),l("td",null,[l("span",we,c(parseFloat(e.total_amount).toFixed(2))+" DZD",1)]),l("td",null,[l("span",ye,c(parseFloat(e.netBenefit).toFixed(2))+" DZD",1)]),l("td",null,[l("span",De,c(parseFloat(e.total_articles)),1)]),l("td",he,[a(m,{icon:"",size:"x-small",color:"default",variant:"text",onClick:L=>Z(e)},{default:n(()=>[a(C,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(m,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-POS-benefit-edit-id",params:{id:e.id}}},{default:n(()=>[a(C,{size:"22",icon:"tabler-currency-dollar"})]),_:2},1032,["to"]),a(m,{icon:"",size:"x-small",color:"default",variant:"text",onClick:L=>H(e)},{default:n(()=>[a(C,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(m,{icon:"",size:"x-small",color:"default",variant:"text"},{default:n(()=>[a(C,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),W(l("tfoot",null,Be,512),[[X,!o(p).length]])]),_:1}),a(U),a(k,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[l("span",Ce,c(o(M)),1),a(ce,{modelValue:o(u),"onUpdate:modelValue":t[4]||(t[4]=e=>d(u)?u.value=e:null),size:"small","total-visible":5,length:o(v)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),a(te,{isDrawerOpen:o(b),"onUpdate:isDrawerOpen":t[5]||(t[5]=e=>d(b)?b.value=e:null),months:o(g),"onUpdate:months":t[6]||(t[6]=e=>d(g)?g.value=e:g=e),years:o(_),"onUpdate:years":t[7]||(t[7]=e=>d(_)?_.value=e:_=e),benefit:o(p),"onUpdate:benefit":t[8]||(t[8]=e=>d(p)?p.value=e:p=e),loading:o(r),"onUpdate:loading":t[9]||(t[9]=e=>d(r)?r.value=e:null),onBenefitData:j},null,8,["isDrawerOpen","months","years","benefit","loading"]),a(ae,{isDrawerOpen:o(B),"onUpdate:isDrawerOpen":t[10]||(t[10]=e=>d(B)?B.value=e:null),benefit:o(x),"onUpdate:benefit":t[11]||(t[11]=e=>d(x)?x.value=e:null),loading:o(r),"onUpdate:loading":t[12]||(t[12]=e=>d(r)?r.value=e:null),onBenefitData:R},null,8,["isDrawerOpen","benefit","loading"]),a(fe,{modelValue:o(y).open,"onUpdate:modelValue":t[15]||(t[15]=e=>o(y).open=e),persistent:"",class:"v-dialog-sm"},{default:n(()=>[a(q,{onClick:t[13]||(t[13]=e=>F())}),a(E,{title:"Confirmation"},{default:n(()=>[a(k,null,{default:n(()=>[h(" Are you sure you want to delete this record ? ")]),_:1}),a(k,{class:"d-flex justify-end gap-3 flex-wrap"},{default:n(()=>[a(m,{color:"secondary",variant:"tonal",onClick:t[14]||(t[14]=e=>F())},{default:n(()=>[h(" Disagree ")]),_:1}),a(m,{onClick:Q},{default:n(()=>[h(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};typeof T=="function"&&T(ke);export{ke as default};
