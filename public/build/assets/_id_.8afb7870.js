import{bd as z,k as x,Z as E,q as e,o as n,c as m,p as s,w as i,m as t,x as o,b as w,y as c,F as G,a as M,E as h,D as V}from"./main.6ce9bd7f.js";import{_ as Q}from"./InvoiceAddPaymentDrawer.46ff3be1.js";import{_ as Y}from"./InvoiceSendInvoiceDrawer.496d45c2.js";import{u as H}from"./usereturnStore.ae0f801d.js";import{a as J,V as I}from"./VBtn.e6c9058c.js";import{a as W}from"./VOverlay.6ced1d82.js";import{a as f,V as R}from"./VRow.13ea7a21.js";import{V as A,c as g}from"./VCard.2812d03e.js";import{V as T}from"./VDivider.2df1a687.js";import{V as X}from"./VTable.5177289b.js";import{V as b}from"./VInput.8a6c8a86.js";import{V as C}from"./VSwitch.968fefc2.js";import{V as Z}from"./VAutocomplete.25baf643.js";import{V as L}from"./VTextField.ee54abb7.js";import"./AppDateTimePicker.7f1a2958.js";import"./VField.a6745041.js";import"./index.e6e9974c.js";import"./position.4426646e.js";import"./router.fd3b267c.js";import"./easing.36b781ab.js";import"./useSaleStore.fb7bbc0a.js";import"./errorsMiddleware.a4972175.js";import"./VSpacer.b708ce2d.js";import"./VAvatar.e93fa058.js";import"./VImg.9aec3a70.js";import"./VForm.7d725a07.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.f67190cc.js";/* empty css                   */import"./VCounter.60a6fca5.js";import"./VNavigationDrawer.96b7a47c.js";import"./ssrBoot.5826496a.js";import"./VChip.57e5108a.js";import"./lazy.a4a5c45f.js";import"./VSelectionControl.ec48379c.js";import"./VSelect.99bb8e21.js";import"./VList.b9d6d3f0.js";import"./dialog-transition.184b4be8.js";import"./VMenu.e82f0e14.js";import"./scopeId.a61c2778.js";import"./VCheckboxBtn.c367b8e7.js";import"./filter.82ca8215.js";const tt={key:0},et={class:"ma-sm-3"},st={class:"d-flex align-center mb-6"},ot={class:"font-weight-bold text-xl"},lt={class:"mb-0"},it=t("h4",{class:"mb-0"}," KASR EL ABTALE, 19000, SETIF ",-1),dt={class:"mb-0"},at={class:"mb-0"},nt={class:"mt-4 ma-sm-4"},rt={class:"font-weight-medium text-xl mb-2"},ct={class:"mb-2"},mt=t("span",null,"Date : ",-1),ut={class:"font-weight-semibold"},xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},_t=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),ht={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},pt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ft=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),bt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},vt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},wt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),gt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},yt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Vt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),kt={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},Nt={class:"font-weight-medium text-sm mb-2"},Ft={key:0,class:"mb-2 text-sm"},jt=t("span",null,"Payment: ",-1),Dt={class:"font-weight-semibold"},Tt={class:"mb-2 text-sm"},Ct=t("span",null,"Date : ",-1),St={class:"font-weight-semibold"},It={class:"v-col-md-6"},Rt=t("h4",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center"},null,-1),At={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ut=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Client ",-1),Pt={class:"v-col-md-10 border-left padding-8 data-font text-h4 text-weight-bold"},Ot={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Bt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Address ",-1),Et={class:"v-col-md-10 border-left padding-8 data-font text-h4 text-weight-bold"},Zt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Lt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Phone ",-1),Kt={class:"v-col-md-10 border-left padding-8 data-font text-h4 text-weight-bold"},$t={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},qt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Email ",-1),zt={class:"v-col-md-10 border-left padding-8 data-font text-h4 text-weight-bold"},Gt=t("div",{class:"v-col-md-2"},null,-1),Mt={key:0,class:"v-col-md-4"},Qt=t("h4",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center text-h4 align-center"},null,-1),Yt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},Ht=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," N\xB0RC ",-1),Jt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Wt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Xt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," N\xB0IF ",-1),te={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},ee={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},se=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," N\xB0IS ",-1),oe={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},le={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ie=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0 text-h4 text-weight-bold"},[t("span",null," N\xB0ART ")],-1),de={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font text-h4 text-weight-bold"},ae={key:1,class:"v-col-md-4"},ne=t("h4",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),re={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},ce=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Bon Retour ",-1),me={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},ue={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},xe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Date ",-1),_e={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},he=t("th",{class:"text-sm-caption text-h4 text-weight-bold",scope:"col"}," ID ",-1),pe={key:0,class:"text-sm-caption text-h4 text-weight-bold",scope:"col"},fe=t("th",{class:"text-sm-caption text-h4 text-weight-bold",scope:"col"}," name ",-1),be={key:1,scope:"col",class:"text-center text-sm-caption text-h4 text-weight-bold"},ve=t("th",{scope:"col",class:"text-center text-sm-caption text-h4 text-weight-bold"}," QTY ",-1),we={key:2,scope:"col",class:"text-center text-sm-caption text-h4 text-weight-bold"},ge={class:"text-no-wrap text-sm-caption text-h4 text-weight-bold"},ye={key:0,class:"text-no-wrap text-sm-caption text-h4 text-weight-bold"},Ve={class:"text-no-wrap"},ke={class:"text-sm-caption mb-0 text-h4 text-weight-bold"},Ne={key:1,class:"text-center text-sm-caption text-h4 text-weight-bold"},Fe={class:"text-center text-sm-caption text-h4 text-weight-bold"},je={key:2,class:"text-center text-sm-caption text-h4 text-weight-bold"},De={class:"my-2 mx-sm-5 v-col-md-6"},Te={key:0,class:"mt-10 d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ce=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Ancien solde ",-1),Se={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Ie={key:1,class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Re={key:0,class:"v-col-md-5 text-sm-subtitle-2 border-right text-success text-h4 text-weight-bold"},Ae={key:1,class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"},Ue={key:2,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-success text-h4 text-weight-bold"},Pe={key:3,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Oe={class:"my-2 mx-sm-4 v-col-md-4"},Be={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ee=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right text-h4 text-weight-bold"}," Total ",-1),Ze={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-h4 text-weight-bold"},Le=t("div",{class:"d-flex mx-sm-4"},[t("h6",{class:"text-sm font-weight-semibold me-1"}," Note: "),t("span",null,"Merci pour votre r\xE8glement rapide. Nous appr\xE9cions votre collaboration ")],-1),Ke={class:"d-flex align-center justify-space-between mt-5"},$e={class:"d-flex align-center justify-space-between"},qe={class:"d-flex align-center justify-space-between"},ze={class:"d-flex align-center justify-space-between"},Ge={key:0},Ps={__name:"[id]",setup(Me){const K=H(),U=z(),a=x({id:1,balance:0,total_amount:0,sale_date:null,client_id:1,sale_status:{id:-1,name:""},amount_letter:"",notes:"",client:{id:-1,name:"",surname:"",address:"",email:"",phone:"",NRC:"",NIF:"",NART:"",NIS:""},sale_items:[]}),l=x({sku:!1,invoice:!1,price:!0,paymentType:"Espece",sold:!1}),p=x(0),P=x();let y=x([]);const k=x(1),_=x({name:"",address:"",phone:"",email:"",NRC:"",NIF:"",NART:"",NIS:"",capitale:""});let N=x([]);const O=x(!1);x();const S=x(!1),F=x(!1),B=x({isActive:!1});K.fetchReturn(Number(U.params.id)).then(u=>{a.value=u.data.product_return,p.value=u.data.sold,P.value={...a.value.client},N=u.data.companies,y=u.data.clients,_.value=N[0],O.value=!0}).catch(u=>{console.log(u)});const $=()=>{window.print()};E(k,(u,r,d)=>{_.value=N[u-1],console.log(_)});const q=u=>u.name+" "+u.surname,j=x("Facture Proforma"),D=x();return E(D,(u,r,d)=>{u||(a.value.client=P);for(let v=0;v<y.length;v++)y[v].id===u&&(a.value.client={...y[v]})}),(u,r)=>e(O)?(n(),m("section",tt,[s(W,{"model-value":e(B).isActive,class:"align-center justify-center"},{default:i(()=>[s(J,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),s(R,null,{default:i(()=>[s(f,{class:"printed",cols:"12",md:"9"},{default:i(()=>[s(A,null,{default:i(()=>[s(g,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row pb-0"},{default:i(()=>[s(R,null,{default:i(()=>[s(f,{cols:"8"},{default:i(()=>[t("div",et,[t("div",st,[t("h6",ot,o(e(_).name),1)]),t("h4",lt,o(e(_).address),1),it,t("h4",dt,o(e(_).email),1),t("h4",at,o(e(_).phone),1)])]),_:1}),e(l).invoice?c("",!0):(n(),w(f,{key:0,cols:"4"},{default:i(()=>[t("div",nt,[t("h6",rt," Bon Retour #"+o(e(a).id),1),t("h4",ct,[mt,t("span",ut,o(e(a).date),1)])])]),_:1})),e(l).invoice?(n(),w(f,{key:1,cols:"4",class:"mt-5"},{default:i(()=>[t("div",xt,[_t,t("div",ht,o(e(_).NRC),1)]),t("div",pt,[ft,t("div",bt,o(e(_).NIF),1)]),t("div",vt,[wt,t("div",gt,o(e(_).NIS),1)]),t("div",yt,[Vt,t("div",kt,o(e(_).NART),1)])]),_:1})):c("",!0)]),_:1})]),_:1}),e(l).invoice?(n(),w(T,{key:0})):c("",!0),e(l).invoice?(n(),w(R,{key:1,class:"ma-3 text-center"},{default:i(()=>[s(f,{cols:"4"},{default:i(()=>[t("h6",Nt,o(e(j))+" #"+o(e(a).id),1)]),_:1}),s(f,{cols:"4"},{default:i(()=>[e(l).price?(n(),m("h4",Ft,[jt,t("span",Dt,o(e(l).paymentType),1)])):c("",!0)]),_:1}),s(f,{cols:"4"},{default:i(()=>[t("h4",Tt,[Ct,t("span",St,o(e(a).sale_date),1)])]),_:1})]),_:1})):c("",!0),s(g,{class:"invoiceGeneral d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row"},{default:i(()=>[t("div",It,[Rt,t("div",At,[Ut,t("div",Pt,o(e(a).client.name)+" "+o(e(a).client.surname),1)]),t("div",Ot,[Bt,t("div",Et,o(e(a).client.address),1)]),t("div",Zt,[Lt,t("div",Kt,o(e(a).client.phone),1)]),t("div",$t,[qt,t("div",zt,o(e(a).client.email),1)])]),Gt,e(l).invoice?(n(),m("div",Mt,[Qt,t("div",Yt,[Ht,t("div",Jt,o(e(a).client.NRC),1)]),t("div",Wt,[Xt,t("div",te,o(e(a).client.NIF),1)]),t("div",ee,[se,t("div",oe,o(e(a).client.NIS),1)]),t("div",le,[ie,t("div",de,o(e(a).client.NART),1)])])):c("",!0),e(l).invoice?c("",!0):(n(),m("div",ae,[ne,t("div",re,[ce,t("div",me," #"+o(e(a).id),1)]),t("div",ue,[xe,t("div",_e,o(e(a).date),1)])]))]),_:1}),s(T),s(X,null,{default:i(()=>[t("thead",null,[t("tr",null,[he,e(l).sku?(n(),m("th",pe," SKU ")):c("",!0),fe,e(l).price?(n(),m("th",be," Price ")):c("",!0),ve,e(l).price?(n(),m("th",we," TOTAL ")):c("",!0)])]),t("tbody",null,[(n(!0),m(G,null,M(e(a).sale_items,(d,v)=>(n(),m("tr",{key:d.name},[t("td",ge,o(v+1),1),e(l).sku?(n(),m("td",ye,o(d.product.SKU),1)):c("",!0),t("td",Ve,[t("h4",ke,o(d.product.name),1)]),e(l).price?(n(),m("td",Ne,o(d.price)+" DZD ",1)):c("",!0),t("td",Fe,o(d.quantity),1),e(l).price?(n(),m("td",je,o(d.total_price)+" DZD ",1)):c("",!0)]))),128))])]),_:1}),e(l).price?(n(),w(T,{key:2,class:"my-2"})):c("",!0),e(l).price?(n(),w(g,{key:3,class:"d-flex justify-space-between flex-column flex-sm-row print-row pt-0"},{default:i(()=>[t("div",De,[t("h5",null,"La Facture est arret\xE9e \xE0 la somme de : "+o(e(a).amount_letter),1),e(l).sold?(n(),m("div",Te,[Ce,t("div",Se,o(parseFloat(e(p)).toFixed(2))+" DZD ",1)])):c("",!0),e(l).sold?(n(),m("div",Ie,[e(l).price?(n(),m("div",Re," Nouveau ")):c("",!0),e(l).price?c("",!0):(n(),m("div",Ae," Nouveau ")),e(l).price?(n(),m("div",Ue,o(parseFloat(e(p))>0?(parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2))+" DZD ",1)):c("",!0),e(l).price?c("",!0):(n(),m("div",Pe,o(parseFloat(e(p))>0?(parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(p))).toFixed(2))+" DZD ",1))])):c("",!0)]),t("div",Oe,[t("div",Be,[Ee,t("div",Ze,o(e(a).total_amount)+" DZD ",1)])])]),_:1})):c("",!0),s(T),s(g,null,{default:i(()=>[Le]),_:1})]),_:1})]),_:1}),s(f,{cols:"12",md:"3",class:"d-print-none"},{default:i(()=>[s(A,null,{default:i(()=>[s(g,null,{default:i(()=>[s(I,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:r[0]||(r[0]=d=>F.value=!0)},{default:i(()=>[h(" Send Invoice ")]),_:1}),s(I,{block:"",variant:"tonal",color:"secondary",class:"mb-2",onClick:$},{default:i(()=>[h(" Print ")]),_:1}),s(I,{block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-return-edit-id",params:{id:e(U).params.id}}},{default:i(()=>[h(" Edit Invoice ")]),_:1},8,["to"])]),_:1})]),_:1}),s(A,{class:"mt-7"},{default:i(()=>[s(g,null,{default:i(()=>[t("div",Ke,[s(b,{for:"sold"},{default:i(()=>[h(" Sold ")]),_:1}),t("div",null,[s(C,{id:"sku",modelValue:e(l).sold,"onUpdate:modelValue":r[1]||(r[1]=d=>e(l).sold=d)},null,8,["modelValue"])])]),t("div",$e,[s(b,{for:"price"},{default:i(()=>[h(" SKU ")]),_:1}),t("div",null,[s(C,{id:"sku",modelValue:e(l).sku,"onUpdate:modelValue":r[2]||(r[2]=d=>e(l).sku=d)},null,8,["modelValue"])])]),t("div",qe,[s(b,{for:"price"},{default:i(()=>[h(" Facture ")]),_:1}),t("div",null,[s(C,{id:"sku",modelValue:e(l).invoice,"onUpdate:modelValue":r[3]||(r[3]=d=>e(l).invoice=d)},null,8,["modelValue"])])]),t("div",ze,[s(b,{for:"price"},{default:i(()=>[h(" Price ")]),_:1}),t("div",null,[s(C,{id:"price",modelValue:e(l).price,"onUpdate:modelValue":r[4]||(r[4]=d=>e(l).price=d)},null,8,["modelValue"])])]),t("div",null,[s(b,{class:"mb-4 mt-1"},{default:i(()=>[h(" Company ")]),_:1}),s(Z,{modelValue:e(k),"onUpdate:modelValue":r[5]||(r[5]=d=>V(k)?k.value=d:null),items:e(N),"item-value":"id",class:"text-sm-subtitle-2","item-title":"name",label:"Company"},null,8,["modelValue","items"])]),t("div",null,[t("div",null,[s(b,{for:"payment-terms",class:"mb-1 mt-1"},{default:i(()=>[h(" Payment ")]),_:1}),s(L,{modelValue:e(l).paymentType,"onUpdate:modelValue":r[6]||(r[6]=d=>e(l).paymentType=d),placeholder:"Thanks for your business"},null,8,["modelValue"])])]),e(l).invoice?(n(),m("div",Ge,[s(b,{for:"payment-terms",class:"mb-1 mt-1"},{default:i(()=>[h(" Invoice Type ")]),_:1}),s(L,{modelValue:e(j),"onUpdate:modelValue":r[7]||(r[7]=d=>V(j)?j.value=d:null),placeholder:"Put the Invoice Type"},null,8,["modelValue"])])):c("",!0),t("div",null,[s(b,{class:"mb-4 mt-1"},{default:i(()=>[h(" Client ")]),_:1}),s(Z,{clearable:"",modelValue:e(D),"onUpdate:modelValue":r[8]||(r[8]=d=>V(D)?D.value=d:null),items:e(y),"item-value":"id","item-title":q,label:"Client"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),s(Q,{data:e(a),loading:e(B),isDrawerOpen:e(S),"onUpdate:isDrawerOpen":r[9]||(r[9]=d=>V(S)?S.value=d:null)},null,8,["data","loading","isDrawerOpen"]),s(Y,{isDrawerOpen:e(F),"onUpdate:isDrawerOpen":r[10]||(r[10]=d=>V(F)?F.value=d:null)},null,8,["isDrawerOpen"])])):c("",!0)}};export{Ps as default};
