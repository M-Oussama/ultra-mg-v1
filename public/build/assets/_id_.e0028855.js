import{k as r,Z,bd as H,r as oe,o as b,b as E,w as a,m as n,p as e,C as $,q as i,P as ne,D as g,be as se,E as y,ay as re,$ as T,A as ie,c as I,F as de,a as ue,x as A,y as ce,H as pe,I as me}from"./main.7fa0f71e.js";import{_ as fe}from"./DialogCloseBtn.65c2afd7.js";import{s as Q}from"./successMiddleware.5781748a.js";import{e as P}from"./errorsMiddleware.63c0e2b3.js";import{u as G}from"./useVacationStore.f6ddca29.js";import{V as J}from"./VSpacer.3ec81c6b.js";import{V as v,a as Y}from"./VBtn.069192ce.js";import{V as B,c as S}from"./VCard.030e8f02.js";import{V as ve}from"./VForm.4e1ce8b2.js";import{V as K,a as O}from"./VRow.9a415d63.js";import{V as W}from"./VInput.5ff15ec5.js";import{V as X}from"./VTextField.274a75e5.js";import{V as _e}from"./VNavigationDrawer.bfe02dd1.js";import{_ as Ve}from"./AddNewVacation.ec4e4bb7.js";import{a as ge}from"./VOverlay.4a38a54b.js";import{V as M}from"./VDivider.c84ac45e.js";import{V as ye}from"./VSelect.a4bf81df.js";import{V as De}from"./VTable.049a34c9.js";import{V as xe}from"./VMenu.cdb8ae34.js";import{V as we}from"./VList.fc38797b.js";import{V as he}from"./VPagination.d7236996.js";import{V as be}from"./VDialog.8b46c977.js";import"./VAvatar.e9ee2511.js";import"./router.03090725.js";import"./VImg.2d1f7e61.js";import"./position.67e80c4d.js";import"./forwardRefs.c003b6b8.js";import"./index.6cded1e6.js";/* empty css                   */import"./VField.48a02540.js";import"./easing.36b781ab.js";import"./VCounter.ac27f1c3.js";import"./ssrBoot.7e6afdfd.js";import"./lazy.620d5a9e.js";import"./dialog-transition.2bfa19b0.js";import"./VCheckboxBtn.95fc78a7.js";import"./VSelectionControl.0a0ba36b.js";import"./VChip.43475c6f.js";import"./scopeId.dda89175.js";const Ce={class:"d-flex align-center pa-6 pb-1"},ke=n("h6",{class:"text-h6"}," Add New Record ",-1),$e={__name:"EditVacation",props:{isDrawerOpen:{type:null,required:!0},loading:{type:null,required:!0},vacation:{type:Object,required:!0}},setup(R){const _=R,C=G(),t=r({start_date:"",end_date:"",end_date_restrict:new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+(new Date().getDate()+1),count:0});Z(()=>_.vacation,o=>{o&&(t.value={...o})}),H();const k=r(!1),c=r();r(),r({id:-1});const U=()=>{_.isDrawerOpen.open=!1,re(()=>{var o,d;(o=c.value)==null||o.reset(),(d=c.value)==null||d.resetValidation()})},N=()=>{t.value.start_date===""||t.value.start_date===null||t.value.end_date===""||t.value.end_date===null||t.value.count<=0?((t.value.start_date===""||t.value.start_date===null)&&P("Warning","start date must be selected"),t.value.count<=0&&P("Warning","count days starts from 1 ")):(_.loading.isActive=!0,C.updateVacation(D(t.value.start_date),D(t.value.end_date),t.value.id,t.value.count).then(o=>{_.isDrawerOpen.open=!1,_.loading.isActive=!1,Q(o.data.msg),location.reload()}).catch(o=>{_.loading.isActive=!1,P("Error Occured",o.response.data.message)}))},h=o=>{_.isDrawerOpen.value.open=o};function m(o){return parseInt(o)<10?"0"+o:o}const V=o=>{const d=o.getDate(),p=o.getMonth()+1;return`${o.getFullYear()}-${m(p)}-${m(d)}`},z=()=>{t.value.start_date===null&&(t.value.end_date=null),(t.value.start_date===""||t.value.start_date>=t.value.end_date&&t.value.end_date!=="")&&(t.value.end_date=""),w(),t.value.end_date_restrict=new Date(new Date(t.value.start_date).getTime()+24*60*60*2e3).toISOString().split("T")[0]},D=o=>{if(o!=null&&o!==""){console.log(o);let d=new Date(o),p=d.getFullYear(),f=String(d.getMonth()+1).padStart(2,"0"),F=String(d.getDate()).padStart(2,"0");return`${p}-${f}-${F}`}return o},x=()=>{w()},w=()=>{if(t.value.start_date){let o=new Date(t.value.start_date);t.value.end_date=new Date(o.getTime()+t.value.count*24*60*60*1e3)}console.log(t.value.end_date)};return(o,d)=>{const p=oe("VueDatePicker");return b(),E(_e,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":_.isDrawerOpen.open,"onUpdate:modelValue":h},{default:a(()=>[n("div",Ce,[ke,e(J),e(v,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:U},{default:a(()=>[e($,{size:"18",icon:"tabler-x"})]),_:1})]),e(i(ne),{options:{wheelPropagation:!1}},{default:a(()=>[e(B,{flat:""},{default:a(()=>[e(S,null,{default:a(()=>[e(ve,{ref_key:"refForm",ref:c,modelValue:i(k),"onUpdate:modelValue":d[3]||(d[3]=f=>g(k)?k.value=f:null),onSubmit:se(N,["prevent"])},{default:a(()=>[e(K,null,{default:a(()=>[e(O,{cols:"12"},{default:a(()=>[e(W,null,{default:a(()=>[y(" Vacation Start Date ")]),_:1}),e(p,{modelValue:i(t).start_date,"onUpdate:modelValue":[d[0]||(d[0]=f=>i(t).start_date=f),z],"auto-apply":"",format:V},null,8,["modelValue"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(X,{modelValue:i(t).count,"onUpdate:modelValue":[d[1]||(d[1]=f=>i(t).count=f),x],type:"number",label:"Vacation Days"},null,8,["modelValue"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(W,null,{default:a(()=>[y(" Vacation End Date ")]),_:1}),e(p,{modelValue:i(t).end_date,"onUpdate:modelValue":d[2]||(d[2]=f=>i(t).end_date=f),"auto-apply":"",disabled:"true",format:V,"min-date":i(t).end_date_restrict},null,8,["modelValue","min-date"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(v,{type:"submit",class:"me-3"},{default:a(()=>[y(" Submit ")]),_:1}),e(v,{type:"reset",variant:"tonal",color:"secondary",onClick:U},{default:a(()=>[y(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Ae={class:"me-3",style:{width:"80px"}},Se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Oe={style:{width:"9rem"}},Ue=n("thead",null,[n("tr",null,[n("th",{scope:"col"}," ID "),n("th",{scope:"col"}," Start Date "),n("th",{scope:"col"}," End Date "),n("th",{scope:"col"}," Period "),n("th",{scope:"col"}," ACTIONS ")])],-1),ze={class:"d-flex align-center"},Ee={class:"d-flex flex-column"},Pe={class:"text-base"},Ne={class:"d-flex align-center"},Fe={class:"d-flex flex-column"},Te={class:"text-base"},Ie={class:"d-flex align-center"},Me={class:"d-flex flex-column"},Be={class:"text-base"},Re={class:"text-center",style:{width:"5rem"}},Le=n("tr",null,[n("td",{colspan:"7",class:"text-center"}," No data available ")],-1),qe=[Le],Ye={class:"text-sm text-disabled"},Ot={__name:"[id]",setup(R){const _=G(),C=r(""),t=r("Employees"),k=r(!1),c=r({isActive:!0}),U=H(),N=r(!0);r(),r("mahgounoussama23@gmail.com"),r(),r();const h=r(10),m=r(1),V=r(1),z=r(0);let D=r([]),x=r({open:!1}),w=r({open:!1}),o=r({open:!1});r(!1),r(!0);const d=()=>{c.value.isActive=!0,_.fetchListRecord(Number(U.params.id)).then(u=>{D.value=u.data.list.data,V.value=u.data.totalPage,z.value=u.data.totalVacation,k.value=!1,c.value.isActive=!1,console.log(u)}).catch(u=>{console.log(u),c.value.isActive=!1})};T(d),T(()=>{m.value>V.value&&(m.value=V.value)}),Z(C,()=>{d()}),r(!1);let p=r(null);T(()=>{m.value>V.value&&(m.value=V.value)});const f=ie(()=>{const u=D.value.length?(m.value-1)*h.value+1:0,s=D.value.length+(m.value-1)*h.value;return`Showing ${u} to ${s} of ${z.value} entries`}),F=u=>{p.value=u,x.value.open=!0},j=u=>{p.value=u,w.value.open=!0},ee=()=>{o.value.open=!0},te=u=>{p.value=u,x.value.open=!0},ae=()=>{c.value.isActive=!0,w.value.open=!1,_.deleteVacation(p.value.id).then(u=>{c.value.isActive=!1,console.log(u),Q(u.data.message),d()}).catch(u=>{P(u.data.message),c.value.isActive=!1})},L=()=>{w.value.open=!1};return(u,s)=>{const le=fe;return b(),I("section",null,[e(K,null,{default:a(()=>[e(ge,{"model-value":i(c).isActive,class:"align-center justify-center"},{default:a(()=>[e(Y,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(O,{cols:"12"},{default:a(()=>[e(B,{title:i(t)},{default:a(()=>[e(M),e(S,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[n("div",Ae,[e(ye,{modelValue:i(h),"onUpdate:modelValue":s[0]||(s[0]=l=>g(h)?h.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(J),n("div",Se,[n("div",Oe,[i(k)?(b(),E(Y,{key:0,indeterminate:"",color:"primary"})):(b(),E(X,{key:1,onInput:s[1]||(s[1]=l=>N.value=!0),ref:"searchField",modelValue:i(C),"onUpdate:modelValue":s[2]||(s[2]=l=>g(C)?C.value=l:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(v,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:a(()=>[y(" Export ")]),_:1}),e(v,{color:"primary","prepend-icon":"tabler-plus",onClick:s[3]||(s[3]=l=>ee())},{default:a(()=>[y(" New Vacation ")]),_:1})])]),_:1}),e(M),e(De,{class:"text-no-wrap"},{default:a(()=>[Ue,n("tbody",null,[(b(!0),I(de,null,ue(i(D),l=>(b(),I("tr",{key:l.id,style:{height:"3.75rem"}},[n("td",null,A(l.id),1),n("td",null,[n("div",ze,[n("div",Ee,[n("h6",Pe,A(l.start_date),1)])])]),n("td",null,[n("div",Ne,[n("div",Fe,[n("h6",Te,A(l.end_date),1)])])]),n("td",null,[n("div",Ie,[n("div",Me,[n("h6",Be,A(l.count)+" days ",1)])])]),n("td",Re,[e(v,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-employee-vacation-preview-id",params:{id:l.id}}},{default:a(()=>[e($,{size:"22",icon:"tabler-screen-share"})]),_:2},1032,["to"]),l.last?(b(),E(v,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:q=>F(l)},{default:a(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):ce("",!0),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:q=>te(l)},{default:a(()=>[e($,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e($,{size:"22",icon:"tabler-trash",onClick:q=>j(l)},null,8,["onClick"])]),_:2},1024),e(v,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e($,{size:22,icon:"tabler-dots-vertical"}),e(xe,{activator:"parent"},{default:a(()=>[e(we,{density:"compact"})]),_:1})]),_:1})])]))),128))]),pe(n("tfoot",null,qe,512),[[me,!i(D).length]])]),_:1}),e(M),e(S,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[n("span",Ye,A(i(f)),1),e(he,{modelValue:i(m),"onUpdate:modelValue":s[4]||(s[4]=l=>g(m)?m.value=l:null),size:"small","total-visible":5,length:i(V)},null,8,["modelValue","length"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),e($e,{isDrawerOpen:i(x),"onUpdate:isDrawerOpen":s[5]||(s[5]=l=>g(x)?x.value=l:x=l),vacation:i(p),"onUpdate:vacation":s[6]||(s[6]=l=>g(p)?p.value=l:p=l),loading:i(c),"onUpdate:loading":s[7]||(s[7]=l=>g(c)?c.value=l:null)},null,8,["isDrawerOpen","vacation","loading"]),e(Ve,{isDrawerOpen:i(o),"onUpdate:isDrawerOpen":s[8]||(s[8]=l=>g(o)?o.value=l:o=l),loading:i(c),"onUpdate:loading":s[9]||(s[9]=l=>g(c)?c.value=l:null)},null,8,["isDrawerOpen","loading"]),e(be,{modelValue:i(w).open,"onUpdate:modelValue":s[12]||(s[12]=l=>i(w).open=l),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(le,{onClick:s[10]||(s[10]=l=>L())}),e(B,{title:"Confirmation"},{default:a(()=>[e(S,null,{default:a(()=>[y(" Are you sure you want to delete this record ? ")]),_:1}),e(S,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(v,{color:"secondary",variant:"tonal",onClick:s[11]||(s[11]=l=>L())},{default:a(()=>[y(" Disagree ")]),_:1}),e(v,{onClick:ae},{default:a(()=>[y(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Ot as default};
