import{k as i,Z as ee,o as r,b as w,w as l,p as e,E as b,$ as j,A as te,r as ae,q as s,m as a,D as u,C as v,c as S,a as le,x as V,O as oe,F as se,H as ie,I as ne,y as L}from"./main.2c4303d0.js";import{_ as re}from"./AppDateTimePicker.4e132920.js";import{a as de}from"./formatters.4acf44a4.js";import{u as ce}from"./usereturnStore.af46352b.js";import{_ as ue}from"./InvoiceAddPaymentDrawer.eef299f9.js";import{_ as me}from"./DialogCloseBtn.0b4e7386.js";import{V as Q,c as R}from"./VCard.e288f4fe.js";import{V as x,a as pe}from"./VBtn.df68b498.js";import{V as fe}from"./VDialog.d797a76b.js";import{a as ve}from"./VOverlay.34847f66.js";import{V as q}from"./VSelect.cc9bae98.js";import{V as Ve}from"./VAutocomplete.0d0fd4fd.js";import{V as F}from"./VDivider.ed65e8b8.js";import{V as _e}from"./VTable.2b2ab8eb.js";import{V as ge}from"./VTooltip.2281696c.js";import{V as H}from"./VAvatar.02a84ac4.js";import{V as xe}from"./VImg.c4d008e7.js";import{V as be}from"./VMenu.4f4f7b46.js";import{V as he,a as Z,b as M}from"./VList.a40c8ca6.js";import{V as De}from"./VSpacer.60a3d2b9.js";import{V as ye}from"./VPagination.6bd87f26.js";import{a as we,V as Ce}from"./VRow.6364c436.js";import"./VField.f22585ee.js";import"./index.c40dd661.js";import"./VInput.ad1ab67c.js";import"./router.bde67682.js";import"./position.ef7f4972.js";import"./easing.36b781ab.js";import"./index.b522f886.js";import"./useSaleStore.67e45db5.js";import"./errorsMiddleware.80a04738.js";import"./successMiddleware.51012923.js";import"./VForm.6d323ceb.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.f25191b8.js";/* empty css                   */import"./VCounter.6f3fca7e.js";import"./VTextarea.9cae60d6.js";import"./VNavigationDrawer.1c8aa7fa.js";import"./ssrBoot.9a55596c.js";import"./scopeId.8139f85a.js";import"./dialog-transition.9f6a7431.js";import"./lazy.b22ea8e1.js";import"./VCheckboxBtn.56fc1aec.js";import"./VSelectionControl.b778673c.js";import"./VChip.72f7cdaa.js";import"./filter.1fe2879b.js";const ke={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},product:{type:Object,required:!0}},emits:["update:isDrawerOpen","preturnData"],setup(N,{emit:_}){const g=N,h=i(),m=()=>{_("update:isDialogVisible",!1)};ee(()=>g.product,p=>{p&&(h.value=p.id||0)});const d=()=>{console.log(g.product),_("preturnData",{id:g.product.id}),_("update:isDialogVisible",!1)};return(p,c)=>{const f=me;return r(),w(fe,{modelValue:g.isDialogVisible,"onUpdate:modelValue":c[2]||(c[2]=D=>g.isDialogVisible=D),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(f,{onClick:c[0]||(c[0]=D=>m())}),e(Q,{title:"Confirmation"},{default:l(()=>[e(R,null,{default:l(()=>[b(" Are you sure you want to delete this record ? ")]),_:1}),e(R,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(x,{color:"secondary",variant:"tonal",onClick:c[1]||(c[1]=D=>_("update:isDialogVisible",!1))},{default:l(()=>[b(" Disagree ")]),_:1}),e(x,{onClick:d},{default:l(()=>[b(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Se={class:"d-flex align-center",style:{width:"135px"}},Pe=a("span",{class:"text-no-wrap me-3"},"Show:",-1),Ae={class:"d-flex align-center",style:{width:"30%"}},Oe={class:"d-flex align-center flex-wrap gap-4"},ze={class:"invoice-list-filter"},Ie={class:"invoice-list-filter"},Re={class:"invoice-list-filter"},Te={class:"me-3"},$e={class:"text-uppercase"},Le=a("th",{scope:"col"}," #ID ",-1),Ne={scope:"col",class:"text-center"},Ue=a("th",{scope:"col"}," CLIENT ",-1),Be=a("th",{scope:"col",class:"text-center"}," TOTAL ",-1),Ee=a("th",{scope:"col"}," Issued Date ",-1),je=a("th",{scope:"col"}," ACTIONS ",-1),qe={class:"text-center"},Fe={class:"mb-0"},He={key:0,class:"mb-0"},Ze={key:1,class:"mb-0"},Me={class:"d-flex align-center"},Qe={key:1},Ge={class:"d-flex flex-column"},Je={class:"text-base font-weight-medium mb-0"},Ke={class:"text-disabled text-sm"},We={class:"text-center"},Xe={style:{width:"8rem"}},Ye=a("tr",null,[a("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),et=[Ye],tt={class:"text-sm text-disabled"},Jt={__name:"index",setup(N){const _=ce(),g=i(""),h=i(),m=i(10),d=i(1),p=i(1),c=i(0),f=i([]),D=i([]),P=i(!1),U=i([]),A=i(""),O=i(""),C=i(!1);let y=i();const z=i(""),G=i([{id:1,name:"PAID"},{id:0,name:"ON HOLD"}]),T=()=>{_.fetchReturns({searchValue:g.value,status:h.value,perPage:m.value,currentPage:d.value,client_id:z.value,from:A.value,to:O.value}).then(n=>{k.value.isActive=!1,f.value=n.data.returns,U.value=n.data.clients,p.value=n.data.totalPage,c.value=n.data.totalReturns}).catch(n=>{k.value.isActive=!1,console.log(n)})};j(()=>{T()}),j(()=>{d.value>p.value&&(d.value=p.value)});const J=te(()=>{const n=f.value.length?(d.value-1)*m.value+1:0,o=f.value.length+(d.value-1)*m.value;return`Showing ${n} to ${o} of ${c.value} entries`}),$=n=>n!==void 0&&n.paid?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-x"},K=i(),k=i({isActive:!0}),W=n=>{C.value=!0,y=n,console.log(y)},X=n=>{_.deleteReturn(n).then(o=>{T()}).catch(o=>{console.log(o)})},I=()=>{k.value.isActive=!0,T()};return(n,o)=>{const B=re,Y=ae("RouterLink");return r(),w(Ce,null,{default:l(()=>[e(ve,{"model-value":s(k).isActive,class:"align-center justify-center"},{default:l(()=>[e(pe,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(we,null,{default:l(()=>[s(f)?(r(),w(Q,{key:0,id:"invoice-list"},{default:l(()=>[e(R,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[a("div",Se,[Pe,e(q,{modelValue:s(m),"onUpdate:modelValue":o[0]||(o[0]=t=>u(m)?m.value=t:null),density:"compact",items:[10,20,30,50,100,500,1e3,5e3]},null,8,["modelValue"])]),a("div",Ae,[e(Ve,{clearable:"",modelValue:s(z),"onUpdate:modelValue":[o[1]||(o[1]=t=>u(z)?z.value=t:null),I],items:s(U),"item-value":"id","item-title":"name",label:"Client",placeholder:"Client"},null,8,["modelValue","items"])]),a("div",Oe,[a("div",ze,[e(B,{modelValue:s(A),"onUpdate:modelValue":[o[2]||(o[2]=t=>u(A)?A.value=t:null),I],label:"From Date"},null,8,["modelValue"])]),a("div",Ie,[e(B,{modelValue:s(O),"onUpdate:modelValue":[o[3]||(o[3]=t=>u(O)?O.value=t:null),I],label:"To Date"},null,8,["modelValue"])]),a("div",Re,[e(q,{modelValue:s(h),"onUpdate:modelValue":[o[4]||(o[4]=t=>u(h)?h.value=t:null),I],label:"Select Status",clearable:"","item-value":"id","item-title":"name","clear-icon":"tabler-x","single-line":"",items:s(G)},null,8,["modelValue","items"])]),a("div",Te,[e(x,{"prepend-icon":"tabler-plus",to:{name:"apps-POS-return-add"}},{default:l(()=>[b(" Create ")]),_:1})])])]),_:1}),e(F),e(_e,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[a("thead",$e,[a("tr",null,[Le,a("th",Ne,[e(v,{icon:"tabler-trending-up"})]),Ue,Be,Ee,je])]),a("tbody",null,[(r(!0),S(se,null,le(s(f),t=>(r(),S("tr",{key:t.id,style:{height:"3.75rem"}},[a("td",null,[e(Y,{to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:l(()=>[b(" #"+V(t.id),1)]),_:2},1032,["to"])]),a("td",qe,[e(ge,null,{activator:l(({props:E})=>[e(H,oe({size:30},E,{color:$(t).variant,variant:"tonal"}),{default:l(()=>[e(v,{size:20,icon:$(t).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[a("p",Fe,V(t.invoiceStatus),1),t.paid?(r(),S("p",He," Delivered ")):(r(),S("p",Ze," ON HOLD "))]),_:2},1024)]),a("td",null,[a("div",Me,[e(H,{size:"34",color:$(t).variant,variant:"tonal",class:"me-3"},{default:l(()=>[t.avatar?(r(),w(xe,{key:0,src:t.avatar},null,8,["src"])):(r(),S("span",Qe,V(s(de)(t.client.name)),1))]),_:2},1032,["color"]),a("div",Ge,[a("h6",Je,V(t.client.name),1),a("span",Ke,V(t.client.email),1)])])]),a("td",We,V(t.total_amount)+" DZD ",1),a("td",null,V(t.date),1),a("td",Xe,[e(x,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(v,{icon:"tabler-mail",size:22})]),_:1}),e(x,{icon:"",variant:"text",color:"default",size:"x-small",onClick:E=>W(t)},{default:l(()=>[e(v,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(x,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:l(()=>[e(v,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(x,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(v,{size:22,icon:"tabler-dots-vertical"}),e(be,{activator:"parent"},{default:l(()=>[e(he,null,{default:l(()=>[e(Z,{value:"download"},{prepend:l(()=>[e(v,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[e(M,null,{default:l(()=>[b("Download")]),_:1})]),_:1}),e(Z,{to:{name:"apps-POS-return-edit-id",params:{id:t.id}}},{prepend:l(()=>[e(v,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[e(M,null,{default:l(()=>[b("Edit")]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),ie(a("tfoot",null,et,512),[[ne,!s(f).length]])]),_:1}),e(F),e(R,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[a("span",tt,V(s(J)),1),e(De),e(ye,{modelValue:s(d),"onUpdate:modelValue":o[5]||(o[5]=t=>u(d)?d.value=t:null),size:"small","total-visible":5,length:s(p),onNext:o[6]||(o[6]=t=>D.value=[]),onPrev:o[7]||(o[7]=t=>D.value=[])},null,8,["modelValue","length"])]),_:1}),s(C)?(r(),w(ke,{key:0,isDialogVisible:s(C),"onUpdate:isDialogVisible":o[8]||(o[8]=t=>u(C)?C.value=t:null),product:s(y),"onUpdate:product":o[9]||(o[9]=t=>u(y)?y.value=t:y=t),onPreturnData:X},null,8,["isDialogVisible","product"])):L("",!0)]),_:1})):L("",!0)]),_:1}),s(P)?(r(),w(ue,{key:0,loading:s(k),data:s(K),isDrawerOpen:s(P),"onUpdate:isDrawerOpen":o[10]||(o[10]=t=>u(P)?P.value=t:null)},null,8,["loading","data","isDrawerOpen"])):L("",!0)]),_:1})}}};export{Jt as default};
