import{k as o,o as D,b as A,w as t,m,p as l,C as T,q as e,P as Y,D as p,be as ee,E as O,ay as j,Z,y as z,$ as M,A as me,r as ce,c as q,F as fe,a as ve,x as I,H as Ve,I as ye,bf as W}from"./main.c6a9724c.js";import{r as E,e as le}from"./validators.330a354f.js";import{V as G}from"./VSpacer.e083bbdb.js";import{V as S,a as X}from"./VBtn.e7c07512.js";import{V as L,c as B}from"./VCard.f64c0a01.js";import{V as ae}from"./VForm.821cf149.js";import{V as K,a as k}from"./VRow.ecaee667.js";import{V as P}from"./VTextField.0d61a0d0.js";import{V as te}from"./VAutocomplete.02abd51f.js";import{V as oe}from"./VNavigationDrawer.ef81bf50.js";import{V as be}from"./VSwitch.de57b8fe.js";import{_ as we}from"./DialogCloseBtn.19a72d91.js";import{V as _e}from"./VDialog.6f70ea41.js";import{u as ge}from"./useUserListStore.d37ee5b5.js";import{P as N}from"./permissions.bafe5f34.js";import{s as J}from"./successMiddleware.c29016f5.js";import{e as H}from"./errorsMiddleware.a5bff1e6.js";import{a as De}from"./VOverlay.01171e20.js";import{V as Q}from"./VDivider.8e59889f.js";import{V as Ue}from"./VSelect.f71ec185.js";import{V as xe}from"./VTable.ee980c27.js";import{V as ke}from"./VAvatar.6f1bab4f.js";import{V as Ce}from"./VImg.ed211343.js";import{V as Se}from"./VPagination.b3436b20.js";import"./index.b522f886.js";import"./router.8721ce32.js";import"./position.262cc80a.js";import"./VInput.ab935992.js";import"./index.cb3fbeaa.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.d7dc540f.js";import"./easing.36b781ab.js";import"./VCounter.92e789e6.js";import"./filter.db9c5770.js";import"./VList.d03d65eb.js";import"./VMenu.b523d10a.js";import"./scopeId.b6fae753.js";import"./dialog-transition.29115eac.js";import"./VCheckboxBtn.a2176904.js";import"./VSelectionControl.3b08e1e2.js";import"./VChip.7e863aa4.js";import"./ssrBoot.6ecdcdd2.js";import"./lazy.55ef32ef.js";const he={class:"d-flex align-center pa-6 pb-1"},Ae=m("h6",{class:"text-h6"}," Add User ",-1),Ee={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},roles:{type:Array,required:!0}},emits:["update:isDrawerOpen","userData"],setup(R,{emit:w}){const _=R,C=o(!1),g=o(),x=o(""),f=o("");o(""),o(""),o("");const u=o();let v=o(),V=o(!1),y=o(!1),c=o();o(),o();const b=()=>{w("update:isDrawerOpen",!1),j(()=>{var U,i;(U=g.value)==null||U.reset(),(i=g.value)==null||i.resetValidation()})},h=()=>{var U;(U=g.value)==null||U.validate().then(({valid:i})=>{i&&(w("userData",{name:x.value,email:f.value,password:v.value,role:u.value}),w("update:isDrawerOpen",!1),j(()=>{var a,n;(a=g.value)==null||a.reset(),(n=g.value)==null||n.resetValidation()}))})},$=U=>{w("update:isDrawerOpen",U)};return(U,i)=>(D(),A(oe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":_.isDrawerOpen,"onUpdate:modelValue":$},{default:t(()=>[m("div",he,[Ae,l(G),l(S,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:b},{default:t(()=>[l(T,{size:"18",icon:"tabler-x"})]),_:1})]),l(e(Y),{options:{wheelPropagation:!1}},{default:t(()=>[l(L,{flat:""},{default:t(()=>[l(B,null,{default:t(()=>[l(ae,{ref_key:"refForm",ref:g,modelValue:e(C),"onUpdate:modelValue":i[7]||(i[7]=a=>p(C)?C.value=a:null),onSubmit:ee(h,["prevent"])},{default:t(()=>[l(K,null,{default:t(()=>[l(k,{cols:"12"},{default:t(()=>[l(P,{modelValue:e(x),"onUpdate:modelValue":i[0]||(i[0]=a=>p(x)?x.value=a:null),rules:[e(E)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(P,{modelValue:e(f),"onUpdate:modelValue":i[1]||(i[1]=a=>p(f)?f.value=a:null),rules:[e(E),e(le)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(te,{clearable:"",modelValue:e(u),"onUpdate:modelValue":i[2]||(i[2]=a=>p(u)?u.value=a:null),items:_.roles,"item-value":"id","item-title":"role",label:"Role",placeholder:"Role",rules:[e(E)]},null,8,["modelValue","items","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(P,{"hide-details":"auto","append-inner-icon":e(V)?"mdi-eye-off":"mdi-eye",type:e(V)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":i[3]||(i[3]=a=>p(V)?V.value=!e(V):V=!e(V)),modelValue:e(v),"onUpdate:modelValue":i[4]||(i[4]=a=>p(v)?v.value=a:v=a),rules:[e(E)],label:"password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(P,{"hide-details":"auto","append-inner-icon":e(y)?"mdi-eye-off":"mdi-eye",type:e(y)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":i[5]||(i[5]=a=>p(y)?y.value=!e(y):y=!e(y)),modelValue:e(c),"onUpdate:modelValue":i[6]||(i[6]=a=>p(c)?c.value=a:c=a),rules:[e(E),a=>!!a||"Confirm password is required",a=>a===e(v)||"Passwords do not match"],label:"Confirm Password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(S,{type:"submit",class:"me-3"},{default:t(()=>[O(" Submit ")]),_:1}),l(S,{type:"reset",variant:"tonal",color:"secondary",onClick:b},{default:t(()=>[O(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Oe={class:"d-flex align-center pa-6 pb-1"},Pe=m("h6",{class:"text-h6"}," Edit User ",-1),Re={__name:"EditUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},user:{type:Object},roles:{type:Array,required:!0},role:{type:Object}},emits:["update:isDrawerOpen","userData"],setup(R,{emit:w}){const _=R;Z(()=>_.user,i=>{i&&(x.value=i.id||0,f.value=i.name||"",u.value=i.email||"",v.value=i.role_id||"")});const C=o(!1),g=o(),x=o(),f=o(""),u=o("");o(""),o(""),o(""),o();const v=o();let V=o(),y=o(!1),c=o(!1),b=o(!1),h=o();o(),o();const $=()=>{w("update:isDrawerOpen",!1),j(()=>{var i,a;(i=g.value)==null||i.reset(),(a=g.value)==null||a.resetValidation()})},U=()=>{var i;(i=g.value)==null||i.validate().then(({valid:a})=>{a&&(w("userData",{passwordchanged:b.value,id:x.value,name:f.value,email:u.value,password:V.value,role_id:v.value}),w("update:isDrawerOpen",!1),j(()=>{var n,F;(n=g.value)==null||n.reset(),(F=g.value)==null||F.resetValidation()}))})};return(i,a)=>(D(),A(oe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":_.isDrawerOpen},{default:t(()=>[m("div",Oe,[Pe,l(G),l(S,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:$},{default:t(()=>[l(T,{size:"18",icon:"tabler-x"})]),_:1})]),l(e(Y),{options:{wheelPropagation:!1}},{default:t(()=>[l(L,{flat:""},{default:t(()=>[l(B,null,{default:t(()=>[l(ae,{ref_key:"refForm",ref:g,modelValue:e(C),"onUpdate:modelValue":a[8]||(a[8]=n=>p(C)?C.value=n:null),onSubmit:ee(U,["prevent"])},{default:t(()=>[l(K,null,{default:t(()=>[l(k,{cols:"12"},{default:t(()=>[l(P,{modelValue:e(f),"onUpdate:modelValue":a[0]||(a[0]=n=>p(f)?f.value=n:null),rules:[e(E)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(P,{modelValue:e(u),"onUpdate:modelValue":a[1]||(a[1]=n=>p(u)?u.value=n:null),rules:[e(E),e(le)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(te,{clearable:"",modelValue:e(v),"onUpdate:modelValue":a[2]||(a[2]=n=>p(v)?v.value=n:null),items:_.roles,"item-value":"id","item-title":"role",label:"Role",placeholder:"Role",rules:[e(E)]},null,8,["modelValue","items","rules"])]),_:1}),l(k,{cols:"12"},{default:t(()=>[l(be,{modelValue:e(b),"onUpdate:modelValue":a[3]||(a[3]=n=>p(b)?b.value=n:b=n),inset:"",label:"Change Password "},null,8,["modelValue"])]),_:1}),e(b)?(D(),A(k,{key:0,cols:"12"},{default:t(()=>[l(P,{"hide-details":"auto","append-inner-icon":e(y)?"mdi-eye-off":"mdi-eye",type:e(y)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":a[4]||(a[4]=n=>p(y)?y.value=!e(y):y=!e(y)),modelValue:e(V),"onUpdate:modelValue":a[5]||(a[5]=n=>p(V)?V.value=n:V=n),rules:[e(E)],label:"password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1})):z("",!0),e(b)?(D(),A(k,{key:1,cols:"12"},{default:t(()=>[l(P,{"hide-details":"auto","append-inner-icon":e(c)?"mdi-eye-off":"mdi-eye",type:e(c)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":a[6]||(a[6]=n=>p(c)?c.value=!e(c):c=!e(c)),modelValue:e(h),"onUpdate:modelValue":a[7]||(a[7]=n=>p(h)?h.value=n:h=n),rules:[e(E),n=>!!n||"Confirm password is required",n=>n===e(V)||"Passwords do not match"],label:"Confirm Password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1})):z("",!0),l(k,{cols:"12"},{default:t(()=>[l(S,{type:"submit",class:"me-3"},{default:t(()=>[O(" Submit ")]),_:1}),l(S,{type:"reset",variant:"tonal",color:"secondary",onClick:$},{default:t(()=>[O(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},$e={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},user:{type:Object,required:!0}},emits:["update:isDrawerOpen","userData"],setup(R,{emit:w}){const _=R,C=o(),g=()=>{w("update:isDialogVisible",!1)};Z(()=>_.user,f=>{f&&(C.value=f.id||0)});const x=()=>{w("userData",{id:_.user.id}),w("update:isDialogVisible",!1)};return(f,u)=>{const v=we;return D(),A(_e,{modelValue:_.isDialogVisible,"onUpdate:modelValue":u[2]||(u[2]=V=>_.isDialogVisible=V),persistent:"",class:"v-dialog-sm"},{default:t(()=>[l(v,{onClick:u[0]||(u[0]=V=>g())}),l(L,{title:"Confirmation"},{default:t(()=>[l(B,null,{default:t(()=>[O(" Are you sure you want to delete this user ? ")]),_:1}),l(B,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[l(S,{color:"secondary",variant:"tonal",onClick:u[1]||(u[1]=V=>w("update:isDialogVisible",!1))},{default:t(()=>[O(" Disagree ")]),_:1}),l(S,{onClick:x},{default:t(()=>[O(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Ie={class:"me-3",style:{width:"80px"}},Ne={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{width:"10rem"}},Be=m("thead",null,[m("tr",null,[m("th",{scope:"col"}," ID "),m("th",{scope:"col"}," USER "),m("th",{scope:"col"}," email "),m("th",{scope:"col"}," ACTIONS ")])],-1),Te={class:"d-flex align-center"},Fe={key:1},qe={class:"d-flex flex-column"},je={class:"text-base"},Le={class:"text-sm text-disabled"},Me={class:"text-capitalize text-base font-weight-semibold"},Je={class:"text-center",style:{width:"5rem"}},He=m("tr",null,[m("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Qe=[He],Ze={class:"text-sm text-disabled"},Ge={__name:"index",setup(R){const w=ge(),_=o(""),C=o(!1),g=o(!0);o();const x=o();o(),o();const f=o(10),u=o(1),v=o(1),V=o(0);let y=o([]),c=o([]);const b=o({isActive:!1}),h=()=>{b.value.isActive=!0,w.fetchUsers({searchValue:_.value,perPage:f.value,currentPage:u.value}).then(d=>{y.value=d.data.users.data,v.value=d.data.totalPage,V.value=d.data.totalUsers,c.value=d.data.roles,C.value=!1,b.value.isActive=!1}).catch(d=>{b.value.isActive=!1})};M(h),M(()=>{u.value>v.value&&(u.value=v.value)}),Z(_,()=>{C.value=!0,h()});const $=d=>d==="subscriber"?{color:"warning",icon:"tabler-user"}:d==="author"?{color:"success",icon:"tabler-circle-check"}:d==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:d==="editor"?{color:"info",icon:"tabler-pencil"}:d==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},U=o(!1),i=o(!1),a=o(!1);let n=o();M(()=>{u.value>v.value&&(u.value=v.value)});const F=me(()=>{const d=y.value.length?(u.value-1)*f.value+1:0,s=y.value.length+(u.value-1)*f.value;return`Showing ${d} to ${s} of ${V.value} entries`}),se=d=>{b.value.isActive=!0,w.addUser(d).then(s=>{h(),J(s.data.message)}).catch(s=>{b.value.isActive=!1,H(s.response.data.message)})},re=d=>{b.value.isActive=!0,w.updateUser(d).then(s=>{h(),J(s.data.message)}).catch(s=>{b.value.isActive=!1,H(s.response.data.message)})},ie=d=>{b.value.isActive=!0,w.deleteUser(d).then(s=>{h(),J(s.data.message)}).catch(s=>{b.value.isActive=!1,H(s.response.data.message)})},ne=d=>{i.value=!0,n=d,x.value=d.role_id},ue=d=>{a.value=!0,n=d};return(d,s)=>{const de=ce("RouterLink");return D(),q("section",null,[l(K,null,{default:t(()=>[l(De,{"model-value":e(b).isActive,class:"align-center justify-center"},{default:t(()=>[l(X,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l(k,{cols:"12"},{default:t(()=>[l(L,{title:"Users"},{default:t(()=>[l(Q),l(B,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[m("div",Ie,[l(Ue,{modelValue:e(f),"onUpdate:modelValue":s[0]||(s[0]=r=>p(f)?f.value=r:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),l(G),m("div",Ne,[m("div",ze,[e(C)?(D(),A(X,{key:0,indeterminate:"",color:"primary"})):(D(),A(P,{key:1,onInput:s[1]||(s[1]=r=>g.value=!0),ref:"searchField",modelValue:e(_),"onUpdate:modelValue":s[2]||(s[2]=r=>p(_)?_.value=r:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),l(S,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:t(()=>[O(" Export ")]),_:1}),d.$can(e(N).USER.ADD,e(N).USER.SUBJECT)?(D(),A(S,{key:0,"prepend-icon":"tabler-plus",onClick:s[3]||(s[3]=r=>U.value=!0)},{default:t(()=>[O(" Add New User ")]),_:1})):z("",!0)])]),_:1}),l(Q),l(xe,{class:"text-no-wrap"},{default:t(()=>[Be,m("tbody",null,[(D(!0),q(fe,null,ve(e(y),r=>(D(),q("tr",{key:r.id,style:{height:"3.75rem"}},[m("td",null,I(r.id),1),m("td",null,[m("div",Te,[l(ke,{variant:"tonal",color:$(r.role).color,class:"me-3",size:"38"},{default:t(()=>[r.avatar?(D(),A(Ce,{key:0,src:r.avatar},null,8,["src"])):(D(),q("span",Fe,I(r.name.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),m("div",qe,[m("h6",je,[l(de,{to:{name:"apps-user-view-id",params:{id:r.id}},class:"font-weight-medium user-list-name"},{default:t(()=>[O(I(r.name),1)]),_:2},1032,["to"])]),m("span",Le,"@"+I(r.email),1)])])]),m("td",null,[m("span",Me,I(r.email),1)]),m("td",Je,[d.$can(e(N).USER.EDIT,e(N).USER.SUBJECT)?(D(),A(S,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:pe=>ne(r)},{default:t(()=>[l(T,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):z("",!0),d.$can(e(N).USER.DELETE,e(N).USER.SUBJECT)?(D(),A(S,{key:1,icon:"",size:"x-small",color:"default",variant:"text",onClick:pe=>ue(r)},{default:t(()=>[l(T,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):z("",!0),l(S,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[l(T,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),Ve(m("tfoot",null,Qe,512),[[ye,!e(y).length]])]),_:1}),l(Q),l(B,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[m("span",Ze,I(e(F)),1),l(Se,{modelValue:e(u),"onUpdate:modelValue":s[4]||(s[4]=r=>p(u)?u.value=r:null),size:"small","total-visible":5,length:e(v)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{isDrawerOpen:e(U),"onUpdate:isDrawerOpen":s[5]||(s[5]=r=>p(U)?U.value=r:null),roles:e(c),"onUpdate:roles":s[6]||(s[6]=r=>p(c)?c.value=r:c=r),onUserData:se},null,8,["isDrawerOpen","roles"]),l(Re,{isDrawerOpen:e(i),"onUpdate:isDrawerOpen":s[7]||(s[7]=r=>p(i)?i.value=r:null),roles:e(c),"onUpdate:roles":s[8]||(s[8]=r=>p(c)?c.value=r:c=r),role:e(x),"onUpdate:role":s[9]||(s[9]=r=>p(x)?x.value=r:null),user:e(n),"onUpdate:user":s[10]||(s[10]=r=>p(n)?n.value=r:n=r),onUserData:re},null,8,["isDrawerOpen","roles","role","user"]),e(a)?(D(),A($e,{key:0,isDialogVisible:e(a),"onUpdate:isDialogVisible":s[11]||(s[11]=r=>p(a)?a.value=r:null),user:e(n),"onUpdate:user":s[12]||(s[12]=r=>p(n)?n.value=r:n=r),onUserData:ie},null,8,["isDialogVisible","user"])):z("",!0)])}}};typeof W=="function"&&W(Ge);export{Ge as default};
