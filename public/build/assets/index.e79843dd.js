import{k as i,o as x,b as $,w as t,m as s,p as e,C as A,q as a,P as K,D as V,be as Q,E as h,Z as G,$ as M,A as ie,c as T,F as re,a as ue,x as w,H as de,I as pe}from"./main.f69c5408.js";import{_ as me}from"./DialogCloseBtn.7b91f7ec.js";import{u as I}from"./useSaleStore.163f8b05.js";import{s as L}from"./successMiddleware.f45546e8.js";import{e as z}from"./errorsMiddleware.cdd5cd8b.js";/* empty css                        */import{V as j}from"./VSpacer.9135023c.js";import{V as y,a as Z}from"./VBtn.76aaface.js";import{V as P,c as C}from"./VCard.fcae55b8.js";import{V as J}from"./VForm.cfa1f0ca.js";import{V as R,a as _}from"./VRow.e4a5b8f1.js";import{V as H}from"./VAutocomplete.6bb4f0fb.js";import{V as D}from"./VTextField.e88037f7.js";import{V as W}from"./VNavigationDrawer.d44a447a.js";import{a as ce}from"./VOverlay.0f5861fd.js";import{V as q}from"./VDivider.05c20ff4.js";import{V as fe}from"./VSelect.ff0390d0.js";import{V as ve}from"./VTable.8db9b88c.js";import{V as ye}from"./VPagination.98285beb.js";import{V as Ve}from"./VDialog.1b964792.js";import"./VAvatar.b7820170.js";import"./router.2b09887b.js";import"./VImg.250bf790.js";import"./position.0950bbb4.js";import"./VInput.ab9c3c07.js";import"./index.0a455ba3.js";import"./forwardRefs.c003b6b8.js";import"./filter.5cc21ee3.js";import"./VList.c2634ad3.js";import"./VMenu.0195468b.js";import"./scopeId.1717ff6d.js";import"./dialog-transition.c031011c.js";import"./easing.36b781ab.js";import"./VCheckboxBtn.8c8dfecd.js";import"./VSelectionControl.9db1b22d.js";import"./VChip.36fa1b73.js";/* empty css                   */import"./VField.1ae6eb8a.js";import"./VCounter.887ffd8e.js";import"./ssrBoot.ebdc86f2.js";import"./lazy.ba360ddc.js";const ge={class:"d-flex align-center pa-6 pb-1"},_e=s("h6",{class:"text-h6"}," Add Benefit ",-1),be={__name:"AddNewBenefitDrawer",props:{isDrawerOpen:{type:null,required:!0},data:{type:null,required:!0},months:{type:null,required:!0},years:{type:null,required:!0},loading:{type:null,required:!0}},emits:["benefitData"],setup(F,{emit:B}){const d=F,b=i(!1),c=i(),O=I(),o=i({month:null,year:null,electricity:0,other_charges:0,employee_salary:0}),v=i();i({id:-1});const g=()=>{d.isDrawerOpen.open=!1},k=()=>{o.value.month===null||o.value.year===null?(o.value.client.month===null&&z("Month not selected","Oops! Looks like you forgot to select a Month. Kindly pick at least one month to proceed"),o.value.client.year===null&&z("Month not selected","Oops! Looks like you forgot to select a Year. Kindly pick at least one year to proceed")):(f(),d.loading.isActive=!0,O.storeBenefit(o.value).then(p=>{d.loading.isActive=!1,o.value.month=0,o.value.year=0,L("Benefit created Successfully"),B("benefitData",{data:v})}).catch(p=>{console.log(p),d.loading.isActive=!1,z("Error Occured","Oops! Looks like the Benefit has not been submited ")}))},f=p=>{console.log(p),d.isDrawerOpen.open=!1};return(p,r)=>(x(),$(W,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":d.isDrawerOpen.open,"onUpdate:modelValue":f},{default:t(()=>[s("div",ge,[_e,e(j),e(y,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:g},{default:t(()=>[e(A,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(P,{flat:""},{default:t(()=>[e(C,null,{default:t(()=>[e(J,{ref_key:"refForm",ref:c,modelValue:a(b),"onUpdate:modelValue":r[5]||(r[5]=u=>V(b)?b.value=u:null),onSubmit:Q(k,["prevent"])},{default:t(()=>[e(R,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(H,{modelValue:a(o).month,"onUpdate:modelValue":r[0]||(r[0]=u=>a(o).month=u),items:d.months,"item-value":"id","item-title":"name",label:"Month"},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(H,{modelValue:a(o).year,"onUpdate:modelValue":r[1]||(r[1]=u=>a(o).year=u),items:d.years,label:"Year"},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(o).electricity,"onUpdate:modelValue":r[2]||(r[2]=u=>a(o).electricity=u),type:"number",label:"Electricity"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(o).employee_salary,"onUpdate:modelValue":r[3]||(r[3]=u=>a(o).employee_salary=u),type:"number",label:"employee salary"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(o).other_charges,"onUpdate:modelValue":r[4]||(r[4]=u=>a(o).other_charges=u),type:"number",label:"other charges"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(y,{type:"submit",class:"me-3"},{default:t(()=>[h(" Submit ")]),_:1}),e(y,{type:"reset",variant:"tonal",color:"secondary",onClick:g},{default:t(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},he={class:"d-flex align-center pa-6 pb-1"},we=s("h6",{class:"text-h6"}," Edit Benefit ",-1),xe={__name:"EditBenefitDrawer",props:{isDrawerOpen:{type:null,required:!0},benefit:{type:Object,required:!0},loading:{type:null,required:!0}},emits:["benefitData"],setup(F,{emit:B}){const d=F,b=i(!1),c=i(),O=I(),o=i({month:null,year:null,electricity:0,other_charges:0,employee_salary:0});G(()=>d.benefit,p=>{p&&(o.value={...p})});const v=i();i({id:-1});const g=()=>{d.isDrawerOpen.open=!1},k=()=>{console.log("benefit"),console.log(o.value),f(),d.loading.isActive=!0,O.updateBenefit(o.value).then(p=>{d.loading.isActive=!1,L("Benefit updated Successfully"),B("benefitData",{data:v})}).catch(p=>{console.log(p),d.loading.isActive=!1,z("Error Occured","Oops! Looks like the Benefit has not been submited ")})},f=p=>{console.log(p),d.isDrawerOpen.open=!1};return(p,r)=>(x(),$(W,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":d.isDrawerOpen.open,"onUpdate:modelValue":f},{default:t(()=>[s("div",he,[we,e(j),e(y,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:g},{default:t(()=>[e(A,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(P,{flat:""},{default:t(()=>[e(C,null,{default:t(()=>[e(J,{ref_key:"refForm",ref:c,modelValue:a(b),"onUpdate:modelValue":r[3]||(r[3]=u=>V(b)?b.value=u:null),onSubmit:Q(k,["prevent"])},{default:t(()=>[e(R,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(o).electricity,"onUpdate:modelValue":r[0]||(r[0]=u=>a(o).electricity=u),type:"number",label:"Electricity"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(o).employee_salary,"onUpdate:modelValue":r[1]||(r[1]=u=>a(o).employee_salary=u),type:"number",label:"employee salary"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(o).other_charges,"onUpdate:modelValue":r[2]||(r[2]=u=>a(o).other_charges=u),type:"number",label:"other charges"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(y,{type:"submit",class:"me-3"},{default:t(()=>[h(" Submit ")]),_:1}),e(y,{type:"reset",variant:"tonal",color:"secondary",onClick:g},{default:t(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};const De={class:"me-3",style:{width:"80px"}},Be={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ke={style:{width:"9rem"}},Ue=s("thead",null,[s("tr",null,[s("th",{scope:"col"}," ID "),s("th",{scope:"col"}," MONTH/YEAR "),s("th",{scope:"col"}," AMOUNT "),s("th",{scope:"col"}," NET BENEFIT "),s("th",{scope:"col"}," Quantity "),s("th",{scope:"col"}," ACTIONS ")])],-1),Ae={class:"text-capitalize text-base font-weight-semibold"},Ce={class:"text-capitalize text-base font-weight-semibold"},Oe={class:"text-capitalize text-base font-weight-semibold"},Se={class:"text-capitalize text-base font-weight-semibold"},ze={class:"text-center",style:{width:"5rem"}},Fe=s("tr",null,[s("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Ee=[Fe],Ne={class:"text-sm text-disabled"},xt={__name:"index",setup(F){const B=I(),d=i(""),b=i(!1),c=i({isActive:!0}),O=i(!0);i(),i(),i();const o=i(10),v=i(1),g=i(1),k=i(0);let f=i([]),p=i([]),r=i([]);i([]);const u=()=>{c.value.isActive=!0,B.fetchBenefits({searchValue:d.value,perPage:o.value,currentPage:v.value}).then(m=>{f.value=m.data.benefits.data,p.value=m.data.months,r.value=m.data.years,g.value=m.data.totalPage,k.value=m.data.totalBenefits,b.value=!1,c.value.isActive=!1}).catch(m=>{console.error(m),c.value.isActive=!1})};M(u),M(()=>{v.value>g.value&&(v.value=g.value)}),G(d,()=>{u()});const E=i({open:!1}),N=i({open:!1}),S=i({open:!1}),U=i();M(()=>{v.value>g.value&&(v.value=g.value)});const X=ie(()=>{const m=f.value.length?(v.value-1)*o.value+1:0,n=f.value.length+(v.value-1)*o.value;return`Showing ${m} to ${n} of ${k.value} entries`}),ee=m=>{u()},te=m=>{u()},le=m=>{U.value=m,N.value.open=!0},ae=m=>{S.value.open=!0,U.value=m},Y=()=>{S.value.open=!1},oe=()=>{c.value.isActive=!0,S.value.open=!1,B.deleteBenefit(U.value.id).then(m=>{c.value.isActive=!1,L(m.data.message),u()}).catch(m=>{z(m.data.message),c.value.isActive=!1})};return(m,n)=>{const ne=me;return x(),T("section",null,[e(R,null,{default:t(()=>[e(ce,{"model-value":a(c).isActive,class:"align-center justify-center"},{default:t(()=>[e(Z,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(_,{cols:"12"},{default:t(()=>[e(P,{title:"Benefits"},{default:t(()=>[e(q),e(C,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[s("div",De,[e(fe,{modelValue:a(o),"onUpdate:modelValue":n[0]||(n[0]=l=>V(o)?o.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(j),s("div",Be,[s("div",ke,[a(b)?(x(),$(Z,{key:0,indeterminate:"",color:"primary"})):(x(),$(D,{key:1,onInput:n[1]||(n[1]=l=>O.value=!0),ref:"searchField",modelValue:a(d),"onUpdate:modelValue":n[2]||(n[2]=l=>V(d)?d.value=l:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(y,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:t(()=>[h(" Export ")]),_:1}),e(y,{"prepend-icon":"tabler-plus",onClick:n[3]||(n[3]=l=>a(E).open=!0)},{default:t(()=>[h(" Add Benefit ")]),_:1})])]),_:1}),e(q),e(ve,{class:"text-no-wrap"},{default:t(()=>[Ue,s("tbody",null,[(x(!0),T(re,null,ue(a(f),l=>(x(),T("tr",{key:l.id,style:{height:"3.75rem"}},[s("td",null,w(l.id),1),s("td",null,[s("span",Ae,w(a(p)[l.month-1].name)+" / "+w(l.year),1)]),s("td",null,[s("span",Ce,w(parseFloat(l.total_amount).toFixed(2))+" DZD",1)]),s("td",null,[s("span",Oe,w(parseFloat(l.netBenefit).toFixed(2))+" DZD",1)]),s("td",null,[s("span",Se,w(parseFloat(l.total_articles)),1)]),s("td",ze,[e(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:se=>le(l)},{default:t(()=>[e(A,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-POS-benefit-edit-id",params:{id:l.id}}},{default:t(()=>[e(A,{size:"22",icon:"tabler-currency-dollar"})]),_:2},1032,["to"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:se=>ae(l)},{default:t(()=>[e(A,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(A,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),de(s("tfoot",null,Ee,512),[[pe,!a(f).length]])]),_:1}),e(q),e(C,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[s("span",Ne,w(a(X)),1),e(ye,{modelValue:a(v),"onUpdate:modelValue":n[4]||(n[4]=l=>V(v)?v.value=l:null),size:"small","total-visible":5,length:a(g)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(be,{isDrawerOpen:a(E),"onUpdate:isDrawerOpen":n[5]||(n[5]=l=>V(E)?E.value=l:null),months:a(p),"onUpdate:months":n[6]||(n[6]=l=>V(p)?p.value=l:p=l),years:a(r),"onUpdate:years":n[7]||(n[7]=l=>V(r)?r.value=l:r=l),benefit:a(f),"onUpdate:benefit":n[8]||(n[8]=l=>V(f)?f.value=l:f=l),loading:a(c),"onUpdate:loading":n[9]||(n[9]=l=>V(c)?c.value=l:null),onBenefitData:ee},null,8,["isDrawerOpen","months","years","benefit","loading"]),e(xe,{isDrawerOpen:a(N),"onUpdate:isDrawerOpen":n[10]||(n[10]=l=>V(N)?N.value=l:null),benefit:a(U),"onUpdate:benefit":n[11]||(n[11]=l=>V(U)?U.value=l:null),loading:a(c),"onUpdate:loading":n[12]||(n[12]=l=>V(c)?c.value=l:null),onBenefitData:te},null,8,["isDrawerOpen","benefit","loading"]),e(Ve,{modelValue:a(S).open,"onUpdate:modelValue":n[15]||(n[15]=l=>a(S).open=l),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(ne,{onClick:n[13]||(n[13]=l=>Y())}),e(P,{title:"Confirmation"},{default:t(()=>[e(C,null,{default:t(()=>[h(" Are you sure you want to delete this record ? ")]),_:1}),e(C,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(y,{color:"secondary",variant:"tonal",onClick:n[14]||(n[14]=l=>Y())},{default:t(()=>[h(" Disagree ")]),_:1}),e(y,{onClick:oe},{default:t(()=>[h(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{xt as default};
