import{bd as I,j as E,k as i,$ as z,o as _,b as y,w as l,p as e,q as r,be as Q,E as f,c as H,a as J,F as W,y as S,m as c,D as w,bf as C}from"./main.c6a9724c.js";import"./AppDateTimePicker.effadfa0.js";import{u as X}from"./useSaleStore.2fbe7104.js";import{s as R}from"./successMiddleware.c29016f5.js";import{_ as Y}from"./InvoiceSendInvoiceDrawer.507dd949.js";/* empty css                        *//* empty css                                                           *//* empty css                                                        */import{a as Z,V as b}from"./VBtn.e7c07512.js";import{a as ee}from"./VOverlay.01171e20.js";import{V as B,c as L}from"./VCard.f64c0a01.js";import{V as te}from"./VForm.821cf149.js";import{V as T,a as n}from"./VRow.ecaee667.js";import{V as v}from"./VInput.ab935992.js";import{V as p}from"./VTextField.0d61a0d0.js";import{V as P}from"./VSwitch.de57b8fe.js";import"./VField.d7dc540f.js";import"./index.cb3fbeaa.js";import"./position.262cc80a.js";import"./router.8721ce32.js";import"./easing.36b781ab.js";import"./VSpacer.e083bbdb.js";import"./VAvatar.6f1bab4f.js";import"./VImg.ed211343.js";import"./VTextarea.ae10c2b5.js";/* empty css                   */import"./forwardRefs.c003b6b8.js";import"./VCounter.92e789e6.js";import"./VChip.7e863aa4.js";import"./VNavigationDrawer.ef81bf50.js";import"./ssrBoot.6ecdcdd2.js";import"./lazy.55ef32ef.js";import"./VSelectionControl.3b08e1e2.js";const le=c("h6",{class:"text-sm font-weight-medium mb-3"}," Payment Method: ",-1),ae={class:"mt-5 d-flex align-center justify-space-between"},oe={class:"d-flex align-center justify-space-between"},re={class:"d-flex align-center justify-space-between"},se={__name:"[id]",setup(ue){const g=I(),M=E(),u=i([]),s=i({raw_material_price:0,total_profit:0,total_amount:0}),h=i(0),F=X(),m=i({isActive:!1}),$=i(null),k=()=>{F.getArticlesBenefit(Number(g.params.id)).then(a=>{m.isActive=!1,u.value=a.data.articles,s.value=a.data.benefit,s.value.total_profit=s.value.benefit}).catch(a=>{m.isActive=!1,console.log(a)})};z(k);const V=i(!1);i(!1);const U=i(!0),A=i(!1),x=i(!1),N=i(!1);i(0);const j=()=>{},q=a=>{var o=parseFloat(a.weight)*(parseFloat(s.value.raw_material_price)/1e3),t=o>0?o+5+1:0;a.benefit=parseFloat(a.product_price)-t,a.total_profit=parseFloat(a.benefit)*parseFloat(a.quantity),O()},D=()=>{for(let t=0;t<u.value.length;t++){var a=parseFloat(u.value[t].weight)*(parseFloat(s.value.raw_material_price)/1e3),o=a>0?a+5+1:0;u.value[t].benefit=parseFloat(u.value[t].product_price)-o,u.value[t].total_profit=parseFloat(u.value[t].benefit)*parseFloat(u.value[t].quantity)}O()},O=()=>{h.value=0,s.value.total_amount=0;for(let a=0;a<u.value.length;a++)h.value+=parseFloat(u.value[a].total_profit),s.value.total_amount+=parseFloat(u.value[a].total_amount);s.value.total_profit=parseFloat(h.value).toFixed(2)},G=()=>{m.value.isActive=!0,F.updateProfit(u.value,s.value,Number(g.params.id)).then(a=>{m.value.isActive=!1,R(a.data.message),M.push("/apps/pos/benefit/list")}).catch(a=>{m.value.isActive=!1,console.log(a)})},K=()=>{m.value.isActive=!0,F.refreshData(Number(g.params.id)).then(a=>{console.log(a),m.value.isActive=!1,k(),R(a.data.message)}).catch(a=>{m.value.isActive=!1,console.log(a)})};return(a,o)=>(_(),y(T,null,{default:l(()=>[e(ee,{"model-value":r(m).isActive,class:"align-center justify-center"},{default:l(()=>[e(Z,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(n,{cols:"12",md:"12"},{default:l(()=>[e(B,null,{default:l(()=>[e(L,{class:"d-flex flex-wrap justify-space-between flex-column"},{default:l(()=>[e(te,{ref:"refForm",onSubmit:o[6]||(o[6]=Q(()=>{},["prevent"]))},{default:l(()=>[e(T,null,{default:l(()=>[e(n,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(v,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:r(s).raw_material_price,"onUpdate:modelValue":[o[0]||(o[0]=t=>r(s).raw_material_price=t),o[1]||(o[1]=t=>D())],type:"number",label:"RM price KG",placeholder:"price of the raw material per KG"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(v,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:r(s).total_amount,"onUpdate:modelValue":o[2]||(o[2]=t=>r(s).total_amount=t),type:"number",readonly:"",label:"TOTAL AMOUNT",placeholder:"TOTAL AMOUNT"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(v,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:r(s).total_profit,"onUpdate:modelValue":o[3]||(o[3]=t=>r(s).total_profit=t),type:"number",readonly:"",label:"TOTAL PROFIT",placeholder:"TOTAL PROFIT"},null,8,["modelValue"])]),_:1}),e(n,{cols:"4",md:"1",class:"mt-7"},{default:l(()=>[e(b,{onClick:o[4]||(o[4]=t=>G())},{default:l(()=>[f(" Submit ")]),_:1})]),_:1}),e(n,{cols:"4",md:"1",class:"mt-7"},{default:l(()=>[e(b,{color:"success",onClick:o[5]||(o[5]=t=>K())},{default:l(()=>[f(" Refresh ")]),_:1})]),_:1})]),_:1}),(_(!0),H(W,null,J(r(u),t=>(_(),y(T,null,{default:l(()=>[e(n,{cols:"12",md:"2"},{default:l(()=>[e(p,{modelValue:t.product.name,"onUpdate:modelValue":d=>t.product.name=d,label:"Name of the product",placeholder:"Name of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(n,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.product_price,"onUpdate:modelValue":[d=>t.product_price=d,d=>q(t)],label:"Product's Price",placeholder:"price of the product"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(n,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.benefit,"onUpdate:modelValue":d=>t.benefit=d,label:"Product's Benefit",placeholder:"Benefit of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(n,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.quantity,"onUpdate:modelValue":d=>t.quantity=d,label:"Product's Quantity",placeholder:"quantity of the product this month",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(n,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.total_amount,"onUpdate:modelValue":d=>t.total_amount=d,label:"Product's total amount",placeholder:"total amount of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(n,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.total_profit,"onUpdate:modelValue":d=>t.total_profit=d,label:"Product's total profit",placeholder:"total profit of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),256))]),_:1},512)]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",md:"3"},{default:l(()=>[e(B,{class:"mb-8"},{default:l(()=>[e(L,null,{default:l(()=>[e(b,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:o[7]||(o[7]=t=>V.value=!0)},{default:l(()=>[f(" Send Invoice ")]),_:1}),r(N)?(_(),y(b,{key:0,block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-preview-id",params:{id:r($)}}},{default:l(()=>[f(" Preview ")]),_:1},8,["to"])):S("",!0),r(N)?S("",!0):(_(),y(b,{key:1,loading:r(m).isActive,disabled:r(m).isActive,block:"",color:"success",class:"mb-2",onClick:j},{default:l(()=>[f(" Save ")]),_:1},8,["loading","disabled"]))]),_:1})]),_:1}),le,c("div",ae,[e(v,{for:"payment-terms"},{default:l(()=>[f(" Payment Terms ")]),_:1}),c("div",null,[e(P,{id:"payment-terms",modelValue:r(U),"onUpdate:modelValue":o[8]||(o[8]=t=>w(U)?U.value=t:null)},null,8,["modelValue"])])]),c("div",oe,[e(v,{for:"client-notes"},{default:l(()=>[f(" Client Notes ")]),_:1}),c("div",null,[e(P,{id:"client-notes",modelValue:r(A),"onUpdate:modelValue":o[9]||(o[9]=t=>w(A)?A.value=t:null)},null,8,["modelValue"])])]),c("div",re,[e(v,{for:"payment-stub"},{default:l(()=>[f(" Payment Stub ")]),_:1}),c("div",null,[e(P,{id:"payment-stub",modelValue:r(x),"onUpdate:modelValue":o[10]||(o[10]=t=>w(x)?x.value=t:null)},null,8,["modelValue"])])])]),_:1}),e(Y,{isDrawerOpen:r(V),"onUpdate:isDrawerOpen":o[11]||(o[11]=t=>w(V)?V.value=t:null)},null,8,["isDrawerOpen"])]),_:1}))}};typeof C=="function"&&C(se);export{se as default};
