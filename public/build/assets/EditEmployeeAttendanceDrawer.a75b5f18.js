import{k as m,Z as C,r as x,o as O,b as T,w as r,m as S,p as t,C as $,q as n,P,D as q,be as F,E as _,ay as B}from"./main.e6f2226b.js";import{_ as M}from"./AppDateTimePicker.1db41a12.js";import{r as g}from"./validators.330a354f.js";import{s as N}from"./successMiddleware.f4309dc7.js";import{e as R}from"./errorsMiddleware.b7172764.js";import{u as h}from"./useAttendanceStore.ecf479d1.js";import{V as L}from"./VSpacer.5af32ac4.js";import{V as D}from"./VBtn.8ee7d1bc.js";import{V as z,c as I}from"./VCard.98fdd3d2.js";import{V as Y}from"./VForm.677822bd.js";import{V as Z,a as s}from"./VRow.0dee9a23.js";import{V as w}from"./VInput.8559a63c.js";import{V as E}from"./VTextField.8783cc1b.js";import{V as j}from"./VNavigationDrawer.84b927c3.js";const G={class:"d-flex align-center pa-6 pb-1"},H=S("h6",{class:"text-h6"}," Update End Date ",-1),ie={__name:"EditEmployeeAttendanceDrawer",props:{isDrawerOpen:{type:null,required:!0},loading:{type:null,required:!0},employee:{type:Object,required:!0},disableEndDate:{type:Boolean,required:!0},disableStartDate:{type:Boolean,required:!0}},setup(c){const o=c,A=h(),e=m({start_date:"",end_date:"",real_start_date:"",real_end_date:"",position:"",position_ar:""});C(o.isDrawerOpen,()=>{o.isDrawerOpen.open&&(console.log(o.employee),e.value.id=o.employee.id||"",e.value.start_date=o.employee.start_date||"",e.value.end_date=o.employee.end_date||"",e.value.real_start_date=o.employee.real_start_date||"",e.value.real_end_date=o.employee.real_end_date||"",e.value.position=o.employee.position||"",e.value.position_ar=o.employee.position_ar||"")});const f=m(!1),V=m();m(),m({id:-1});const v=()=>{o.isDrawerOpen.open=!1,B(()=>{var a,l;(a=V.value)==null||a.reset(),(l=V.value)==null||l.resetValidation()})},U=()=>{o.loading.isActive=!0,console.log(o.loading),A.updateEndDate(p(e.value.end_date),p(e.value.start_date),e.value.id,e.value.position,p(e.value.real_start_date),p(e.value.real_end_date),e.value.position_ar).then(a=>{o.isDrawerOpen.open=!1,o.loading.isActive=!1,o.employee.end_date=a.data.endDate,N(a.data.msg),location.reload()}).catch(a=>{o.loading.isActive=!1,R("Error Occured",a.response.data.message)})},k=a=>{o.isDrawerOpen.value.open=a},p=a=>{if(a!=null&&a!==""){console.log(a);let l=new Date(a),i=l.getFullYear(),u=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${i}-${u}-${d}`}return a},y=a=>{const l=a.getDate(),i=a.getMonth()+1;return`${a.getFullYear()}-${b(i)}-${b(l)}`};function b(a){return parseInt(a)<10?"0"+a:a}return(a,l)=>{const i=M,u=x("VueDatePicker");return O(),T(j,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":o.isDrawerOpen.open,"onUpdate:modelValue":k},{default:r(()=>[S("div",G,[H,t(L),t(D,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:v},{default:r(()=>[t($,{size:"18",icon:"tabler-x"})]),_:1})]),t(n(P),{options:{wheelPropagation:!1}},{default:r(()=>[t(z,{flat:""},{default:r(()=>[t(I,null,{default:r(()=>[t(Y,{ref_key:"refForm",ref:V,modelValue:n(f),"onUpdate:modelValue":l[6]||(l[6]=d=>q(f)?f.value=d:null),onSubmit:F(U,["prevent"])},{default:r(()=>[t(Z,null,{default:r(()=>[t(s,{cols:"12"},{default:r(()=>[t(i,{modelValue:n(e).start_date,"onUpdate:modelValue":l[0]||(l[0]=d=>n(e).start_date=d),label:"Start Date",disabled:c.disableStartDate},null,8,["modelValue","disabled"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(i,{modelValue:n(e).end_date,"onUpdate:modelValue":l[1]||(l[1]=d=>n(e).end_date=d),label:"End Date",config:{minDate:`

                  ${n(e).start_date}`},disabled:c.disableEndDate},null,8,["modelValue","config","disabled"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(w,null,{default:r(()=>[_(" REAL START DATE ")]),_:1}),t(u,{modelValue:n(e).real_start_date,"onUpdate:modelValue":[l[2]||(l[2]=d=>n(e).real_start_date=d),a.onStartDateChanged],"auto-apply":"",format:y},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(w,null,{default:r(()=>[_(" REAL END DATE ")]),_:1}),t(u,{modelValue:n(e).real_end_date,"onUpdate:modelValue":l[3]||(l[3]=d=>n(e).real_end_date=d),"auto-apply":"",format:y,"min-date":n(e).end_date_restrict},null,8,["modelValue","min-date"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(E,{modelValue:n(e).position,"onUpdate:modelValue":l[4]||(l[4]=d=>n(e).position=d),rules:[n(g)],label:"Position"},null,8,["modelValue","rules"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(E,{modelValue:n(e).position_ar,"onUpdate:modelValue":l[5]||(l[5]=d=>n(e).position_ar=d),rules:[n(g)],label:"Position Arabic"},null,8,["modelValue","rules"])]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(D,{type:"submit",class:"me-3"},{default:r(()=>[_(" Submit ")]),_:1}),t(D,{type:"reset",variant:"tonal",color:"secondary",onClick:v},{default:r(()=>[_(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{ie as _};
