import{k as n,Z as te,o as p,b as y,w as a,p as e,E as V,$ as Z,A as ae,r as le,q as i,m as l,D as c,C as u,c as N,a as oe,x as m,O as ie,F as se,H as ne,I as re,y as B}from"./main.4cdb8264.js";import{_ as de}from"./AppDateTimePicker.ff66a16b.js";import{a as ce}from"./formatters.4acf44a4.js";import{u as ue}from"./useSaleStore.d347a719.js";import{_ as me}from"./InvoiceAddPaymentDrawer.c98d13e3.js";import{_ as pe}from"./DialogCloseBtn.8363e5e0.js";import{V as G,c as O}from"./VCard.14bd54b8.js";import{V as b,a as fe}from"./VBtn.6b987f82.js";import{V as ve}from"./VDialog.ac101029.js";import{a as _e}from"./VOverlay.d2bd53f5.js";import{V as H}from"./VSelect.cd27c7e7.js";import{V as Ve}from"./VAutocomplete.65f23d30.js";import{V as M}from"./VDivider.c26e85a2.js";import{V as ge}from"./VTable.7343f31b.js";import{V as be}from"./VTooltip.46a6fac7.js";import{V as Q}from"./VAvatar.8fb7f203.js";import{V as xe}from"./VImg.72d11866.js";import{V as he}from"./VMenu.877e6f84.js";import{V as De,a as L,b as E}from"./VList.bbed60d2.js";import{V as we}from"./VSpacer.6e46cd4a.js";import{V as ye}from"./VPagination.5e818f3c.js";import{a as Se,V as Ce}from"./VRow.162e0661.js";import"./VField.3f808767.js";import"./index.53ed48c8.js";import"./VInput.f8c260d8.js";import"./router.7a1229d1.js";import"./position.0441acf4.js";import"./easing.36b781ab.js";import"./index.b522f886.js";import"./errorsMiddleware.cac38cbd.js";import"./successMiddleware.6408b745.js";import"./VForm.152dff13.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.043ad04f.js";/* empty css                   */import"./VCounter.a37639f2.js";import"./VTextarea.3ddef665.js";import"./VNavigationDrawer.309cb035.js";import"./ssrBoot.e0b9a9fa.js";import"./scopeId.1e671eee.js";import"./dialog-transition.916c5884.js";import"./lazy.83486eee.js";import"./VCheckboxBtn.c66c5dc4.js";import"./VSelectionControl.24a181a4.js";import"./VChip.aac5004d.js";import"./filter.d2166618.js";const ke={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},sale:{type:Object,required:!0}},emits:["update:isDrawerOpen","saleData"],setup(R,{emit:g}){const x=R,h=n(),f=()=>{g("update:isDialogVisible",!1)};te(()=>x.sale,v=>{v&&(h.value=v.id||0)});const r=()=>{g("saleData",{id:x.sale.id}),g("update:isDialogVisible",!1)};return(v,d)=>{const _=pe;return p(),y(ve,{modelValue:x.isDialogVisible,"onUpdate:modelValue":d[2]||(d[2]=D=>x.isDialogVisible=D),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(_,{onClick:d[0]||(d[0]=D=>f())}),e(G,{title:"Confirmation"},{default:a(()=>[e(O,null,{default:a(()=>[V(" Are you sure you want to delete this record ? ")]),_:1}),e(O,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(b,{color:"secondary",variant:"tonal",onClick:d[1]||(d[1]=D=>g("update:isDialogVisible",!1))},{default:a(()=>[V(" Disagree ")]),_:1}),e(b,{onClick:r},{default:a(()=>[V(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Pe={class:"d-flex align-center",style:{width:"135px"}},ze=l("span",{class:"text-no-wrap me-3"},"Show:",-1),Ae={class:"d-flex align-center",style:{width:"30%"}},Ie={class:"d-flex align-center flex-wrap gap-4"},Oe={class:"invoice-list-filter"},$e={class:"invoice-list-filter"},Te={class:"invoice-list-filter"},Ue={class:"me-3"},Ne={class:"text-uppercase"},Be=l("th",{scope:"col"}," #ID ",-1),Le={scope:"col",class:"text-center"},Ee=l("th",{scope:"col"}," CLIENT ",-1),Re=l("th",{scope:"col",class:"text-center"}," TOTAL ",-1),je=l("th",{scope:"col"}," Issued Date ",-1),qe=l("th",{scope:"col"}," ACTIONS ",-1),Fe={class:"text-center"},Ze={class:"mb-0"},He={class:"mb-0"},Me={class:"d-flex align-center"},Qe={key:1},Ge={class:"d-flex flex-column"},Je={class:"text-base font-weight-medium mb-0"},Ke={class:"text-disabled text-sm"},We={class:"text-center"},Xe={style:{width:"8rem"}},Ye=l("tr",null,[l("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),et=[Ye],tt={class:"text-sm text-disabled"},Gt={__name:"index",setup(R){const g=ue(),x=n(""),h=n(),f=n(10),r=n(1),v=n(1),d=n(0),_=n([]),D=n([]),P=n(""),j=n([]),z=n(""),A=n(""),S=n(!1),C=n(!1);let w=n();const J=n([{id:1,name:"Paid"},{id:2,name:"Not Paid"}]),$=()=>{g.fetchSales({searchValue:x.value,status:h.value,perPage:f.value,currentPage:r.value,client_id:P.value,from:z.value,to:A.value}).then(s=>{k.value.isActive=!1,_.value=s.data.sales,D.value=s.data.clients,v.value=s.data.totalPage,d.value=s.data.totalSales}).catch(s=>{k.value.isActive=!1,console.log(s)})};Z(()=>{$()}),Z(()=>{r.value>v.value&&(r.value=v.value)});const K=ae(()=>{const s=_.value.length?(r.value-1)*f.value+1:0,o=_.value.length+(r.value-1)*f.value;return`Showing ${s} to ${o} of ${d.value} entries`}),T=s=>s.balance>0?s.balance==s.total_amount?{variant:"error",icon:"tabler-x"}:{variant:"info",icon:"tabler-circle-half-2"}:s.balance<0?{variant:"warning",icon:"tabler-alert-circle"}:s.balance==0?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-chart-pie"},q=n(),W=s=>{S.value=!0,q.value=s},k=n({isActive:!0}),X=s=>{C.value=!0,w=s,console.log(w)},Y=s=>{g.deleteSale(s).then(o=>{$()}).catch(o=>{console.log(o)})},I=()=>{k.value.isActive=!0,$()};return(s,o)=>{const F=de,ee=le("RouterLink");return p(),y(Ce,null,{default:a(()=>[e(_e,{"model-value":i(k).isActive,class:"align-center justify-center"},{default:a(()=>[e(fe,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(Se,null,{default:a(()=>[i(_)?(p(),y(G,{key:0,id:"invoice-list"},{default:a(()=>[e(O,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[l("div",Pe,[ze,e(H,{modelValue:i(f),"onUpdate:modelValue":o[0]||(o[0]=t=>c(f)?f.value=t:null),density:"compact",items:[10,20,30,50,100,500,1e3,5e3]},null,8,["modelValue"])]),l("div",Ae,[e(Ve,{clearable:"",modelValue:i(P),"onUpdate:modelValue":[o[1]||(o[1]=t=>c(P)?P.value=t:null),I],items:i(D),"item-value":"id","item-title":"name",label:"Client",placeholder:"Client"},null,8,["modelValue","items"])]),l("div",Ie,[l("div",Oe,[e(F,{modelValue:i(z),"onUpdate:modelValue":[o[2]||(o[2]=t=>c(z)?z.value=t:null),I],label:"From Date"},null,8,["modelValue"])]),l("div",$e,[e(F,{modelValue:i(A),"onUpdate:modelValue":[o[3]||(o[3]=t=>c(A)?A.value=t:null),I],label:"To Date"},null,8,["modelValue"])]),l("div",Te,[e(H,{modelValue:i(h),"onUpdate:modelValue":[o[4]||(o[4]=t=>c(h)?h.value=t:null),I],label:"Select Status",clearable:"","item-value":"id","item-title":"name","clear-icon":"tabler-x","single-line":"",items:i(J)},null,8,["modelValue","items"])]),l("div",Ue,[e(b,{"prepend-icon":"tabler-plus",to:{name:"apps-POS-sale-add"}},{default:a(()=>[V(" Create ")]),_:1})])])]),_:1}),e(M),e(ge,{class:"text-no-wrap invoice-list-table"},{default:a(()=>[l("thead",Ne,[l("tr",null,[Be,l("th",Le,[e(u,{icon:"tabler-trending-up"})]),Ee,Re,je,qe])]),l("tbody",null,[(p(!0),N(se,null,oe(i(_),t=>(p(),N("tr",{key:t.id,style:{height:"3.75rem"}},[l("td",null,[e(ee,{to:{name:"apps-POS-sale-preview-id",params:{id:t.id}}},{default:a(()=>[V(" #"+m(t.id),1)]),_:2},1032,["to"])]),l("td",Fe,[e(be,null,{activator:a(({props:U})=>[e(Q,ie({size:30},U,{color:T(t).variant,variant:"tonal"}),{default:a(()=>[e(u,{size:20,icon:T(t).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[l("p",Ze,m(t.invoiceStatus),1),l("p",He," Balance: "+m(t.balance),1)]),_:2},1024)]),l("td",null,[l("div",Me,[e(Q,{size:"34",color:T(t).variant,variant:"tonal",class:"me-3"},{default:a(()=>[t.avatar?(p(),y(xe,{key:0,src:t.avatar},null,8,["src"])):(p(),N("span",Qe,m(i(ce)(t.client.name)),1))]),_:2},1032,["color"]),l("div",Ge,[l("h6",Je,m(t.client.name),1),l("span",Ke,m(t.client.email),1)])])]),l("td",We,m(t.total_amount)+" DZD ",1),l("td",null,m(t.sale_date),1),l("td",Xe,[e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(u,{icon:"tabler-mail",size:22})]),_:1}),e(b,{icon:"",variant:"text",color:"default",size:"x-small",onClick:U=>X(t)},{default:a(()=>[e(u,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(b,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-sale-preview-id",params:{id:t.id}}},{default:a(()=>[e(u,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(u,{size:22,icon:"tabler-dots-vertical"}),e(he,{activator:"parent"},{default:a(()=>[e(De,null,{default:a(()=>[e(L,{value:"download"},{prepend:a(()=>[e(u,{size:"24",class:"me-3",icon:"tabler-download"})]),default:a(()=>[e(E,null,{default:a(()=>[V("Download")]),_:1})]),_:1}),e(L,{to:{name:"apps-POS-sale-edit-id",params:{id:t.id}}},{prepend:a(()=>[e(u,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:a(()=>[e(E,null,{default:a(()=>[V("Edit")]),_:1})]),_:2},1032,["to"]),e(L,{value:"payment",onClick:U=>W(t)},{prepend:a(()=>[e(u,{size:"24",class:"me-3",icon:"tabler-credit-card"})]),default:a(()=>[e(E,null,{default:a(()=>[V("Payment")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),ne(l("tfoot",null,et,512),[[re,!i(_).length]])]),_:1}),e(M),e(O,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:a(()=>[l("span",tt,m(i(K)),1),e(we),e(ye,{modelValue:i(r),"onUpdate:modelValue":o[5]||(o[5]=t=>c(r)?r.value=t:null),size:"small","total-visible":5,length:i(v),onNext:o[6]||(o[6]=t=>j.value=[]),onPrev:o[7]||(o[7]=t=>j.value=[])},null,8,["modelValue","length"])]),_:1}),i(C)?(p(),y(ke,{key:0,isDialogVisible:i(C),"onUpdate:isDialogVisible":o[8]||(o[8]=t=>c(C)?C.value=t:null),sale:i(w),"onUpdate:sale":o[9]||(o[9]=t=>c(w)?w.value=t:w=t),onSaleData:Y},null,8,["isDialogVisible","sale"])):B("",!0)]),_:1})):B("",!0)]),_:1}),i(S)?(p(),y(me,{key:0,loading:i(k),data:i(q),isDrawerOpen:i(S),"onUpdate:isDrawerOpen":o[10]||(o[10]=t=>c(S)?S.value=t:null)},null,8,["loading","data","isDrawerOpen"])):B("",!0)]),_:1})}}};export{Gt as default};
