import{bd as q,k as u,Z as E,q as e,o as r,c as _,p as s,w as l,m as t,V as Y,v as z,x as o,b,y as c,F as G,a as Q,E as p,D as y}from"./main.e3ae6f5b.js";import{_ as W}from"./InvoiceAddPaymentDrawer.98e91030.js";import{_ as H}from"./InvoiceSendInvoiceDrawer.411e4a43.js";import{u as J}from"./useSaleStore.33d18f08.js";import{a as M,V as I}from"./VBtn.78b9f864.js";import{a as X}from"./VOverlay.bef3a4a8.js";import{a as h,V as S}from"./VRow.307db058.js";import{V as F,c as w}from"./VCard.9574192c.js";import{V}from"./VDivider.04b9ef9a.js";import{V as tt}from"./VTable.24eac033.js";import{V as v}from"./VInput.ebff45cb.js";import{V as R}from"./VSwitch.2c046205.js";import{V as B}from"./VAutocomplete.8e6d4b59.js";import{V as L}from"./VTextField.c4710a67.js";import"./AppDateTimePicker.fa89fced.js";import"./VField.93385836.js";import"./index.ba8dc909.js";import"./position.4c99774d.js";import"./router.92e08cce.js";import"./easing.36b781ab.js";import"./errorsMiddleware.cd79b49a.js";import"./VSpacer.50e7ecc1.js";import"./VAvatar.a66dff35.js";import"./VImg.a8f9a1c8.js";import"./VForm.724a7186.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.f0669caf.js";/* empty css                   */import"./VCounter.a137105a.js";import"./VNavigationDrawer.2a3e31b0.js";import"./ssrBoot.170b97eb.js";import"./VChip.dd80b8e5.js";import"./lazy.f3535b64.js";import"./VSelectionControl.90a7537b.js";import"./VSelect.e8db8923.js";import"./VList.d6dc74e3.js";import"./dialog-transition.cc00eae2.js";import"./VMenu.d6d893ca.js";import"./scopeId.55b8accf.js";import"./VCheckboxBtn.41b91637.js";import"./filter.2c1c4484.js";const et={key:0},st={class:"ma-sm-3"},ot={class:"d-flex align-center mb-6"},lt={class:"font-weight-bold text-xl"},it={class:"mb-0"},dt=t("p",{class:"mb-0"}," KASR EL ABTALE, 19000, SETIF ",-1),at={class:"mb-0"},nt={class:"mb-0"},rt={class:"mt-4 ma-sm-4"},ct={class:"font-weight-medium text-xl mb-2"},mt={class:"mb-2"},ut=t("span",null,"Date : ",-1),_t={class:"font-weight-semibold"},pt={key:0,class:"mb-2"},ft=t("span",null,"Payment: ",-1),ht={class:"font-weight-semibold"},vt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},xt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),bt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},wt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},gt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),yt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},Vt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},kt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),Nt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},jt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Tt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),Ct={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},Dt={class:"font-weight-medium text-sm mb-2"},It={key:0,class:"mb-2 text-sm"},St=t("span",null,"Payment: ",-1),Ft={class:"font-weight-semibold"},Rt={class:"mb-2 text-sm"},At=t("span",null,"Date : ",-1),Pt={class:"font-weight-semibold"},Ut={class:"v-col-md-6"},Ot=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center"},null,-1),Et={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Bt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Client ",-1),Lt={class:"v-col-md-10 border-left padding-8 data-font"},Zt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Kt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Address ",-1),$t={class:"v-col-md-10 border-left padding-8 data-font"},qt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Yt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right padding-right-0"}," Phone ",-1),zt={class:"v-col-md-10 border-left padding-8 data-font"},Gt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Qt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Email ",-1),Wt={class:"v-col-md-10 border-left padding-8 data-font"},Ht=t("div",{class:"v-col-md-2"},null,-1),Jt={key:0,class:"v-col-md-4"},Mt=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),Xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},te=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),ee={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},se={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},oe=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),le={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ie={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},de=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),ae={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ne={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},re=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),ce={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},me={key:1,class:"v-col-md-4"},ue=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),_e=t("div",{class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center"},[t("div",{class:"v-col-md-4 text-sm-subtitle-2 border-right padding-right-0"},[t("span")]),t("div",{class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"})],-1),pe={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},fe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Facture ",-1),he={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},ve={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},xe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Payment Type ",-1),be={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},we={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ge=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Date ",-1),ye={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Ve=t("th",{scope:"col"}," ID ",-1),ke={key:0,scope:"col"},Ne=t("th",{scope:"col"}," name ",-1),je=t("th",{scope:"col"}," Description ",-1),Te={key:1,scope:"col",class:"text-center"},Ce=t("th",{scope:"col",class:"text-center"}," QTY ",-1),De={key:2,scope:"col",class:"text-center"},Ie={class:"text-no-wrap"},Se={key:0,class:"text-no-wrap"},Fe={class:"text-no-wrap"},Re={class:"text-sm-caption mb-0"},Ae={class:"text-no-wrap"},Pe={key:1,class:"text-center"},Ue={class:"text-center"},Oe={key:2,class:"text-center"},Ee={class:"my-2 mx-sm-5 v-col-md-6"},Be={class:"my-2 mx-sm-4 v-col-md-4"},Le={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ze=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Invoice ",-1),Ke={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},$e={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},qe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Payment ",-1),Ye={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},ze={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ge=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Rest ",-1),Qe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},We=t("div",{class:"d-flex mx-sm-4"},[t("h6",{class:"text-sm font-weight-semibold me-1"}," Note: "),t("span",null,"It was a pleasure working with you and your team. We hope you will keep us in mind for future freelance projects. Thank You!")],-1),He={class:"d-flex align-center justify-space-between mt-5"},Je={class:"d-flex align-center justify-space-between"},Me={class:"d-flex align-center justify-space-between"},Xe={key:0},Ks={__name:"[id]",setup(ts){const Z=J(),A=q(),a=u({id:1,balance:0,total_amount:0,sale_date:null,client_id:1,sale_status:{id:-1,name:""},amount_letter:"",notes:"",client:{id:-1,name:"",surname:"",address:"",email:"",phone:"",NRC:"",NIF:"",NART:"",NIS:""},sale_items:[]}),d=u({sku:!0,invoice:!1,price:!0,paymentType:"Espece"}),P=u();let g=u([]);const k=u(1),f=u({name:"",address:"",phone:"",email:"",NRC:"",NIF:"",NART:"",NIS:"",capitale:""});let N=u([]);const U=u(!1);u();const j=u(!1),T=u(!1),O=u({isActive:!1});Z.fetchSale(Number(A.params.id)).then(m=>{a.value=m.data.sale,P.value={...a.value.client},N=m.data.companies,g=m.data.clients,f.value=N[0],U.value=!0}).catch(m=>{console.log(m)});const K=()=>{window.print()};E(k,(m,n,i)=>{f.value=N[m-1],console.log(f)});const $=m=>m.name+" "+m.surname,C=u("Facture Proforma"),D=u();return E(D,(m,n,i)=>{m||(a.value.client=P);for(let x=0;x<g.length;x++)g[x].id===m&&(a.value.client={...g[x]})}),(m,n)=>e(U)?(r(),_("section",et,[s(X,{"model-value":e(O).isActive,class:"align-center justify-center"},{default:l(()=>[s(M,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),s(S,null,{default:l(()=>[s(h,{cols:"12",md:"9"},{default:l(()=>[s(F,null,{default:l(()=>[s(w,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:l(()=>[s(S,null,{default:l(()=>[s(h,{cols:"8"},{default:l(()=>[t("div",st,[t("div",ot,[s(e(Y),{nodes:e(z).app.logo,class:"me-3"},null,8,["nodes"]),t("h6",lt,o(e(f).name),1)]),t("p",it,o(e(f).address),1),dt,t("p",at,o(e(f).email),1),t("p",nt,o(e(f).phone),1)])]),_:1}),e(d).invoice?c("",!0):(r(),b(h,{key:0,cols:"4"},{default:l(()=>[t("div",rt,[t("h6",ct," Bon Livraison #"+o(e(a).id),1),t("p",mt,[ut,t("span",_t,o(e(a).sale_date),1)]),e(d).price?(r(),_("p",pt,[ft,t("span",ht,o(e(d).paymentType),1)])):c("",!0)])]),_:1})),e(d).invoice?(r(),b(h,{key:1,cols:"4",class:"mt-5"},{default:l(()=>[t("div",vt,[xt,t("div",bt,o(e(f).NRC),1)]),t("div",wt,[gt,t("div",yt,o(e(f).NIF),1)]),t("div",Vt,[kt,t("div",Nt,o(e(f).NIS),1)]),t("div",jt,[Tt,t("div",Ct,o(e(f).NART),1)])]),_:1})):c("",!0)]),_:1})]),_:1}),e(d).invoice?(r(),b(V,{key:0})):c("",!0),e(d).invoice?(r(),b(S,{key:1,class:"ma-3 text-center"},{default:l(()=>[s(h,{cols:"4"},{default:l(()=>[t("h6",Dt,o(e(C))+" #"+o(e(a).id),1)]),_:1}),s(h,{cols:"4"},{default:l(()=>[e(d).price?(r(),_("p",It,[St,t("span",Ft,o(e(d).paymentType),1)])):c("",!0)]),_:1}),s(h,{cols:"4"},{default:l(()=>[t("p",Rt,[At,t("span",Pt,o(e(a).sale_date),1)])]),_:1})]),_:1})):c("",!0),s(V),s(w,{class:"invoiceGeneral d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row"},{default:l(()=>[t("div",Ut,[Ot,t("div",Et,[Bt,t("div",Lt,o(e(a).client.name)+" "+o(e(a).client.surname),1)]),t("div",Zt,[Kt,t("div",$t,o(e(a).client.address),1)]),t("div",qt,[Yt,t("div",zt,o(e(a).client.phone),1)]),t("div",Gt,[Qt,t("div",Wt,o(e(a).client.email),1)])]),Ht,e(d).invoice?(r(),_("div",Jt,[Mt,t("div",Xt,[te,t("div",ee,o(e(a).client.NRC),1)]),t("div",se,[oe,t("div",le,o(e(a).client.NIF),1)]),t("div",ie,[de,t("div",ae,o(e(a).client.NIS),1)]),t("div",ne,[re,t("div",ce,o(e(a).client.NART),1)])])):c("",!0),e(d).invoice?c("",!0):(r(),_("div",me,[ue,_e,t("div",pe,[fe,t("div",he," #"+o(e(a).id),1)]),t("div",ve,[xe,t("div",be,o(e(d).paymentType),1)]),t("div",we,[ge,t("div",ye,o(e(a).sale_date),1)])]))]),_:1}),s(V),s(tt,null,{default:l(()=>[t("thead",null,[t("tr",null,[Ve,e(d).sku?(r(),_("th",ke," SKU ")):c("",!0),Ne,je,e(d).price?(r(),_("th",Te," Price ")):c("",!0),Ce,e(d).price?(r(),_("th",De," TOTAL ")):c("",!0)])]),t("tbody",null,[(r(!0),_(G,null,Q(e(a).sale_items,(i,x)=>(r(),_("tr",{key:i.name},[t("td",Ie,o(x+1),1),e(d).sku?(r(),_("td",Se,o(i.product.SKU),1)):c("",!0),t("td",Fe,[t("p",Re,o(i.product.brand),1),p(" "+o(i.product.name),1)]),t("td",Ae,o(i.product.description),1),e(d).price?(r(),_("td",Pe,o(i.unit_price)+" DZD ",1)):c("",!0),t("td",Ue,o(i.quantity),1),e(d).price?(r(),_("td",Oe,o(i.total_price)+" DZD ",1)):c("",!0)]))),128))])]),_:1}),e(d).price?(r(),b(V,{key:2,class:"my-2"})):c("",!0),e(d).price?(r(),b(w,{key:3,class:"d-flex justify-space-between flex-column flex-sm-row print-row"},{default:l(()=>[t("div",Ee,[t("h5",null,"Invoice's Final Amount : "+o(e(a).amount_letter),1)]),t("div",Be,[t("div",Le,[Ze,t("div",Ke,o(e(a).total_amount)+" DZD ",1)]),t("div",$e,[qe,t("div",Ye,o(e(a).payment?parseFloat(e(a).regulation).toFixed(2):0)+" DZD ",1)]),t("div",ze,[Ge,t("div",Qe,o((parseFloat(e(a).total_amount)-parseFloat(e(a).regulation)).toFixed(2))+" DZD ",1)])])]),_:1})):c("",!0),s(V),s(w,null,{default:l(()=>[We]),_:1})]),_:1})]),_:1}),s(h,{cols:"12",md:"3",class:"d-print-none"},{default:l(()=>[s(F,null,{default:l(()=>[s(w,null,{default:l(()=>[s(I,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:n[0]||(n[0]=i=>T.value=!0)},{default:l(()=>[p(" Send Invoice ")]),_:1}),s(I,{block:"",variant:"tonal",color:"secondary",class:"mb-2",onClick:K},{default:l(()=>[p(" Print ")]),_:1}),s(I,{block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-edit-id",params:{id:e(A).params.id}}},{default:l(()=>[p(" Edit Invoice ")]),_:1},8,["to"]),s(I,{block:"","prepend-icon":"tabler-currency-dollar",class:"mb-2",onClick:n[1]||(n[1]=i=>j.value=!0)},{default:l(()=>[p(" Add Payment ")]),_:1})]),_:1})]),_:1}),s(F,{class:"mt-7"},{default:l(()=>[s(w,null,{default:l(()=>[t("div",He,[s(v,{for:"price"},{default:l(()=>[p(" SKU ")]),_:1}),t("div",null,[s(R,{id:"sku",modelValue:e(d).sku,"onUpdate:modelValue":n[2]||(n[2]=i=>e(d).sku=i)},null,8,["modelValue"])])]),t("div",Je,[s(v,{for:"price"},{default:l(()=>[p(" Facture ")]),_:1}),t("div",null,[s(R,{id:"sku",modelValue:e(d).invoice,"onUpdate:modelValue":n[3]||(n[3]=i=>e(d).invoice=i)},null,8,["modelValue"])])]),t("div",Me,[s(v,{for:"price"},{default:l(()=>[p(" Price ")]),_:1}),t("div",null,[s(R,{id:"price",modelValue:e(d).price,"onUpdate:modelValue":n[4]||(n[4]=i=>e(d).price=i)},null,8,["modelValue"])])]),t("div",null,[s(v,{class:"mb-4 mt-1"},{default:l(()=>[p(" Company ")]),_:1}),s(B,{modelValue:e(k),"onUpdate:modelValue":n[5]||(n[5]=i=>y(k)?k.value=i:null),items:e(N),"item-value":"id",class:"text-sm-subtitle-2","item-title":"name",label:"Company"},null,8,["modelValue","items"])]),t("div",null,[t("div",null,[s(v,{for:"payment-terms",class:"mb-1 mt-1"},{default:l(()=>[p(" Payment ")]),_:1}),s(L,{modelValue:e(d).paymentType,"onUpdate:modelValue":n[6]||(n[6]=i=>e(d).paymentType=i),placeholder:"Thanks for your business"},null,8,["modelValue"])])]),e(d).invoice?(r(),_("div",Xe,[s(v,{for:"payment-terms",class:"mb-1 mt-1"},{default:l(()=>[p(" Invoice Type ")]),_:1}),s(L,{modelValue:e(C),"onUpdate:modelValue":n[7]||(n[7]=i=>y(C)?C.value=i:null),placeholder:"Put the Invoice Type"},null,8,["modelValue"])])):c("",!0),t("div",null,[s(v,{class:"mb-4 mt-1"},{default:l(()=>[p(" Client ")]),_:1}),s(B,{clearable:"",modelValue:e(D),"onUpdate:modelValue":n[8]||(n[8]=i=>y(D)?D.value=i:null),items:e(g),"item-value":"id","item-title":$,label:"Client"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),s(W,{data:e(a),loading:e(O),isDrawerOpen:e(j),"onUpdate:isDrawerOpen":n[9]||(n[9]=i=>y(j)?j.value=i:null)},null,8,["data","loading","isDrawerOpen"]),s(H,{isDrawerOpen:e(T),"onUpdate:isDrawerOpen":n[10]||(n[10]=i=>y(T)?T.value=i:null)},null,8,["isDrawerOpen"])])):c("",!0)}};export{Ks as default};
