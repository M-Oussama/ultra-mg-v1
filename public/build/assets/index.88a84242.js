import{k as n,Z as ee,o as f,b as w,w as a,p as e,E as g,$ as q,A as te,r as ae,q as i,m as l,D as u,C as m,c as U,a as le,x as p,O as oe,F as ie,H as se,I as ne,y as N}from"./main.f953bb32.js";import{_ as re}from"./AppDateTimePicker.220e8818.js";import{a as de}from"./formatters.4acf44a4.js";import{u as ce}from"./useSaleStore.6a87799d.js";import{_ as ue}from"./InvoiceAddPaymentDrawer.40c1e4cc.js";import{_ as me}from"./DialogCloseBtn.d8d8323c.js";import{V as M,c as A}from"./VCard.7307dc50.js";import{V as b,a as pe}from"./VBtn.53826497.js";import{V as fe}from"./VDialog.c5a0cc45.js";import{a as ve}from"./VOverlay.00baf023.js";import{V as F}from"./VSelect.64bf3f05.js";import{V as _e}from"./VAutocomplete.99e66e44.js";import{V as Ve}from"./VTextField.b3fcc6a6.js";import{V as Z}from"./VDivider.0296d5ca.js";import{V as ge}from"./VTable.69dd1c1a.js";import{V as xe}from"./VTooltip.766b1a37.js";import{V as H}from"./VAvatar.cb499833.js";import{V as be}from"./VImg.4ecfe5db.js";import{V as he}from"./VMenu.4462e6e8.js";import{V as De,a as B,b as L}from"./VList.b77b6faf.js";import{V as ye}from"./VSpacer.97180599.js";import{V as we}from"./VPagination.0b1cb419.js";import{a as Se,V as Ce}from"./VRow.463c82a5.js";import"./VField.f20494b5.js";import"./index.bcea3609.js";import"./VInput.1c807576.js";import"./router.392dd72d.js";import"./position.20814070.js";import"./easing.36b781ab.js";import"./index.b522f886.js";import"./errorsMiddleware.9f89ec9d.js";import"./successMiddleware.cdacaeb5.js";import"./VForm.4c472cc7.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.810bf745.js";/* empty css                   */import"./VCounter.7a557e1b.js";import"./VNavigationDrawer.81f726b4.js";import"./ssrBoot.9eb188de.js";import"./scopeId.26638b4f.js";import"./dialog-transition.d5a03f10.js";import"./lazy.16b1c569.js";import"./VCheckboxBtn.2d0ad59f.js";import"./VSelectionControl.8ce3f773.js";import"./VChip.713d6306.js";import"./filter.cabd82c5.js";const ke={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},sale:{type:Object,required:!0}},emits:["update:isDrawerOpen","saleData"],setup(E,{emit:x}){const d=E,h=n(),v=()=>{x("update:isDialogVisible",!1)};ee(()=>d.sale,_=>{_&&(h.value=_.id||0)});const r=()=>{x("saleData",{id:d.sale.id}),x("update:isDialogVisible",!1)};return(_,c)=>{const V=me;return f(),w(fe,{modelValue:d.isDialogVisible,"onUpdate:modelValue":c[2]||(c[2]=D=>d.isDialogVisible=D),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(V,{onClick:c[0]||(c[0]=D=>v())}),e(M,{title:"Confirmation"},{default:a(()=>[e(A,null,{default:a(()=>[g(" Are you sure you want to delete this record ? ")]),_:1}),e(A,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(b,{color:"secondary",variant:"tonal",onClick:c[1]||(c[1]=D=>x("update:isDialogVisible",!1))},{default:a(()=>[g(" Disagree ")]),_:1}),e(b,{onClick:r},{default:a(()=>[g(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Pe={class:"d-flex align-center",style:{width:"135px"}},ze=l("span",{class:"text-no-wrap me-3"},"Show:",-1),Ae={class:"d-flex align-center",style:{width:"30%"}},Ie={class:"d-flex align-center flex-wrap gap-4"},Oe={class:"invoice-list-filter"},$e={class:"invoice-list-filter"},Te={class:"invoice-list-filter"},Ue={class:"me-3"},Ne={class:"text-uppercase"},Be=l("th",{scope:"col"}," #ID ",-1),Le={scope:"col",class:"text-center"},Ee=l("th",{scope:"col"}," CLIENT ",-1),Re=l("th",{scope:"col",class:"text-center"}," TOTAL ",-1),je=l("th",{scope:"col"}," Issued Date ",-1),qe=l("th",{scope:"col"}," ACTIONS ",-1),Fe={class:"text-center"},Ze={class:"mb-0"},He={class:"mb-0"},Me={class:"d-flex align-center"},Qe={key:1},Ge={class:"d-flex flex-column"},Je={class:"text-base font-weight-medium mb-0"},Ke={class:"text-disabled text-sm"},We={class:"text-center"},Xe={style:{width:"8rem"}},Ye=l("tr",null,[l("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),et=[Ye],tt={class:"text-sm text-disabled"},Gt={__name:"index",setup(E){const x=ce(),d=n(""),h=n(),v=n(10),r=n(1),_=n(1),c=n(0),V=n([]),D=n([]),P=n(""),R=n([]),z=n(""),S=n(!1),C=n(!1);let y=n();const Q=n([{id:1,name:"Paid"},{id:2,name:"Not Paid"}]),I=()=>{x.fetchSales({searchValue:d.value,status:h.value,perPage:v.value,currentPage:r.value,client_id:P.value,date:z.value}).then(s=>{k.value.isActive=!1,V.value=s.data.sales,D.value=s.data.clients,_.value=s.data.totalPage,c.value=s.data.totalSales}).catch(s=>{k.value.isActive=!1,console.log(s)})};q(()=>{I()}),q(()=>{r.value>_.value&&(r.value=_.value)});const G=te(()=>{const s=V.value.length?(r.value-1)*v.value+1:0,o=V.value.length+(r.value-1)*v.value;return`Showing ${s} to ${o} of ${c.value} entries`}),O=s=>s.balance>0?s.balance==s.total_amount?{variant:"error",icon:"tabler-x"}:{variant:"info",icon:"tabler-circle-half-2"}:s.balance<0?{variant:"warning",icon:"tabler-alert-circle"}:s.balance==0?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-chart-pie"},j=n(),J=s=>{S.value=!0,j.value=s},k=n({isActive:!0}),K=s=>{C.value=!0,y=s,console.log(y)},W=s=>{x.deleteSale(s).then(o=>{I()}).catch(o=>{console.log(o)})},$=()=>{k.value.isActive=!0,I()};return(s,o)=>{const X=re,Y=ae("RouterLink");return f(),w(Ce,null,{default:a(()=>[e(ve,{"model-value":i(k).isActive,class:"align-center justify-center"},{default:a(()=>[e(pe,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(Se,null,{default:a(()=>[i(V)?(f(),w(M,{key:0,id:"invoice-list"},{default:a(()=>[e(A,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[l("div",Pe,[ze,e(F,{modelValue:i(v),"onUpdate:modelValue":o[0]||(o[0]=t=>u(v)?v.value=t:null),density:"compact",items:[10,20,30,50,100]},null,8,["modelValue"])]),l("div",Ae,[e(_e,{clearable:"",modelValue:i(P),"onUpdate:modelValue":[o[1]||(o[1]=t=>u(P)?P.value=t:null),$],items:i(D),"item-value":"id","item-title":"name",label:"Client",placeholder:"Client"},null,8,["modelValue","items"])]),l("div",Ie,[l("div",Oe,[e(X,{modelValue:i(z),"onUpdate:modelValue":[o[2]||(o[2]=t=>u(z)?z.value=t:null),$],label:"Invoice Date"},null,8,["modelValue"])]),l("div",$e,[e(Ve,{modelValue:i(d),"onUpdate:modelValue":o[3]||(o[3]=t=>u(d)?d.value=t:null),placeholder:"Search Sale",density:"compact"},null,8,["modelValue"])]),l("div",Te,[e(F,{modelValue:i(h),"onUpdate:modelValue":[o[4]||(o[4]=t=>u(h)?h.value=t:null),$],label:"Select Status",clearable:"","item-value":"id","item-title":"name","clear-icon":"tabler-x","single-line":"",items:i(Q)},null,8,["modelValue","items"])]),l("div",Ue,[e(b,{"prepend-icon":"tabler-plus",to:{name:"apps-POS-sale-add"}},{default:a(()=>[g(" Create ")]),_:1})])])]),_:1}),e(Z),e(ge,{class:"text-no-wrap invoice-list-table"},{default:a(()=>[l("thead",Ne,[l("tr",null,[Be,l("th",Le,[e(m,{icon:"tabler-trending-up"})]),Ee,Re,je,qe])]),l("tbody",null,[(f(!0),U(ie,null,le(i(V),t=>(f(),U("tr",{key:t.id,style:{height:"3.75rem"}},[l("td",null,[e(Y,{to:{name:"apps-POS-sale-preview-id",params:{id:t.id}}},{default:a(()=>[g(" #"+p(t.id),1)]),_:2},1032,["to"])]),l("td",Fe,[e(xe,null,{activator:a(({props:T})=>[e(H,oe({size:30},T,{color:O(t).variant,variant:"tonal"}),{default:a(()=>[e(m,{size:20,icon:O(t).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[l("p",Ze,p(t.invoiceStatus),1),l("p",He," Balance: "+p(t.balance),1)]),_:2},1024)]),l("td",null,[l("div",Me,[e(H,{size:"34",color:O(t).variant,variant:"tonal",class:"me-3"},{default:a(()=>[t.avatar?(f(),w(be,{key:0,src:t.avatar},null,8,["src"])):(f(),U("span",Qe,p(i(de)(t.client.name)),1))]),_:2},1032,["color"]),l("div",Ge,[l("h6",Je,p(t.client.name),1),l("span",Ke,p(t.client.email),1)])])]),l("td",We,p(t.total_amount)+" DZD ",1),l("td",null,p(t.sale_date),1),l("td",Xe,[e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(m,{icon:"tabler-mail",size:22})]),_:1}),e(b,{icon:"",variant:"text",color:"default",size:"x-small",onClick:T=>K(t)},{default:a(()=>[e(m,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(b,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-sale-preview-id",params:{id:t.id}}},{default:a(()=>[e(m,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(m,{size:22,icon:"tabler-dots-vertical"}),e(he,{activator:"parent"},{default:a(()=>[e(De,null,{default:a(()=>[e(B,{value:"download"},{prepend:a(()=>[e(m,{size:"24",class:"me-3",icon:"tabler-download"})]),default:a(()=>[e(L,null,{default:a(()=>[g("Download")]),_:1})]),_:1}),e(B,{to:{name:"apps-POS-sale-edit-id",params:{id:t.id}}},{prepend:a(()=>[e(m,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:a(()=>[e(L,null,{default:a(()=>[g("Edit")]),_:1})]),_:2},1032,["to"]),e(B,{value:"payment",onClick:T=>J(t)},{prepend:a(()=>[e(m,{size:"24",class:"me-3",icon:"tabler-credit-card"})]),default:a(()=>[e(L,null,{default:a(()=>[g("Payment")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),se(l("tfoot",null,et,512),[[ne,!i(V).length]])]),_:1}),e(Z),e(A,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:a(()=>[l("span",tt,p(i(G)),1),e(ye),e(we,{modelValue:i(r),"onUpdate:modelValue":o[5]||(o[5]=t=>u(r)?r.value=t:null),size:"small","total-visible":5,length:i(_),onNext:o[6]||(o[6]=t=>R.value=[]),onPrev:o[7]||(o[7]=t=>R.value=[])},null,8,["modelValue","length"])]),_:1}),i(C)?(f(),w(ke,{key:0,isDialogVisible:i(C),"onUpdate:isDialogVisible":o[8]||(o[8]=t=>u(C)?C.value=t:null),sale:i(y),"onUpdate:sale":o[9]||(o[9]=t=>u(y)?y.value=t:y=t),onSaleData:W},null,8,["isDialogVisible","sale"])):N("",!0)]),_:1})):N("",!0)]),_:1}),i(S)?(f(),w(ue,{key:0,loading:i(k),data:i(j),isDrawerOpen:i(S),"onUpdate:isDrawerOpen":o[10]||(o[10]=t=>u(S)?S.value=t:null)},null,8,["loading","data","isDrawerOpen"])):N("",!0)]),_:1})}}};export{Gt as default};
