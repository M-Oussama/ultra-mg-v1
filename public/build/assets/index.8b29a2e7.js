import{k as n,Z as J,o as p,b as w,w as a,p as e,E as V,$ as U,A as K,r as W,q as i,m as l,D as x,C as u,c as I,a as X,x as m,O as Y,F as ee,H as te,I as ae,y as O}from"./main.77663dd9.js";import{a as le}from"./formatters.4acf44a4.js";import{u as oe}from"./useSaleStore.bda14526.js";import{_ as se}from"./InvoiceAddPaymentDrawer.73943e17.js";import{_ as ie}from"./DialogCloseBtn.d96fa5aa.js";import{V as F,c as k}from"./VCard.c055d8a9.js";import{V as b,a as ne}from"./VBtn.bdd4e121.js";import{V as re}from"./VDialog.cd64e648.js";import{a as ce}from"./VOverlay.2f2782de.js";import{V as E}from"./VSelect.9bffe68a.js";import{V as R}from"./VSpacer.c29660b8.js";import{V as de}from"./VTextField.4b80e92f.js";import{V as j}from"./VDivider.cb83f5dc.js";import{V as ue}from"./VTable.50540da2.js";import{V as me}from"./VTooltip.871475b2.js";import{V as q}from"./VAvatar.335f7277.js";import{V as pe}from"./VImg.58d34e1a.js";import{V as fe}from"./VMenu.b83b3261.js";import{V as ve,a as $,b as T}from"./VList.a315720d.js";import{V as _e}from"./VPagination.eb0a7e8e.js";import{a as Ve,V as ge}from"./VRow.fa18164f.js";import"./index.b522f886.js";import"./AppDateTimePicker.1c1f8ec6.js";import"./VField.8c8bb637.js";import"./index.89a862f5.js";import"./VInput.7ffd9f43.js";import"./router.70d9b9c2.js";import"./position.fab951c3.js";import"./easing.36b781ab.js";import"./errorsMiddleware.3f4965d3.js";import"./VForm.b79048a3.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.893e1916.js";/* empty css                   */import"./VCounter.35df89ad.js";import"./VNavigationDrawer.04db6711.js";import"./ssrBoot.cd3ddfd4.js";import"./scopeId.1ba9e2f0.js";import"./dialog-transition.5fa7afa9.js";import"./lazy.61af1865.js";import"./VCheckboxBtn.7833e682.js";import"./VSelectionControl.9d05c58e.js";import"./VChip.0c929494.js";const xe={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},sale:{type:Object,required:!0}},emits:["update:isDrawerOpen","saleData"],setup(B,{emit:g}){const c=B,h=n(),f=()=>{g("update:isDialogVisible",!1)};J(()=>c.sale,v=>{v&&(h.value=v.id||0)});const r=()=>{g("saleData",{id:c.sale.id}),g("update:isDialogVisible",!1)};return(v,d)=>{const _=ie;return p(),w(re,{modelValue:c.isDialogVisible,"onUpdate:modelValue":d[2]||(d[2]=D=>c.isDialogVisible=D),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(_,{onClick:d[0]||(d[0]=D=>f())}),e(F,{title:"Confirmation"},{default:a(()=>[e(k,null,{default:a(()=>[V(" Are you sure you want to delete this record ? ")]),_:1}),e(k,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(b,{color:"secondary",variant:"tonal",onClick:d[1]||(d[1]=D=>g("update:isDialogVisible",!1))},{default:a(()=>[V(" Disagree ")]),_:1}),e(b,{onClick:r},{default:a(()=>[V(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const be={class:"d-flex align-center",style:{width:"135px"}},he=l("span",{class:"text-no-wrap me-3"},"Show:",-1),De={class:"me-3"},ye={class:"d-flex align-center flex-wrap gap-4"},we={class:"invoice-list-filter"},Se={class:"invoice-list-filter"},Ce={class:"text-uppercase"},Pe=l("th",{scope:"col"}," #ID ",-1),ke={scope:"col",class:"text-center"},ze=l("th",{scope:"col"}," CLIENT ",-1),Ae=l("th",{scope:"col",class:"text-center"}," TOTAL ",-1),Ie=l("th",{scope:"col"}," Issued Date ",-1),Oe=l("th",{scope:"col"}," ACTIONS ",-1),$e={class:"text-center"},Te={class:"mb-0"},Be={class:"mb-0"},Le={class:"d-flex align-center"},Ne={key:1},Ue={class:"d-flex flex-column"},Ee={class:"text-base font-weight-medium mb-0"},Re={class:"text-disabled text-sm"},je={class:"text-center"},qe={style:{width:"8rem"}},Fe=l("tr",null,[l("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Ze=[Fe],He={class:"text-sm text-disabled"},Bt={__name:"index",setup(B){const g=oe(),c=n(""),h=n(),f=n(10),r=n(1),v=n(1),d=n(0),_=n([]),D=n([]),S=n(!1),C=n(!1);let y=n();const L=()=>{g.fetchSales({searchValue:c.value,status:h.value,perPage:f.value,currentPage:r.value}).then(s=>{P.value.isActive=!1,_.value=s.data.sales.data,v.value=s.data.totalPage,d.value=s.data.totalSales}).catch(s=>{P.value.isActive=!1,console.log(s)})};U(()=>{L()}),U(()=>{r.value>v.value&&(r.value=v.value)});const Z=K(()=>{const s=_.value.length?(r.value-1)*f.value+1:0,o=_.value.length+(r.value-1)*f.value;return`Showing ${s} to ${o} of ${d.value} entries`}),z=s=>s.balance>0?s.balance==s.total_amount?{variant:"error",icon:"tabler-x"}:{variant:"info",icon:"tabler-circle-half-2"}:s.balance<0?{variant:"warning",icon:"tabler-alert-circle"}:s.balance==0?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-chart-pie"},N=n(),H=s=>{S.value=!0,N.value=s},P=n({isActive:!0}),M=s=>{C.value=!0,y=s,console.log(y)},Q=s=>{g.deleteSale(s).then(o=>{L()}).catch(o=>{console.log(o)})};return(s,o)=>{const G=W("RouterLink");return p(),w(ge,null,{default:a(()=>[e(ce,{"model-value":i(P).isActive,class:"align-center justify-center"},{default:a(()=>[e(ne,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(Ve,null,{default:a(()=>[i(_)?(p(),w(F,{key:0,id:"invoice-list"},{default:a(()=>[e(k,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[l("div",be,[he,e(E,{modelValue:i(f),"onUpdate:modelValue":o[0]||(o[0]=t=>x(f)?f.value=t:null),density:"compact",items:[10,20,30,50,100]},null,8,["modelValue"])]),l("div",De,[e(b,{"prepend-icon":"tabler-plus",to:{name:"apps-POS-sale-add"}},{default:a(()=>[V(" Create Sale ")]),_:1})]),e(R),l("div",ye,[l("div",we,[e(de,{modelValue:i(c),"onUpdate:modelValue":o[1]||(o[1]=t=>x(c)?c.value=t:null),placeholder:"Search Sale",density:"compact"},null,8,["modelValue"])]),l("div",Se,[e(E,{modelValue:i(h),"onUpdate:modelValue":o[2]||(o[2]=t=>x(h)?h.value=t:null),label:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),e(j),e(ue,{class:"text-no-wrap invoice-list-table"},{default:a(()=>[l("thead",Ce,[l("tr",null,[Pe,l("th",ke,[e(u,{icon:"tabler-trending-up"})]),ze,Ae,Ie,Oe])]),l("tbody",null,[(p(!0),I(ee,null,X(i(_),t=>(p(),I("tr",{key:t.id,style:{height:"3.75rem"}},[l("td",null,[e(G,{to:{name:"apps-POS-sale-preview-id",params:{id:t.id}}},{default:a(()=>[V(" #"+m(t.id),1)]),_:2},1032,["to"])]),l("td",$e,[e(me,null,{activator:a(({props:A})=>[e(q,Y({size:30},A,{color:z(t).variant,variant:"tonal"}),{default:a(()=>[e(u,{size:20,icon:z(t).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[l("p",Te,m(t.invoiceStatus),1),l("p",Be," Balance: "+m(t.balance),1)]),_:2},1024)]),l("td",null,[l("div",Le,[e(q,{size:"34",color:z(t).variant,variant:"tonal",class:"me-3"},{default:a(()=>[t.avatar?(p(),w(pe,{key:0,src:t.avatar},null,8,["src"])):(p(),I("span",Ne,m(i(le)(t.client.name)),1))]),_:2},1032,["color"]),l("div",Ue,[l("h6",Ee,m(t.client.name),1),l("span",Re,m(t.client.email),1)])])]),l("td",je,m(t.total_amount)+" DZD ",1),l("td",null,m(t.sale_date),1),l("td",qe,[e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(u,{icon:"tabler-mail",size:22})]),_:1}),e(b,{icon:"",variant:"text",color:"default",size:"x-small",onClick:A=>M(t)},{default:a(()=>[e(u,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(b,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-sale-preview-id",params:{id:t.id}}},{default:a(()=>[e(u,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(u,{size:22,icon:"tabler-dots-vertical"}),e(fe,{activator:"parent"},{default:a(()=>[e(ve,null,{default:a(()=>[e($,{value:"download"},{prepend:a(()=>[e(u,{size:"24",class:"me-3",icon:"tabler-download"})]),default:a(()=>[e(T,null,{default:a(()=>[V("Download")]),_:1})]),_:1}),e($,{to:{name:"apps-POS-sale-edit-id",params:{id:t.id}}},{prepend:a(()=>[e(u,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:a(()=>[e(T,null,{default:a(()=>[V("Edit")]),_:1})]),_:2},1032,["to"]),e($,{value:"payment",onClick:A=>H(t)},{prepend:a(()=>[e(u,{size:"24",class:"me-3",icon:"tabler-credit-card"})]),default:a(()=>[e(T,null,{default:a(()=>[V("Payment")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),te(l("tfoot",null,Ze,512),[[ae,!i(_).length]])]),_:1}),e(j),e(k,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:a(()=>[l("span",He,m(i(Z)),1),e(R),e(_e,{modelValue:i(r),"onUpdate:modelValue":o[3]||(o[3]=t=>x(r)?r.value=t:null),size:"small","total-visible":5,length:i(v),onNext:o[4]||(o[4]=t=>D.value=[]),onPrev:o[5]||(o[5]=t=>D.value=[])},null,8,["modelValue","length"])]),_:1}),i(C)?(p(),w(xe,{key:0,isDialogVisible:i(C),"onUpdate:isDialogVisible":o[6]||(o[6]=t=>x(C)?C.value=t:null),sale:i(y),"onUpdate:sale":o[7]||(o[7]=t=>x(y)?y.value=t:y=t),onSaleData:Q},null,8,["isDialogVisible","sale"])):O("",!0)]),_:1})):O("",!0)]),_:1}),i(S)?(p(),w(se,{key:0,loading:i(P),data:i(N),isDrawerOpen:i(S),"onUpdate:isDrawerOpen":o[8]||(o[8]=t=>x(S)?S.value=t:null)},null,8,["loading","data","isDrawerOpen"])):O("",!0)]),_:1})}}};export{Bt as default};
