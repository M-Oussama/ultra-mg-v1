import{k as n,o as p,b as w,w as l,m as o,p as e,C as b,q as s,P as W,D as v,be as X,E as C,ay as q,$ as O,Z as ee,A as te,r as ae,c as N,F as le,a as se,x as z,y as F,H as oe,I as re}from"./main.e3ae6f5b.js";import{r as M}from"./validators.330a354f.js";import{u as ne}from"./useSaleStore.33d18f08.js";import{V as j}from"./VSpacer.50e7ecc1.js";import{V as f,a as B}from"./VBtn.78b9f864.js";import{V as Y,c as $}from"./VCard.9574192c.js";import{V as ie}from"./VForm.724a7186.js";import{V as H,a as P}from"./VRow.307db058.js";import{V as E}from"./VAutocomplete.8e6d4b59.js";import{V as de}from"./VNavigationDrawer.2a3e31b0.js";import"./AppDateTimePicker.fa89fced.js";import{_ as ue}from"./ConfirmationDialog.1fa5b90c.js";import{s as R,e as L}from"./errorsMiddleware.cd79b49a.js";import{u as me}from"./useAttendanceStore.8b7f1f54.js";import{a as ce}from"./VOverlay.bef3a4a8.js";import{V as I}from"./VDivider.04b9ef9a.js";import{V as pe}from"./VSelect.e8db8923.js";import{V as fe}from"./VTextField.c4710a67.js";import{V as ve}from"./VTable.24eac033.js";import{V as Ve}from"./VAvatar.a66dff35.js";import{V as _e}from"./VImg.a8f9a1c8.js";import{V as ye}from"./VPagination.29fbda3c.js";import"./index.b522f886.js";import"./router.92e08cce.js";import"./position.4c99774d.js";import"./VInput.ebff45cb.js";import"./index.ba8dc909.js";import"./forwardRefs.c003b6b8.js";import"./filter.2c1c4484.js";import"./VList.d6dc74e3.js";import"./VMenu.d6d893ca.js";import"./scopeId.55b8accf.js";import"./dialog-transition.cc00eae2.js";import"./easing.36b781ab.js";import"./VCheckboxBtn.41b91637.js";import"./VSelectionControl.90a7537b.js";import"./VChip.dd80b8e5.js";import"./ssrBoot.170b97eb.js";import"./VField.93385836.js";import"./DialogCloseBtn.91cc9156.js";import"./VDialog.6cfe2dfa.js";import"./lazy.f3535b64.js";/* empty css                   */import"./VCounter.a137105a.js";const he={class:"d-flex align-center pa-6 pb-1"},xe=o("h6",{class:"text-h6"}," Add Attendance ",-1),ge={__name:"AddNewAttendanceDrawer",props:{isDrawerOpen:{type:null,required:!0},attendances:{type:null,required:!0},months:{type:null,required:!0},years:{type:null,required:!0}},emits:["update:isDrawerOpen","attendanceData"],setup(T,{emit:y}){const V=T,A=n(!1),i=n();ne();const g=n({month:"",year:""});n(),n({id:-1});const _=()=>{y("update:isDrawerOpen",!1),q(()=>{var c,r;(c=i.value)==null||c.reset(),(r=i.value)==null||r.resetValidation()})},m=()=>{var c;(c=i.value)==null||c.validate().then(({valid:r})=>{r&&(y("attendanceData",{attendance:g}),y("update:isDrawerOpen",!1),q(()=>{var d,x;(d=i.value)==null||d.reset(),(x=i.value)==null||x.resetValidation()}))})},h=c=>{y("update:isDrawerOpen",c)};return(c,r)=>(p(),w(de,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":V.isDrawerOpen,"onUpdate:modelValue":h},{default:l(()=>[o("div",he,[xe,e(j),e(f,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:_},{default:l(()=>[e(b,{size:"18",icon:"tabler-x"})]),_:1})]),e(s(W),{options:{wheelPropagation:!1}},{default:l(()=>[e(Y,{flat:""},{default:l(()=>[e($,null,{default:l(()=>[e(ie,{ref_key:"refForm",ref:i,modelValue:s(A),"onUpdate:modelValue":r[2]||(r[2]=d=>v(A)?A.value=d:null),onSubmit:X(m,["prevent"])},{default:l(()=>[e(H,null,{default:l(()=>[e(P,{cols:"12"},{default:l(()=>[e(E,{modelValue:s(g).month,"onUpdate:modelValue":r[0]||(r[0]=d=>s(g).month=d),items:V.months,rules:[s(M)],"item-value":"id","item-title":"name",label:"Month"},null,8,["modelValue","items","rules"])]),_:1}),e(P,{cols:"12"},{default:l(()=>[e(E,{modelValue:s(g).year,"onUpdate:modelValue":r[1]||(r[1]=d=>s(g).year=d),items:V.years,rules:[s(M)],label:"Year"},null,8,["modelValue","items","rules"])]),_:1}),e(P,{cols:"12"},{default:l(()=>[e(f,{type:"submit",class:"me-3"},{default:l(()=>[C(" Submit ")]),_:1}),e(f,{type:"reset",variant:"tonal",color:"secondary",onClick:_},{default:l(()=>[C(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};const we={class:"me-3",style:{width:"100px"}},be={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ae={style:{width:"6rem"}},De=o("thead",null,[o("tr",null,[o("th",{scope:"col"}," ID "),o("th",{scope:"col"}," Month "),o("th",{scope:"col"}," Year "),o("th",{scope:"col"}," ACTIONS ")])],-1),ke={class:"d-flex align-center"},ze={key:1},Ce={class:"d-flex flex-column"},Se={class:"text-base"},Ue={class:"text-capitalize text-base font-weight-semibold"},Ne={class:"text-center",style:{width:"5rem"}},Pe=o("tr",null,[o("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Oe=[Pe],Fe={class:"text-sm text-disabled"},kt={__name:"index",setup(T){const y=me(),V=n(""),A=n(!1),i=n({isActive:!0}),g=n(!0);n(),n(),n();const _=n(10),m=n(1),h=n(1),c=n(0);let r=n([]),d=[],x=[];const S=()=>{i.value.isActive=!0,y.fetchAttendances({searchValue:V.value,perPage:_.value,currentPage:m.value}).then(u=>{r.value=u.data.attendances.data,d=u.data.months,x=u.data.years,h.value=u.data.totalPage,c.value=u.data.totalAttendances,A.value=!1,i.value.isActive=!1}).catch(u=>{console.error(u),i.value.isActive=!1})};O(S),O(()=>{m.value>h.value&&(m.value=h.value)}),ee(V,()=>{S()});const U=n(!1);n(!1);const D=n(!1);let k=n();O(()=>{m.value>h.value&&(m.value=h.value)});const Q=te(()=>{const u=r.value.length?(m.value-1)*_.value+1:0,a=r.value.length+(m.value-1)*_.value;return`Showing ${u} to ${a} of ${c.value} entries`}),Z=u=>{i.value.isActive=!0,y.addAttendance(u).then(a=>{R(a.data.message),i.value.isActive=!1,S()}).catch(a=>{i.value.isActive=!1,L(a.response.data.message)})},G=u=>{i.value.isActive=!0,y.deleteAttendance(u).then(a=>{i.value.isActive=!1,R(a.data.message)}).catch(a=>{L(a.data.message),i.value.isActive=!1}),S()},J=u=>{D.value=!0,k=u};return(u,a)=>{const K=ae("RouterLink");return p(),N("section",null,[e(H,null,{default:l(()=>[e(ce,{"model-value":s(i).isActive,class:"align-center justify-center"},{default:l(()=>[e(B,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(P,{cols:"12"},{default:l(()=>[e(Y,{title:"Attendance"},{default:l(()=>[e(I),e($,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[o("div",we,[e(pe,{modelValue:s(_),"onUpdate:modelValue":a[0]||(a[0]=t=>v(_)?_.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(j),o("div",be,[o("div",Ae,[s(A)?(p(),w(B,{key:0,indeterminate:"",color:"primary"})):(p(),w(fe,{key:1,onInput:a[1]||(a[1]=t=>g.value=!0),ref:"searchField",modelValue:s(V),"onUpdate:modelValue":a[2]||(a[2]=t=>v(V)?V.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(f,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:l(()=>[C(" Export ")]),_:1}),e(f,{"prepend-icon":"tabler-plus",onClick:a[3]||(a[3]=t=>U.value=!0)},{default:l(()=>[C(" New Attendance ")]),_:1})])]),_:1}),e(I),e(ve,{class:"text-no-wrap"},{default:l(()=>[De,o("tbody",null,[(p(!0),N(le,null,se(s(r),t=>(p(),N("tr",{key:t.id,style:{height:"3.75rem"}},[o("td",null,z(t.id),1),o("td",null,[o("div",ke,[e(Ve,{variant:"tonal",class:"me-3",size:"38"},{default:l(()=>[t.avatar?(p(),w(_e,{key:0,src:t.avatar},null,8,["src"])):(p(),N("span",ze,z(s(d)[t.month-1].name.toUpperCase().charAt(0)),1))]),_:2},1024),o("div",Ce,[o("h6",Se,[e(K,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"font-weight-medium user-list-name"},{default:l(()=>[C(z(s(d)[t.month-1].name),1)]),_:2},1032,["to"])])])])]),o("td",null,[o("span",Ue,z(t.year),1)]),o("td",Ne,[t.active?F("",!0):(p(),w(f,{key:0,icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-attendance-add-id",params:{id:t.id}}},{default:l(()=>[e(b,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"])),t.active?(p(),w(f,{key:1,icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-attendance-edit-id",params:{id:t.id}}},{default:l(()=>[e(b,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"])):F("",!0),e(f,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-attendance-preview-id",params:{id:t.id}}},{default:l(()=>[e(b,{size:"22",icon:"tabler-viewfinder"})]),_:2},1032,["to"]),e(f,{icon:"",size:"x-small",color:"default",variant:"text",onClick:Ie=>J(t)},{default:l(()=>[e(b,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(f,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-attendance-employees-id",params:{id:t.id}}},{default:l(()=>[e(b,{size:"22",icon:"tabler-eye"})]),_:2},1032,["to"]),e(f,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(b,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),oe(o("tfoot",null,Oe,512),[[re,!s(r).length]])]),_:1}),e(I),e($,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:l(()=>[o("span",Fe,z(s(Q)),1),e(ye,{modelValue:s(m),"onUpdate:modelValue":a[4]||(a[4]=t=>v(m)?m.value=t:null),size:"small","total-visible":5,length:s(h)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ge,{isDrawerOpen:s(U),"onUpdate:isDrawerOpen":a[5]||(a[5]=t=>v(U)?U.value=t:null),attendances:s(r),"onUpdate:attendances":a[6]||(a[6]=t=>v(r)?r.value=t:r=t),months:s(d),"onUpdate:months":a[7]||(a[7]=t=>v(d)?d.value=t:d=t),years:s(x),"onUpdate:years":a[8]||(a[8]=t=>v(x)?x.value=t:x=t),onAttendanceData:Z},null,8,["isDrawerOpen","attendances","months","years"]),s(D)?(p(),w(ue,{key:0,isDialogVisible:s(D),"onUpdate:isDialogVisible":a[9]||(a[9]=t=>v(D)?D.value=t:null),attendance:s(k),"onUpdate:attendance":a[10]||(a[10]=t=>v(k)?k.value=t:k=t),onEmployeeData:G},null,8,["isDialogVisible","attendance"])):F("",!0)])}}};export{kt as default};
