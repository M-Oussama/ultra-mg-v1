import{k as i,$ as R,Z as ot,A as st,r as nt,o as r,c as m,p as a,w as o,q as n,m as e,D as c,b as v,E as A,F as U,a as P,x as d,C as T,H as it,I as rt,y as dt}from"./main.3b71879b.js";import{_ as ut}from"./DialogCloseBtn.702af0ba.js";import{u as ct,_ as pt,a as mt,b as _t,c as ft,E as vt,d as ht}from"./jspdf.plugin.autotable.0566af52.js";import{a as xt}from"./VOverlay.67ba7c7a.js";import{a as Q,V as x}from"./VBtn.d800b652.js";import{a as W,V as M}from"./VRow.9f658dda.js";import{V as Y,c as F}from"./VCard.bb3ef269.js";import{V as E}from"./VDivider.4e84bd5e.js";import{V as Vt}from"./VSelect.3c75d105.js";import{V as gt}from"./VSpacer.5caba3e1.js";import{V as wt}from"./VTextField.400a1cda.js";import{V as j}from"./VTable.01134d2f.js";import{V as yt}from"./VAvatar.02cdd356.js";import{V as Ct}from"./VImg.1082014e.js";import{V as bt}from"./VPagination.86f58f2d.js";import{V as Dt,a as kt}from"./VTabs.76eed923.js";import{V as St,a as L}from"./VWindowItem.01b3d9f4.js";import{V as zt}from"./VDialog.f0348b72.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VForm.6348b5cb.js";import"./VInput.6314292f.js";import"./router.1b5492c7.js";import"./index.db28d725.js";import"./forwardRefs.c003b6b8.js";import"./VAutocomplete.c03d7df7.js";import"./filter.632dd7bd.js";import"./VList.27c20723.js";import"./VMenu.381eef27.js";import"./scopeId.90dbec0f.js";import"./dialog-transition.00a8b510.js";import"./easing.36b781ab.js";import"./VCheckboxBtn.272d23a9.js";import"./VSelectionControl.043545df.js";import"./VChip.3f4aa48b.js";import"./VNavigationDrawer.063300b1.js";import"./ssrBoot.5d5196f4.js";import"./vue3-apexcharts.common.282688c7.js";import"./vue.runtime.esm-bundler.df9ea983.js";import"./lazy.c33cce4c.js";import"./position.38bf95c5.js";/* empty css                   */import"./VField.965a93e8.js";import"./VCounter.70e97725.js";import"./VSlideGroup.d2f1365a.js";const At={class:"me-3",style:{width:"80px"}},Ut={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Pt={style:{width:"9rem"}},Tt=e("thead",null,[e("tr",null,[e("th",{scope:"col"}," ID "),e("th",{scope:"col"}," Client "),e("th",{scope:"col"}," City "),e("th",{scope:"col"}," Phone "),e("th",{scope:"col"}," ACTIONS ")])],-1),$t={class:"d-flex align-center"},It={key:1},Nt={class:"d-flex flex-column"},Ot={class:"text-base"},Bt={class:"text-sm text-disabled"},Et={class:"text-capitalize text-base font-weight-semibold"},Lt={class:"text-capitalize text-base font-weight-semibold"},Rt={class:"text-center",style:{width:"5rem"}},Ft=e("tr",null,[e("td",{colspan:"7",class:"text-center"}," No data available ")],-1),jt=[Ft],qt={class:"text-sm text-disabled"},Ht=e("thead",null,[e("tr",null,[e("th",{class:"text-caption"}," Product "),e("th",{class:"text-caption"}," Date "),e("th",{class:"text-caption"}," Quantity "),e("th",{class:"text-caption"}," Price "),e("th",{class:"text-caption"}," Total ")])],-1),Qt={class:"text-caption"},Wt={class:"text-caption"},Mt={class:"text-caption"},Yt={class:"text-caption"},Zt={class:"text-caption"},Gt=e("td",null,null,-1),Jt=e("td",null,null,-1),Kt=e("td",null,null,-1),Xt=e("td",{class:"text-caption"}," Total ",-1),te={class:"text-caption"},ee=e("td",null,null,-1),le=e("td",null,null,-1),ae=e("td",null,null,-1),oe=e("td",{class:"text-caption"}," Payment ",-1),se={class:"text-caption"},ne=e("td",null,null,-1),ie=e("td",null,null,-1),re=e("td",null,null,-1),de=e("td",{class:"text-caption"}," Rest ",-1),ue={class:"text-caption"},ce=e("thead",null,[e("tr",null,[e("th",null," Date "),e("th",null," Amount ")])],-1),ol={__name:"index",setup(pe){const $=ct(),b=i(""),q=i(!1),Z=i(!0),V=i(!1);i(),i(),i();const w=i(10),p=i(1),y=i(1),H=i(0),g=i([]);let C=i([]),D=i([]),h=i("Appetizers"),I=i({isActive:!1});const _=[{id:1,name:"Home"},{id:2,name:"Record"},{id:3,name:"Payments"},{id:4,name:"State"}],k=()=>{I.value.isActive=!0,$.fetchClients({searchValue:b.value,perPage:w.value,currentPage:p.value}).then(s=>{I.value.isActive=!1,C.value=s.data.clients.data,console.log(s.data.clientsAll),D.value=s.data.clientsAll,console.log(C.value),y.value=s.data.totalPage,g.value=s.data.cities,H.value=s.data.totalClients,q.value=!1}).catch(s=>{console.error(s),I.value.isActive=!1})};R(k),R(()=>{p.value>y.value&&(p.value=y.value)}),ot(b,()=>{k()});const N=i(!1),O=i(!1),S=i(!1);let u=i();R(()=>{p.value>y.value&&(p.value=y.value)});const G=st(()=>{const s=C.value.length?(p.value-1)*w.value+1:0,l=C.value.length+(p.value-1)*w.value;return`Showing ${s} to ${l} of ${H.value} entries`}),J=s=>{$.addClient(s).then(l=>{k()}).catch(l=>{console.log(l)})},K=s=>{$.updateClient(s).then(l=>{k()}).catch(l=>{console.log(l)})},X=s=>{$.deleteClient(s).then(l=>{k()}).catch(l=>{console.log(l)})},tt=s=>{O.value=!0,u=s},et=s=>{S.value=!0,u=s},lt=s=>{V.value=!0,u=s},at=()=>{var s=[],l=1;s.push(["ID","Date","Sale"]),console.log(D);for(let t=0;t<D._rawValue.length;t++)s.push([l,D._rawValue[t].name,D._rawValue[t].surname]),l++;console.log(s);const B=new vt({orientation:"portrait",format:"letter"});let z=new Date;String(z.getDate()).padStart(2,"0"),String(z.getMonth()+1).padStart(2,"0"),z.getFullYear(),ht(B,{columnStyles:{0:{halign:"center"}},margin:{top:40,left:10},body:s}),B.save("table.pdf")};return(s,l)=>{const B=nt("RouterLink"),z=ut;return r(),m("section",null,[a(M,null,{default:o(()=>[a(xt,{"model-value":n(I).isActive,class:"align-center justify-center"},{default:o(()=>[a(Q,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),a(W,{cols:"12"},{default:o(()=>[a(Y,{title:"Clients"},{default:o(()=>[a(E),a(F,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[e("div",At,[a(Vt,{modelValue:n(w),"onUpdate:modelValue":l[0]||(l[0]=t=>c(w)?w.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(gt),e("div",Ut,[e("div",Pt,[n(q)?(r(),v(Q,{key:0,indeterminate:"",color:"primary"})):(r(),v(wt,{key:1,onInput:l[1]||(l[1]=t=>Z.value=!0),ref:"searchField",modelValue:n(b),"onUpdate:modelValue":l[2]||(l[2]=t=>c(b)?b.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),a(x,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:at},{default:o(()=>[A(" Export ")]),_:1}),a(x,{"prepend-icon":"tabler-plus",onClick:l[3]||(l[3]=t=>N.value=!0)},{default:o(()=>[A(" Add New Client ")]),_:1})])]),_:1}),a(E),a(j,{class:"text-no-wrap"},{default:o(()=>[Tt,e("tbody",null,[(r(!0),m(U,null,P(n(C),t=>(r(),m("tr",{key:t.id,style:{height:"3.75rem"}},[e("td",null,d(t.id),1),e("td",null,[e("div",$t,[a(yt,{variant:"tonal",class:"me-3",size:"38"},{default:o(()=>[t.avatar?(r(),v(Ct,{key:0,src:t.avatar},null,8,["src"])):(r(),m("span",It,d(t.name.toUpperCase().charAt(0)),1))]),_:2},1024),e("div",Nt,[e("h6",Ot,[a(B,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"font-weight-medium user-list-name"},{default:o(()=>[A(d(t.name),1)]),_:2},1032,["to"])]),e("span",Bt,"@"+d(t.email),1)])])]),e("td",null,[e("span",Et,d(t.city.name),1)]),e("td",null,[e("span",Lt,d(t.phone),1)]),e("td",Rt,[a(x,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-client-log-id",params:{id:t.id}}},{default:o(()=>[a(T,{size:"22",icon:"tabler-currency-dollar"})]),_:2},1032,["to"]),a(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:f=>lt(t)},{default:o(()=>[a(T,{size:"22",icon:"tabler-shopping-cart"})]),_:2},1032,["onClick"]),a(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:f=>tt(t)},{default:o(()=>[a(T,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),a(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:f=>et(t)},{default:o(()=>[a(T,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),a(x,{icon:"",size:"x-small",color:"default",variant:"text"},{default:o(()=>[a(T,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),it(e("tfoot",null,jt,512),[[rt,!n(C).length]])]),_:1}),a(E),a(F,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[e("span",qt,d(n(G)),1),a(bt,{modelValue:n(p),"onUpdate:modelValue":l[4]||(l[4]=t=>c(p)?p.value=t:null),size:"small","total-visible":5,length:n(y)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),a(zt,{modelValue:n(V),"onUpdate:modelValue":l[9]||(l[9]=t=>c(V)?V.value=t:null),scrollable:"",class:"v-dialog-sm","max-width":"700",width:"auto","content-class":"scrollable-dialog"},{default:o(()=>[a(z,{onClick:l[5]||(l[5]=t=>V.value=!n(V))}),a(Y,{title:" "},{default:o(()=>[a(F,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[a(Dt,{modelValue:n(h),"onUpdate:modelValue":l[6]||(l[6]=t=>c(h)?h.value=t:h=t),grow:""},{default:o(()=>[(r(),m(U,null,P(_,t=>a(kt,{key:t.id,value:t.id},{default:o(()=>[A(d(t.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),a(E),a(St,{modelValue:n(h),"onUpdate:modelValue":l[7]||(l[7]=t=>c(h)?h.value=t:h=t),class:"mt-6 pl-3 pa-1"},{default:o(()=>[(r(),v(L,{key:_[0].id,value:_[0].id,width:"150%"},{default:o(()=>[a(M,null,{default:o(()=>[a(W,{cols:"6",md:"6"},{default:o(()=>[a(pt)]),_:1})]),_:1})]),_:1},8,["value"])),(r(),v(L,{key:_[1].id,value:_[1].id,class:"mt-0",style:{"margin-top":"0 !important"}},{default:o(()=>[(r(!0),m(U,null,P(n(u).sales,t=>(r(),v(j,{class:"text-no-wrap mt-0 mb-10"},{default:o(()=>[Ht,e("tbody",null,[(r(!0),m(U,null,P(t.sale_items,f=>(r(),m("tr",{key:f.id},[e("td",Qt,d(f.product.name),1),e("td",Wt,d(f.sale_date),1),e("td",Mt,d(f.quantity),1),e("td",Yt,d(f.price),1),e("td",Zt,d(f.total_price),1)]))),128)),e("tr",null,[Gt,Jt,Kt,Xt,e("td",te,d(t.total_amount),1)]),e("tr",null,[ee,le,ae,oe,e("td",se,d(t.regulation),1)]),e("tr",null,[ne,ie,re,de,e("td",ue,d(t.balance),1)])])]),_:2},1024))),256))]),_:1},8,["value"])),(r(),v(L,{key:_[2].id,value:_[2].id,class:"mt-0",style:{width:"-webkit-fill-available"},width:"100%"},{default:o(()=>[a(j,{class:"text-no-wrap mt-0",style:{width:"-webkit-fill-available"}},{default:o(()=>[ce,e("tbody",null,[(r(!0),m(U,null,P(n(u).payments,t=>(r(),m("tr",{key:t.id},[e("td",null,d(t.payment_date),1),e("td",null,d(t.amount_paid),1)]))),128))])]),_:1})]),_:1},8,["value"])),(r(),v(L,{key:_[3].id,value:_[3].id},null,8,["value"]))]),_:1},8,["modelValue"]),a(x,{onClick:l[8]||(l[8]=t=>V.value=!1)},{default:o(()=>[A(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(mt,{isDrawerOpen:n(N),"onUpdate:isDrawerOpen":l[10]||(l[10]=t=>c(N)?N.value=t:null),cities:n(g),"onUpdate:cities":l[11]||(l[11]=t=>c(g)?g.value=t:null),onClientData:J},null,8,["isDrawerOpen","cities"]),a(_t,{isDrawerOpen:n(O),"onUpdate:isDrawerOpen":l[12]||(l[12]=t=>c(O)?O.value=t:null),client:n(u),"onUpdate:client":l[13]||(l[13]=t=>c(u)?u.value=t:u=t),cities:n(g),"onUpdate:cities":l[14]||(l[14]=t=>c(g)?g.value=t:null),onClientData:K},null,8,["isDrawerOpen","client","cities"]),n(S)?(r(),v(ft,{key:0,isDialogVisible:n(S),"onUpdate:isDialogVisible":l[15]||(l[15]=t=>c(S)?S.value=t:null),client:n(u),"onUpdate:client":l[16]||(l[16]=t=>c(u)?u.value=t:u=t),onClientData:X},null,8,["isDialogVisible","client"])):dt("",!0)])}}};export{ol as default};
