import{bd as G,k as _,Z,q as e,o as r,c as m,p as s,w as l,m as t,x as o,b,y as c,F as M,a as Q,E as p,D as V,bf as B}from"./main.ccc6aae0.js";import{_ as Y}from"./InvoiceAddPaymentDrawer.f02078b8.js";import{_ as H}from"./InvoiceSendInvoiceDrawer.9c72287f.js";import{u as J}from"./useSaleStore.1640952e.js";import{a as W,V as S}from"./VBtn.7efa8e0f.js";import{a as X}from"./VOverlay.0ad0cca7.js";import{a as x,V as A}from"./VRow.a17ab33e.js";import{V as P,c as w}from"./VCard.36c7adfd.js";import{V as k}from"./VDivider.09896c6c.js";import{V as tt}from"./VTable.484ee967.js";import{V as v}from"./VInput.1586f7cc.js";import{V as I}from"./VSwitch.45f4ff8e.js";import{V as L}from"./VAutocomplete.5bdf49b5.js";import{V as K}from"./VTextField.8db2e7e8.js";import"./AppDateTimePicker.be59b953.js";import"./VField.8b77e1e2.js";import"./index.720d3b34.js";import"./position.ea536dab.js";import"./router.25b57325.js";import"./easing.36b781ab.js";import"./errorsMiddleware.ca8f0215.js";import"./successMiddleware.53303d8d.js";import"./VSpacer.fc3a499d.js";import"./VAvatar.cb7dc9a5.js";import"./VImg.e193e870.js";import"./VForm.8ba2a0de.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.815956f4.js";/* empty css                   */import"./VCounter.d2fed1b1.js";import"./VNavigationDrawer.df836fef.js";import"./ssrBoot.81f110ad.js";import"./VChip.768b9a43.js";import"./lazy.ab6dcefa.js";import"./VSelectionControl.e824dbee.js";import"./VSelect.b041d3dc.js";import"./VList.54d6dfac.js";import"./dialog-transition.e2b69798.js";import"./VMenu.01138ff3.js";import"./scopeId.1409e92e.js";import"./VCheckboxBtn.cfb39e43.js";import"./filter.7282d4f9.js";const et={key:0},st={class:"ma-sm-3"},ot={class:"d-flex align-center mb-6"},lt={class:"font-weight-bold text-xl"},it={class:"mb-0"},dt=t("p",{class:"mb-0"}," KASR EL ABTALE, 19000, SETIF ",-1),at={class:"mb-0"},nt={class:"mb-0"},rt={class:"mt-4 ma-sm-4"},ct={class:"font-weight-medium text-xl mb-2"},mt={class:"mb-2"},ut=t("span",null,"Date : ",-1),_t={class:"font-weight-semibold"},pt={key:0,class:"mb-2"},ft=t("span",null,"Payment: ",-1),xt={class:"font-weight-semibold"},vt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},ht=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),bt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},wt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},yt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),gt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},Vt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},kt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),Nt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},jt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ft=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),Dt={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},Tt={class:"font-weight-medium text-sm mb-2"},Ct={key:0,class:"mb-2 text-sm"},St=t("span",null,"Payment: ",-1),It={class:"font-weight-semibold"},At={class:"mb-2 text-sm"},Pt=t("span",null,"Date : ",-1),Rt={class:"font-weight-semibold"},Ut={class:"v-col-md-6"},Ot=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center"},null,-1),Et={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Zt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Client ",-1),Bt={class:"v-col-md-10 border-left padding-8 data-font"},Lt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Kt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Address ",-1),$t={class:"v-col-md-10 border-left padding-8 data-font"},qt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},zt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Phone ",-1),Gt={class:"v-col-md-10 border-left padding-8 data-font"},Mt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Qt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Email ",-1),Yt={class:"v-col-md-10 border-left padding-8 data-font"},Ht=t("div",{class:"v-col-md-2"},null,-1),Jt={key:0,class:"v-col-md-4"},Wt=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),Xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},te=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),ee={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},se={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},oe=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),le={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ie={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},de=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),ae={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ne={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},re=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),ce={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},me={key:1,class:"v-col-md-4"},ue=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),_e={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},pe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Facture ",-1),fe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},xe={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ve=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Payment Type ",-1),he={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},be={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},we=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Date ",-1),ye={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},ge=t("th",{class:"text-sm-caption",scope:"col"}," ID ",-1),Ve={key:0,class:"text-sm-caption",scope:"col"},ke=t("th",{class:"text-sm-caption",scope:"col"}," name ",-1),Ne={key:1,scope:"col",class:"text-center text-sm-caption"},je=t("th",{scope:"col",class:"text-center text-sm-caption"}," QTY ",-1),Fe={key:2,scope:"col",class:"text-center text-sm-caption"},De={class:"text-no-wrap text-sm-caption"},Te={key:0,class:"text-no-wrap text-sm-caption"},Ce={class:"text-no-wrap"},Se={class:"text-sm-caption mb-0"},Ie={key:1,class:"text-center text-sm-caption"},Ae={class:"text-center text-sm-caption"},Pe={key:2,class:"text-center text-sm-caption"},Re={class:"my-2 mx-sm-5 v-col-md-6"},Ue={key:0,class:"mt-10 d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Oe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Ancien solde ",-1),Ee={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Ze={key:1,class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Be=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Nouveau solde ",-1),Le={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Ke={class:"my-2 mx-sm-4 v-col-md-4"},$e={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},qe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Total ",-1),ze={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Ge={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Me=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Paiement ",-1),Qe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Ye={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},He=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Nouveau solde ",-1),Je={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},We=t("div",{class:"d-flex mx-sm-4"},[t("h6",{class:"text-sm font-weight-semibold me-1"}," Note: "),t("span",null,"Merci pour votre r\xE8glement rapide. Nous appr\xE9cions votre collaboration ")],-1),Xe={class:"d-flex align-center justify-space-between mt-5"},ts={class:"d-flex align-center justify-space-between"},es={class:"d-flex align-center justify-space-between"},ss={class:"d-flex align-center justify-space-between"},os={key:0},ls={__name:"[id]",setup(is){const $=J(),R=G(),a=_({id:1,balance:0,total_amount:0,sale_date:null,client_id:1,sale_status:{id:-1,name:""},amount_letter:"",notes:"",client:{id:-1,name:"",surname:"",address:"",email:"",phone:"",NRC:"",NIF:"",NART:"",NIS:""},sale_items:[]}),i=_({sku:!1,invoice:!1,price:!0,paymentType:"Espece",sold:!1}),y=_(0),U=_();let g=_([]);const N=_(1),f=_({name:"",address:"",phone:"",email:"",NRC:"",NIF:"",NART:"",NIS:"",capitale:""});let j=_([]);const O=_(!1);_();const F=_(!1),D=_(!1),E=_({isActive:!1});$.fetchSale(Number(R.params.id)).then(u=>{a.value=u.data.sale,y.value=u.data.sold,U.value={...a.value.client},j=u.data.companies,g=u.data.clients,f.value=j[0],O.value=!0}).catch(u=>{console.log(u)});const q=()=>{window.print()};Z(N,(u,n,d)=>{f.value=j[u-1],console.log(f)});const z=u=>u.name+" "+u.surname,T=_("Facture Proforma"),C=_();return Z(C,(u,n,d)=>{u||(a.value.client=U);for(let h=0;h<g.length;h++)g[h].id===u&&(a.value.client={...g[h]})}),(u,n)=>e(O)?(r(),m("section",et,[s(X,{"model-value":e(E).isActive,class:"align-center justify-center"},{default:l(()=>[s(W,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),s(A,null,{default:l(()=>[s(x,{cols:"12",md:"9"},{default:l(()=>[s(P,null,{default:l(()=>[s(w,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:l(()=>[s(A,null,{default:l(()=>[s(x,{cols:"8"},{default:l(()=>[t("div",st,[t("div",ot,[t("h6",lt,o(e(f).name),1)]),t("p",it,o(e(f).address),1),dt,t("p",at,o(e(f).email),1),t("p",nt,o(e(f).phone),1)])]),_:1}),e(i).invoice?c("",!0):(r(),b(x,{key:0,cols:"4"},{default:l(()=>[t("div",rt,[t("h6",ct," Bon Livraison #"+o(e(a).id),1),t("p",mt,[ut,t("span",_t,o(e(a).sale_date),1)]),e(i).price?(r(),m("p",pt,[ft,t("span",xt,o(e(i).paymentType),1)])):c("",!0)])]),_:1})),e(i).invoice?(r(),b(x,{key:1,cols:"4",class:"mt-5"},{default:l(()=>[t("div",vt,[ht,t("div",bt,o(e(f).NRC),1)]),t("div",wt,[yt,t("div",gt,o(e(f).NIF),1)]),t("div",Vt,[kt,t("div",Nt,o(e(f).NIS),1)]),t("div",jt,[Ft,t("div",Dt,o(e(f).NART),1)])]),_:1})):c("",!0)]),_:1})]),_:1}),e(i).invoice?(r(),b(k,{key:0})):c("",!0),e(i).invoice?(r(),b(A,{key:1,class:"ma-3 text-center"},{default:l(()=>[s(x,{cols:"4"},{default:l(()=>[t("h6",Tt,o(e(T))+" #"+o(e(a).id),1)]),_:1}),s(x,{cols:"4"},{default:l(()=>[e(i).price?(r(),m("p",Ct,[St,t("span",It,o(e(i).paymentType),1)])):c("",!0)]),_:1}),s(x,{cols:"4"},{default:l(()=>[t("p",At,[Pt,t("span",Rt,o(e(a).sale_date),1)])]),_:1})]),_:1})):c("",!0),s(k),s(w,{class:"invoiceGeneral d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row"},{default:l(()=>[t("div",Ut,[Ot,t("div",Et,[Zt,t("div",Bt,o(e(a).client.name)+" "+o(e(a).client.surname),1)]),t("div",Lt,[Kt,t("div",$t,o(e(a).client.address),1)]),t("div",qt,[zt,t("div",Gt,o(e(a).client.phone),1)]),t("div",Mt,[Qt,t("div",Yt,o(e(a).client.email),1)])]),Ht,e(i).invoice?(r(),m("div",Jt,[Wt,t("div",Xt,[te,t("div",ee,o(e(a).client.NRC),1)]),t("div",se,[oe,t("div",le,o(e(a).client.NIF),1)]),t("div",ie,[de,t("div",ae,o(e(a).client.NIS),1)]),t("div",ne,[re,t("div",ce,o(e(a).client.NART),1)])])):c("",!0),e(i).invoice?c("",!0):(r(),m("div",me,[ue,t("div",_e,[pe,t("div",fe," #"+o(e(a).id),1)]),t("div",xe,[ve,t("div",he,o(e(i).paymentType),1)]),t("div",be,[we,t("div",ye,o(e(a).sale_date),1)])]))]),_:1}),s(k),s(tt,null,{default:l(()=>[t("thead",null,[t("tr",null,[ge,e(i).sku?(r(),m("th",Ve," SKU ")):c("",!0),ke,e(i).price?(r(),m("th",Ne," Price ")):c("",!0),je,e(i).price?(r(),m("th",Fe," TOTAL ")):c("",!0)])]),t("tbody",null,[(r(!0),m(M,null,Q(e(a).sale_items,(d,h)=>(r(),m("tr",{key:d.name},[t("td",De,o(h+1),1),e(i).sku?(r(),m("td",Te,o(d.product.SKU),1)):c("",!0),t("td",Ce,[t("p",Se,o(d.product.name),1)]),e(i).price?(r(),m("td",Ie,o(d.price)+" DZD ",1)):c("",!0),t("td",Ae,o(d.quantity),1),e(i).price?(r(),m("td",Pe,o(d.total_price)+" DZD ",1)):c("",!0)]))),128))])]),_:1}),e(i).price?(r(),b(k,{key:2,class:"my-2"})):c("",!0),e(i).price?(r(),b(w,{key:3,class:"d-flex justify-space-between flex-column flex-sm-row print-row"},{default:l(()=>[t("div",Re,[t("h5",null,"La Facture est arret\xE9e \xE0 la somme de : "+o(e(a).amount_letter),1),e(i).sold?(r(),m("div",Ue,[Oe,t("div",Ee,o(parseFloat(e(y)).toFixed(2))+" DZD ",1)])):c("",!0),e(i).sold?(r(),m("div",Ze,[Be,t("div",Le,o(parseFloat(e(y))>0?(parseFloat(e(a).total_amount)+parseFloat(e(y))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(y))).toFixed(2))+" DZD ",1)])):c("",!0)]),t("div",Ke,[t("div",$e,[qe,t("div",ze,o(e(a).total_amount)+" DZD ",1)]),t("div",Ge,[Me,t("div",Qe,o(e(a).payment?parseFloat(e(a).regulation).toFixed(2):0)+" DZD ",1)]),t("div",Ye,[He,t("div",Je,o((parseFloat(e(a).total_amount)-parseFloat(e(a).regulation)).toFixed(2))+" DZD ",1)])])]),_:1})):c("",!0),s(k),s(w,null,{default:l(()=>[We]),_:1})]),_:1})]),_:1}),s(x,{cols:"12",md:"3",class:"d-print-none"},{default:l(()=>[s(P,null,{default:l(()=>[s(w,null,{default:l(()=>[s(S,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:n[0]||(n[0]=d=>D.value=!0)},{default:l(()=>[p(" Send Invoice ")]),_:1}),s(S,{block:"",variant:"tonal",color:"secondary",class:"mb-2",onClick:q},{default:l(()=>[p(" Print ")]),_:1}),s(S,{block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-edit-id",params:{id:e(R).params.id}}},{default:l(()=>[p(" Edit Invoice ")]),_:1},8,["to"]),s(S,{block:"","prepend-icon":"tabler-currency-dollar",class:"mb-2",onClick:n[1]||(n[1]=d=>F.value=!0)},{default:l(()=>[p(" Add Payment ")]),_:1})]),_:1})]),_:1}),s(P,{class:"mt-7"},{default:l(()=>[s(w,null,{default:l(()=>[t("div",Xe,[s(v,{for:"sold"},{default:l(()=>[p(" Sold ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(i).sold,"onUpdate:modelValue":n[2]||(n[2]=d=>e(i).sold=d)},null,8,["modelValue"])])]),t("div",ts,[s(v,{for:"price"},{default:l(()=>[p(" SKU ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(i).sku,"onUpdate:modelValue":n[3]||(n[3]=d=>e(i).sku=d)},null,8,["modelValue"])])]),t("div",es,[s(v,{for:"price"},{default:l(()=>[p(" Facture ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(i).invoice,"onUpdate:modelValue":n[4]||(n[4]=d=>e(i).invoice=d)},null,8,["modelValue"])])]),t("div",ss,[s(v,{for:"price"},{default:l(()=>[p(" Price ")]),_:1}),t("div",null,[s(I,{id:"price",modelValue:e(i).price,"onUpdate:modelValue":n[5]||(n[5]=d=>e(i).price=d)},null,8,["modelValue"])])]),t("div",null,[s(v,{class:"mb-4 mt-1"},{default:l(()=>[p(" Company ")]),_:1}),s(L,{modelValue:e(N),"onUpdate:modelValue":n[6]||(n[6]=d=>V(N)?N.value=d:null),items:e(j),"item-value":"id",class:"text-sm-subtitle-2","item-title":"name",label:"Company"},null,8,["modelValue","items"])]),t("div",null,[t("div",null,[s(v,{for:"payment-terms",class:"mb-1 mt-1"},{default:l(()=>[p(" Payment ")]),_:1}),s(K,{modelValue:e(i).paymentType,"onUpdate:modelValue":n[7]||(n[7]=d=>e(i).paymentType=d),placeholder:"Thanks for your business"},null,8,["modelValue"])])]),e(i).invoice?(r(),m("div",os,[s(v,{for:"payment-terms",class:"mb-1 mt-1"},{default:l(()=>[p(" Invoice Type ")]),_:1}),s(K,{modelValue:e(T),"onUpdate:modelValue":n[8]||(n[8]=d=>V(T)?T.value=d:null),placeholder:"Put the Invoice Type"},null,8,["modelValue"])])):c("",!0),t("div",null,[s(v,{class:"mb-4 mt-1"},{default:l(()=>[p(" Client ")]),_:1}),s(L,{clearable:"",modelValue:e(C),"onUpdate:modelValue":n[9]||(n[9]=d=>V(C)?C.value=d:null),items:e(g),"item-value":"id","item-title":z,label:"Client"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),s(Y,{data:e(a),loading:e(E),isDrawerOpen:e(F),"onUpdate:isDrawerOpen":n[10]||(n[10]=d=>V(F)?F.value=d:null)},null,8,["data","loading","isDrawerOpen"]),s(H,{isDrawerOpen:e(D),"onUpdate:isDrawerOpen":n[11]||(n[11]=d=>V(D)?D.value=d:null)},null,8,["isDrawerOpen"])])):c("",!0)}};typeof B=="function"&&B(ls);export{ls as default};
