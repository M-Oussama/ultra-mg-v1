import{bd as z,k as _,Z,q as e,o as r,c as m,p as s,w as l,m as t,x as o,b,y as c,F as G,a as M,E as p,D as V}from"./main.f953bb32.js";import{_ as Q}from"./InvoiceAddPaymentDrawer.40c1e4cc.js";import{_ as Y}from"./InvoiceSendInvoiceDrawer.8c6885d9.js";import{u as H}from"./useSaleStore.6a87799d.js";import{a as J,V as S}from"./VBtn.53826497.js";import{a as W}from"./VOverlay.00baf023.js";import{a as x,V as A}from"./VRow.463c82a5.js";import{V as P,c as w}from"./VCard.7307dc50.js";import{V as k}from"./VDivider.0296d5ca.js";import{V as X}from"./VTable.69dd1c1a.js";import{V as v}from"./VInput.1c807576.js";import{V as I}from"./VSwitch.79ab9d6d.js";import{V as B}from"./VAutocomplete.99e66e44.js";import{V as L}from"./VTextField.b3fcc6a6.js";import"./AppDateTimePicker.220e8818.js";import"./VField.f20494b5.js";import"./index.bcea3609.js";import"./position.20814070.js";import"./router.392dd72d.js";import"./easing.36b781ab.js";import"./errorsMiddleware.9f89ec9d.js";import"./successMiddleware.cdacaeb5.js";import"./VSpacer.97180599.js";import"./VAvatar.cb499833.js";import"./VImg.4ecfe5db.js";import"./VForm.4c472cc7.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.810bf745.js";/* empty css                   */import"./VCounter.7a557e1b.js";import"./VNavigationDrawer.81f726b4.js";import"./ssrBoot.9eb188de.js";import"./VChip.713d6306.js";import"./lazy.16b1c569.js";import"./VSelectionControl.8ce3f773.js";import"./VSelect.64bf3f05.js";import"./VList.b77b6faf.js";import"./dialog-transition.d5a03f10.js";import"./VMenu.4462e6e8.js";import"./scopeId.26638b4f.js";import"./VCheckboxBtn.2d0ad59f.js";import"./filter.cabd82c5.js";const tt={key:0},et={class:"ma-sm-3"},st={class:"d-flex align-center mb-6"},ot={class:"font-weight-bold text-xl"},lt={class:"mb-0"},it=t("p",{class:"mb-0"}," KASR EL ABTALE, 19000, SETIF ",-1),dt={class:"mb-0"},at={class:"mb-0"},nt={class:"mt-4 ma-sm-4"},rt={class:"font-weight-medium text-xl mb-2"},ct={class:"mb-2"},mt=t("span",null,"Date : ",-1),ut={class:"font-weight-semibold"},_t={key:0,class:"mb-2"},pt=t("span",null,"Payment: ",-1),ft={class:"font-weight-semibold"},xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},vt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),ht={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},bt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},wt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),yt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},gt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Vt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),kt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},Nt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},jt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),Ft={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},Dt={class:"font-weight-medium text-sm mb-2"},Tt={key:0,class:"mb-2 text-sm"},Ct=t("span",null,"Payment: ",-1),St={class:"font-weight-semibold"},It={class:"mb-2 text-sm"},At=t("span",null,"Date : ",-1),Pt={class:"font-weight-semibold"},Rt={class:"v-col-md-6"},Ut=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center"},null,-1),Ot={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Et=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Client ",-1),Zt={class:"v-col-md-10 border-left padding-8 data-font"},Bt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Lt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Address ",-1),Kt={class:"v-col-md-10 border-left padding-8 data-font"},$t={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},qt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Phone ",-1),zt={class:"v-col-md-10 border-left padding-8 data-font"},Gt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Mt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Email ",-1),Qt={class:"v-col-md-10 border-left padding-8 data-font"},Yt=t("div",{class:"v-col-md-2"},null,-1),Ht={key:0,class:"v-col-md-4"},Jt=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),Wt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},Xt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),te={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ee={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},se=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),oe={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},le={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ie=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),de={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ae={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ne=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),re={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},ce={key:1,class:"v-col-md-4"},me=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),ue={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},_e=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Facture ",-1),pe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},fe={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},xe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Payment Type ",-1),ve={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},he={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},be=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Date ",-1),we={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},ye=t("th",{class:"text-sm-caption",scope:"col"}," ID ",-1),ge={key:0,class:"text-sm-caption",scope:"col"},Ve=t("th",{class:"text-sm-caption",scope:"col"}," name ",-1),ke={key:1,scope:"col",class:"text-center text-sm-caption"},Ne=t("th",{scope:"col",class:"text-center text-sm-caption"}," QTY ",-1),je={key:2,scope:"col",class:"text-center text-sm-caption"},Fe={class:"text-no-wrap text-sm-caption"},De={key:0,class:"text-no-wrap text-sm-caption"},Te={class:"text-no-wrap"},Ce={class:"text-sm-caption mb-0"},Se={key:1,class:"text-center text-sm-caption"},Ie={class:"text-center text-sm-caption"},Ae={key:2,class:"text-center text-sm-caption"},Pe={class:"my-2 mx-sm-5 v-col-md-6"},Re={key:0,class:"mt-10 d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ue=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Ancien solde ",-1),Oe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Ee={key:1,class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ze=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Nouveau solde ",-1),Be={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Le={class:"my-2 mx-sm-4 v-col-md-4"},Ke={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},$e=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Total ",-1),qe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},ze={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ge=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Paiement ",-1),Me={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Qe={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ye=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Nouveau solde ",-1),He={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Je=t("div",{class:"d-flex mx-sm-4"},[t("h6",{class:"text-sm font-weight-semibold me-1"}," Note: "),t("span",null,"Merci pour votre r\xE8glement rapide. Nous appr\xE9cions votre collaboration ")],-1),We={class:"d-flex align-center justify-space-between mt-5"},Xe={class:"d-flex align-center justify-space-between"},ts={class:"d-flex align-center justify-space-between"},es={class:"d-flex align-center justify-space-between"},ss={key:0},Gs={__name:"[id]",setup(os){const K=H(),R=z(),a=_({id:1,balance:0,total_amount:0,sale_date:null,client_id:1,sale_status:{id:-1,name:""},amount_letter:"",notes:"",client:{id:-1,name:"",surname:"",address:"",email:"",phone:"",NRC:"",NIF:"",NART:"",NIS:""},sale_items:[]}),i=_({sku:!1,invoice:!1,price:!0,paymentType:"Espece",sold:!1}),y=_(0),U=_();let g=_([]);const N=_(1),f=_({name:"",address:"",phone:"",email:"",NRC:"",NIF:"",NART:"",NIS:"",capitale:""});let j=_([]);const O=_(!1);_();const F=_(!1),D=_(!1),E=_({isActive:!1});K.fetchSale(Number(R.params.id)).then(u=>{a.value=u.data.sale,y.value=u.data.sold,U.value={...a.value.client},j=u.data.companies,g=u.data.clients,f.value=j[0],O.value=!0}).catch(u=>{console.log(u)});const $=()=>{window.print()};Z(N,(u,n,d)=>{f.value=j[u-1],console.log(f)});const q=u=>u.name+" "+u.surname,T=_("Facture Proforma"),C=_();return Z(C,(u,n,d)=>{u||(a.value.client=U);for(let h=0;h<g.length;h++)g[h].id===u&&(a.value.client={...g[h]})}),(u,n)=>e(O)?(r(),m("section",tt,[s(W,{"model-value":e(E).isActive,class:"align-center justify-center"},{default:l(()=>[s(J,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),s(A,null,{default:l(()=>[s(x,{cols:"12",md:"9"},{default:l(()=>[s(P,null,{default:l(()=>[s(w,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:l(()=>[s(A,null,{default:l(()=>[s(x,{cols:"8"},{default:l(()=>[t("div",et,[t("div",st,[t("h6",ot,o(e(f).name),1)]),t("p",lt,o(e(f).address),1),it,t("p",dt,o(e(f).email),1),t("p",at,o(e(f).phone),1)])]),_:1}),e(i).invoice?c("",!0):(r(),b(x,{key:0,cols:"4"},{default:l(()=>[t("div",nt,[t("h6",rt," Bon Livraison #"+o(e(a).id),1),t("p",ct,[mt,t("span",ut,o(e(a).sale_date),1)]),e(i).price?(r(),m("p",_t,[pt,t("span",ft,o(e(i).paymentType),1)])):c("",!0)])]),_:1})),e(i).invoice?(r(),b(x,{key:1,cols:"4",class:"mt-5"},{default:l(()=>[t("div",xt,[vt,t("div",ht,o(e(f).NRC),1)]),t("div",bt,[wt,t("div",yt,o(e(f).NIF),1)]),t("div",gt,[Vt,t("div",kt,o(e(f).NIS),1)]),t("div",Nt,[jt,t("div",Ft,o(e(f).NART),1)])]),_:1})):c("",!0)]),_:1})]),_:1}),e(i).invoice?(r(),b(k,{key:0})):c("",!0),e(i).invoice?(r(),b(A,{key:1,class:"ma-3 text-center"},{default:l(()=>[s(x,{cols:"4"},{default:l(()=>[t("h6",Dt,o(e(T))+" #"+o(e(a).id),1)]),_:1}),s(x,{cols:"4"},{default:l(()=>[e(i).price?(r(),m("p",Tt,[Ct,t("span",St,o(e(i).paymentType),1)])):c("",!0)]),_:1}),s(x,{cols:"4"},{default:l(()=>[t("p",It,[At,t("span",Pt,o(e(a).sale_date),1)])]),_:1})]),_:1})):c("",!0),s(k),s(w,{class:"invoiceGeneral d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row"},{default:l(()=>[t("div",Rt,[Ut,t("div",Ot,[Et,t("div",Zt,o(e(a).client.name)+" "+o(e(a).client.surname),1)]),t("div",Bt,[Lt,t("div",Kt,o(e(a).client.address),1)]),t("div",$t,[qt,t("div",zt,o(e(a).client.phone),1)]),t("div",Gt,[Mt,t("div",Qt,o(e(a).client.email),1)])]),Yt,e(i).invoice?(r(),m("div",Ht,[Jt,t("div",Wt,[Xt,t("div",te,o(e(a).client.NRC),1)]),t("div",ee,[se,t("div",oe,o(e(a).client.NIF),1)]),t("div",le,[ie,t("div",de,o(e(a).client.NIS),1)]),t("div",ae,[ne,t("div",re,o(e(a).client.NART),1)])])):c("",!0),e(i).invoice?c("",!0):(r(),m("div",ce,[me,t("div",ue,[_e,t("div",pe," #"+o(e(a).id),1)]),t("div",fe,[xe,t("div",ve,o(e(i).paymentType),1)]),t("div",he,[be,t("div",we,o(e(a).sale_date),1)])]))]),_:1}),s(k),s(X,null,{default:l(()=>[t("thead",null,[t("tr",null,[ye,e(i).sku?(r(),m("th",ge," SKU ")):c("",!0),Ve,e(i).price?(r(),m("th",ke," Price ")):c("",!0),Ne,e(i).price?(r(),m("th",je," TOTAL ")):c("",!0)])]),t("tbody",null,[(r(!0),m(G,null,M(e(a).sale_items,(d,h)=>(r(),m("tr",{key:d.name},[t("td",Fe,o(h+1),1),e(i).sku?(r(),m("td",De,o(d.product.SKU),1)):c("",!0),t("td",Te,[t("p",Ce,o(d.product.name),1)]),e(i).price?(r(),m("td",Se,o(d.price)+" DZD ",1)):c("",!0),t("td",Ie,o(d.quantity),1),e(i).price?(r(),m("td",Ae,o(d.total_price)+" DZD ",1)):c("",!0)]))),128))])]),_:1}),e(i).price?(r(),b(k,{key:2,class:"my-2"})):c("",!0),e(i).price?(r(),b(w,{key:3,class:"d-flex justify-space-between flex-column flex-sm-row print-row"},{default:l(()=>[t("div",Pe,[t("h5",null,"La Facture est arret\xE9e \xE0 la somme de : "+o(e(a).amount_letter),1),e(i).sold?(r(),m("div",Re,[Ue,t("div",Oe,o(parseFloat(e(y)).toFixed(2))+" DZD ",1)])):c("",!0),e(i).sold?(r(),m("div",Ee,[Ze,t("div",Be,o(parseFloat(e(y))>0?(parseFloat(e(a).total_amount)+parseFloat(e(y))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(y))).toFixed(2))+" DZD ",1)])):c("",!0)]),t("div",Le,[t("div",Ke,[$e,t("div",qe,o(e(a).total_amount)+" DZD ",1)]),t("div",ze,[Ge,t("div",Me,o(e(a).payment?parseFloat(e(a).regulation).toFixed(2):0)+" DZD ",1)]),t("div",Qe,[Ye,t("div",He,o((parseFloat(e(a).total_amount)-parseFloat(e(a).regulation)).toFixed(2))+" DZD ",1)])])]),_:1})):c("",!0),s(k),s(w,null,{default:l(()=>[Je]),_:1})]),_:1})]),_:1}),s(x,{cols:"12",md:"3",class:"d-print-none"},{default:l(()=>[s(P,null,{default:l(()=>[s(w,null,{default:l(()=>[s(S,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:n[0]||(n[0]=d=>D.value=!0)},{default:l(()=>[p(" Send Invoice ")]),_:1}),s(S,{block:"",variant:"tonal",color:"secondary",class:"mb-2",onClick:$},{default:l(()=>[p(" Print ")]),_:1}),s(S,{block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-edit-id",params:{id:e(R).params.id}}},{default:l(()=>[p(" Edit Invoice ")]),_:1},8,["to"]),s(S,{block:"","prepend-icon":"tabler-currency-dollar",class:"mb-2",onClick:n[1]||(n[1]=d=>F.value=!0)},{default:l(()=>[p(" Add Payment ")]),_:1})]),_:1})]),_:1}),s(P,{class:"mt-7"},{default:l(()=>[s(w,null,{default:l(()=>[t("div",We,[s(v,{for:"sold"},{default:l(()=>[p(" Sold ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(i).sold,"onUpdate:modelValue":n[2]||(n[2]=d=>e(i).sold=d)},null,8,["modelValue"])])]),t("div",Xe,[s(v,{for:"price"},{default:l(()=>[p(" SKU ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(i).sku,"onUpdate:modelValue":n[3]||(n[3]=d=>e(i).sku=d)},null,8,["modelValue"])])]),t("div",ts,[s(v,{for:"price"},{default:l(()=>[p(" Facture ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(i).invoice,"onUpdate:modelValue":n[4]||(n[4]=d=>e(i).invoice=d)},null,8,["modelValue"])])]),t("div",es,[s(v,{for:"price"},{default:l(()=>[p(" Price ")]),_:1}),t("div",null,[s(I,{id:"price",modelValue:e(i).price,"onUpdate:modelValue":n[5]||(n[5]=d=>e(i).price=d)},null,8,["modelValue"])])]),t("div",null,[s(v,{class:"mb-4 mt-1"},{default:l(()=>[p(" Company ")]),_:1}),s(B,{modelValue:e(N),"onUpdate:modelValue":n[6]||(n[6]=d=>V(N)?N.value=d:null),items:e(j),"item-value":"id",class:"text-sm-subtitle-2","item-title":"name",label:"Company"},null,8,["modelValue","items"])]),t("div",null,[t("div",null,[s(v,{for:"payment-terms",class:"mb-1 mt-1"},{default:l(()=>[p(" Payment ")]),_:1}),s(L,{modelValue:e(i).paymentType,"onUpdate:modelValue":n[7]||(n[7]=d=>e(i).paymentType=d),placeholder:"Thanks for your business"},null,8,["modelValue"])])]),e(i).invoice?(r(),m("div",ss,[s(v,{for:"payment-terms",class:"mb-1 mt-1"},{default:l(()=>[p(" Invoice Type ")]),_:1}),s(L,{modelValue:e(T),"onUpdate:modelValue":n[8]||(n[8]=d=>V(T)?T.value=d:null),placeholder:"Put the Invoice Type"},null,8,["modelValue"])])):c("",!0),t("div",null,[s(v,{class:"mb-4 mt-1"},{default:l(()=>[p(" Client ")]),_:1}),s(B,{clearable:"",modelValue:e(C),"onUpdate:modelValue":n[9]||(n[9]=d=>V(C)?C.value=d:null),items:e(g),"item-value":"id","item-title":q,label:"Client"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),s(Q,{data:e(a),loading:e(E),isDrawerOpen:e(F),"onUpdate:isDrawerOpen":n[10]||(n[10]=d=>V(F)?F.value=d:null)},null,8,["data","loading","isDrawerOpen"]),s(Y,{isDrawerOpen:e(D),"onUpdate:isDrawerOpen":n[11]||(n[11]=d=>V(D)?D.value=d:null)},null,8,["isDrawerOpen"])])):c("",!0)}};export{Gs as default};
