import{k as s,o as N,b as I,w as l,m as c,p as e,C as E,q as o,P as X,D as n,be as ee,E as z,ay as L,Z as Q,bc as ue,a1 as q,$ as M,A as ne,r as ie,c as R,F as de,a as ce,x as F,H as pe,I as me,y as ve}from"./main.f953bb32.js";import{r as $}from"./validators.330a354f.js";import{V as Y}from"./VSpacer.97180599.js";import{V as A,a as G}from"./VBtn.53826497.js";import{V as j,c as K}from"./VCard.7307dc50.js";import{V as le}from"./VForm.4c472cc7.js";import{V as Z,a as w}from"./VRow.463c82a5.js";import{V as P}from"./VTextField.b3fcc6a6.js";import{V as te}from"./VSwitch.79ab9d6d.js";import{V as ae}from"./VNavigationDrawer.81f726b4.js";import{_ as fe}from"./DialogCloseBtn.d8d8323c.js";import{V as Ve}from"./VDialog.c5a0cc45.js";import{e as H}from"./errorsMiddleware.9f89ec9d.js";import{s as J}from"./successMiddleware.cdacaeb5.js";import{a as be}from"./VOverlay.00baf023.js";import{V as W}from"./VDivider.0296d5ca.js";import{V as _e}from"./VSelect.64bf3f05.js";import{V as ge}from"./VTable.69dd1c1a.js";import{V as xe}from"./VAvatar.cb499833.js";import{V as we}from"./VImg.4ecfe5db.js";import{V as ye}from"./VChip.713d6306.js";import{V as De}from"./VPagination.0b1cb419.js";import"./index.b522f886.js";import"./router.392dd72d.js";import"./position.20814070.js";import"./VInput.1c807576.js";import"./index.bcea3609.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.f20494b5.js";import"./easing.36b781ab.js";import"./VCounter.7a557e1b.js";import"./VSelectionControl.8ce3f773.js";import"./ssrBoot.9eb188de.js";import"./scopeId.26638b4f.js";import"./dialog-transition.d5a03f10.js";import"./lazy.16b1c569.js";import"./VList.b77b6faf.js";import"./VMenu.4462e6e8.js";import"./VCheckboxBtn.2d0ad59f.js";const ke={class:"d-flex align-center pa-6 pb-1"},Pe=c("h6",{class:"text-h6"}," Add User ",-1),Ue={__name:"AddNewProductDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","productData"],setup(h,{emit:m}){const g=h,x=s(!1),v=s(),D=s(""),i=s(""),p=s(""),k=s(""),V=s(""),f=s(0);let y=s(0),C=s(0),b=s(!1);const U=s(0),S=()=>{m("update:isDrawerOpen",!1),L(()=>{var u,t;(u=v.value)==null||u.reset(),(t=v.value)==null||t.resetValidation()})},O=()=>{var u;(u=v.value)==null||u.validate().then(({valid:t})=>{t&&(m("productData",{name:D.value,brand:i.value,description:p.value,product_code:k.value,SKU:V.value,min_stock_level:f.value,price:y.value,stockable:b.value,tax_rate:U.value,weight:C.value}),m("update:isDrawerOpen",!1),L(()=>{var a,B;(a=v.value)==null||a.reset(),(B=v.value)==null||B.resetValidation()}))})},T=u=>{m("update:isDrawerOpen",u)};return(u,t)=>(N(),I(ae,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":g.isDrawerOpen,"onUpdate:modelValue":T},{default:l(()=>[c("div",ke,[Pe,e(Y),e(A,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:S},{default:l(()=>[e(E,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(X),{options:{wheelPropagation:!1}},{default:l(()=>[e(j,{flat:""},{default:l(()=>[e(K,null,{default:l(()=>[e(le,{ref_key:"refForm",ref:v,modelValue:o(x),"onUpdate:modelValue":t[10]||(t[10]=a=>n(x)?x.value=a:null),onSubmit:ee(O,["prevent"])},{default:l(()=>[e(Z,null,{default:l(()=>[e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(D),"onUpdate:modelValue":t[0]||(t[0]=a=>n(D)?D.value=a:null),rules:[o($)],label:"Product Name"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(i),"onUpdate:modelValue":t[1]||(t[1]=a=>n(i)?i.value=a:null),label:"Product Brand"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(p),"onUpdate:modelValue":t[2]||(t[2]=a=>n(p)?p.value=a:null),label:"Product description"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(k),"onUpdate:modelValue":t[3]||(t[3]=a=>n(k)?k.value=a:null),label:"Product code"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(V),"onUpdate:modelValue":t[4]||(t[4]=a=>n(V)?V.value=a:null),label:"Product SKU"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(f),"onUpdate:modelValue":t[5]||(t[5]=a=>n(f)?f.value=a:null),rules:[o($)],label:"min stock level",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(C),"onUpdate:modelValue":t[6]||(t[6]=a=>n(C)?C.value=a:C=a),rules:[o($)],label:"Weight",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(y),"onUpdate:modelValue":t[7]||(t[7]=a=>n(y)?y.value=a:y=a),rules:[o($)],label:"Price",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(te,{modelValue:o(b),"onUpdate:modelValue":t[8]||(t[8]=a=>n(b)?b.value=a:b=a),"false-value":0,"true-value":1,inset:"",label:"Stockable"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(U),"onUpdate:modelValue":t[9]||(t[9]=a=>n(U)?U.value=a:null),type:"number",rules:[o($)],label:"Tax Rate"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(A,{type:"submit",class:"me-3"},{default:l(()=>[z(" Submit ")]),_:1}),e(A,{type:"reset",variant:"tonal",color:"secondary",onClick:S},{default:l(()=>[z(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Se={class:"d-flex align-center pa-6 pb-1"},he=c("h6",{class:"text-h6"}," Edit Product ",-1),Ce={__name:"EditProductDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},product:{type:Object}},emits:["update:isDrawerOpen","productData"],setup(h,{emit:m}){const g=h;Q(()=>g.product,u=>{console.log(u),u&&(D.value=u.id||0,i.value=u.name||"",p.value=u.brand||"",k.value=u.description||"",V.value=u.product_code||"",f.value=u.SKU||"",y.value=u.min_stock_level||0,b.value=u.price||0,U.value=u.stockable||0,S.value=u.tax_rate||0,C.value=u.weight||0)});const x=s(!1),v=s(),D=s(),i=s(""),p=s(""),k=s(""),V=s(""),f=s(""),y=s(0),C=s(0);let b=s(0),U=s(0);const S=s(0),O=()=>{m("update:isDrawerOpen",!1),L(()=>{var u,t;(u=v.value)==null||u.reset(),(t=v.value)==null||t.resetValidation()})},T=()=>{var u;(u=v.value)==null||u.validate().then(({valid:t})=>{t&&(m("productData",{id:D.value,name:i.value,brand:p.value,description:k.value,product_code:V.value,SKU:f.value,min_stock_level:y.value,price:b.value,stockable:!!U.value,tax_rate:S.value,weight:C.value}),m("update:isDrawerOpen",!1),L(()=>{var a,B;(a=v.value)==null||a.reset(),(B=v.value)==null||B.resetValidation()}))})};return(u,t)=>(N(),I(ae,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":g.isDrawerOpen},{default:l(()=>[c("div",Se,[he,e(Y),e(A,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:O},{default:l(()=>[e(E,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(X),{options:{wheelPropagation:!1}},{default:l(()=>[e(j,{flat:""},{default:l(()=>[e(K,null,{default:l(()=>[e(le,{ref_key:"refForm",ref:v,modelValue:o(x),"onUpdate:modelValue":t[10]||(t[10]=a=>n(x)?x.value=a:null),onSubmit:ee(T,["prevent"])},{default:l(()=>[e(Z,null,{default:l(()=>[e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(i),"onUpdate:modelValue":t[0]||(t[0]=a=>n(i)?i.value=a:null),rules:[o($)],label:"Product Name"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(p),"onUpdate:modelValue":t[1]||(t[1]=a=>n(p)?p.value=a:null),label:"Product Brand"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(k),"onUpdate:modelValue":t[2]||(t[2]=a=>n(k)?k.value=a:null),label:"Product description"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(V),"onUpdate:modelValue":t[3]||(t[3]=a=>n(V)?V.value=a:null),label:"Product code"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(f),"onUpdate:modelValue":t[4]||(t[4]=a=>n(f)?f.value=a:null),label:"Product SKU"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(y),"onUpdate:modelValue":t[5]||(t[5]=a=>n(y)?y.value=a:null),rules:[o($)],label:"min stock level",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(C),"onUpdate:modelValue":t[6]||(t[6]=a=>n(C)?C.value=a:null),rules:[o($)],label:"Weight",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(b),"onUpdate:modelValue":t[7]||(t[7]=a=>n(b)?b.value=a:b=a),rules:[o($)],label:"Price",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(te,{modelValue:o(U),"onUpdate:modelValue":t[8]||(t[8]=a=>n(U)?U.value=a:U=a),"false-value":0,"true-value":1,inset:"",label:"Stockable"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(S),"onUpdate:modelValue":t[9]||(t[9]=a=>n(S)?S.value=a:null),type:"number",rules:[o($)],label:"Tax Rate"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:l(()=>[e(A,{type:"submit",class:"me-3"},{default:l(()=>[z(" Submit ")]),_:1}),e(A,{type:"reset",variant:"tonal",color:"secondary",onClick:O},{default:l(()=>[z(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Oe={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},product:{type:Object,required:!0}},emits:["update:isDrawerOpen","productData"],setup(h,{emit:m}){const g=h,x=s(),v=()=>{m("update:isDialogVisible",!1)};Q(()=>g.product,i=>{i&&(x.value=i.id||0)});const D=()=>{m("productData",{id:g.product.id}),m("update:isDialogVisible",!1)};return(i,p)=>{const k=fe;return N(),I(Ve,{modelValue:g.isDialogVisible,"onUpdate:modelValue":p[2]||(p[2]=V=>g.isDialogVisible=V),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(k,{onClick:p[0]||(p[0]=V=>v())}),e(j,{title:"Confirmation"},{default:l(()=>[e(K,null,{default:l(()=>[z(" Are you sure you want to delete this product ? ")]),_:1}),e(K,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(A,{color:"secondary",variant:"tonal",onClick:p[1]||(p[1]=V=>m("update:isDialogVisible",!1))},{default:l(()=>[z(" Disagree ")]),_:1}),e(A,{onClick:D},{default:l(()=>[z(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ae=ue("ProductListStore",{actions:{fetchProducts(h){return q.get("/api/products/list",{params:h})},addProduct(h){const{name:m,brand:g,description:x,product_code:v,SKU:D,min_stock_level:i,weight:p,price:k,stockable:V,tax_rate:f}=h;return new Promise((y,C)=>{q.post("/api/products/store",{name:m,brand:g,description:x,product_code:v,SKU:D,min_stock_level:i,price:k,stockable:V,tax_rate:f,weight:p}).then(b=>{y(b)}).catch(b=>{H(b),C(b)})})},updateProduct(h){const{id:m,name:g,brand:x,description:v,product_code:D,SKU:i,min_stock_level:p,weight:k,price:V,stockable:f,tax_rate:y}=h;return new Promise((C,b)=>{let U={name:g,brand:x,description:v,product_code:D,SKU:i,min_stock_level:p,price:V,stockable:f,tax_rate:y,weight:k};q.post("/api/products/update/"+m,U).then(S=>{C(S)}).catch(S=>{b(S)})})},fetchProduct(h){return new Promise((m,g)=>{q.get(`/apps/products/${h}`).then(x=>m(x)).catch(x=>g(x))})},deleteProduct(h){console.log(h);const{id:m}=h;return new Promise((g,x)=>{q.delete("/api/products/delete/"+m).then(v=>g(v)).catch(v=>x(v))})}}});const Ne={class:"me-3",style:{width:"80px"}},ze={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},$e={style:{width:"8rem"}},Be=c("thead",null,[c("tr",null,[c("th",{scope:"col"}," ID "),c("th",{scope:"col"}," Product "),c("th",{scope:"col"}," SKU "),c("th",{scope:"col"}," Stockable "),c("th",{scope:"col"}," ACTIONS ")])],-1),Fe={class:"d-flex align-center"},Ie={key:1},Ke={class:"d-flex flex-column"},Te={class:"text-base"},qe={class:"text-sm text-disabled"},Ee={class:"text-capitalize text-base font-weight-semibold"},Re={class:"text-center",style:{width:"5rem"}},Le=c("tr",null,[c("td",{colspan:"7",class:"text-center"}," No data available ")],-1),je=[Le],Me={class:"text-sm text-disabled"},Nl={__name:"index",setup(h){const m=Ae(),g=s(""),x=s(!1),v=s(!0);s(),s(),s();const D=s(10),i=s(1),p=s(1),k=s(0);let V=s([]),f=s({isActive:!1});const y=()=>{f.value.isActive=!0,m.fetchProducts({searchValue:g.value,perPage:D.value,currentPage:i.value}).then(_=>{V.value=_.data.products.data,p.value=_.data.totalPage,k.value=_.data.totalProducts,x.value=!1,f.value.isActive=!1}).catch(_=>{console.error(_),f.value.isActive=!1})};M(y),M(()=>{i.value>p.value&&(i.value=p.value)}),Q(g,()=>{x.value=!0,y()});const C=_=>_==="subscriber"?{color:"warning",icon:"tabler-user"}:_==="author"?{color:"success",icon:"tabler-circle-check"}:_==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:_==="editor"?{color:"info",icon:"tabler-pencil"}:_==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},b=s(!1),U=s(!1),S=s(!1);let O=s();M(()=>{i.value>p.value&&(i.value=p.value)});const T=ne(()=>{const _=V.value.length?(i.value-1)*D.value+1:0,d=V.value.length+(i.value-1)*D.value;return`Showing ${_} to ${d} of ${k.value} entries`}),u=_=>{f.value.isActive=!0,m.addProduct(_).then(d=>{f.value.isActive=!1,J(d.data.message),y()}).catch(d=>{H(d),f.value.isActive=!1})},t=_=>{f.value.isActive=!0,m.updateProduct(_).then(d=>{f.value.isActive=!1,J("requests.product.success"),y()}).catch(d=>{H(d),f.value.isActive=!1})},a=_=>{m.deleteProduct(_),y()},B=_=>{U.value=!0,O=_},oe=_=>{S.value=!0,O=_};return(_,d)=>{const se=ie("RouterLink");return N(),R("section",null,[e(Z,null,{default:l(()=>[e(be,{"model-value":o(f).isActive,class:"align-center justify-center"},{default:l(()=>[e(G,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(w,{cols:"12"},{default:l(()=>[e(j,{title:"Products"},{default:l(()=>[e(W),e(K,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[c("div",Ne,[e(_e,{modelValue:o(D),"onUpdate:modelValue":d[0]||(d[0]=r=>n(D)?D.value=r:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Y),c("div",ze,[c("div",$e,[o(x)?(N(),I(G,{key:0,indeterminate:"",color:"primary"})):(N(),I(P,{key:1,onInput:d[1]||(d[1]=r=>v.value=!0),ref:"searchField",modelValue:o(g),"onUpdate:modelValue":d[2]||(d[2]=r=>n(g)?g.value=r:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(A,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:l(()=>[z(" Export ")]),_:1}),e(A,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=r=>b.value=!0)},{default:l(()=>[z(" Add New Product ")]),_:1})])]),_:1}),e(W),e(ge,{class:"text-no-wrap"},{default:l(()=>[Be,c("tbody",null,[(N(!0),R(de,null,ce(o(V),r=>(N(),R("tr",{key:r.id,style:{height:"3.75rem"}},[c("td",null,F(r.id),1),c("td",null,[c("div",Fe,[e(xe,{variant:"tonal",color:C(r.role).color,class:"me-3",size:"38"},{default:l(()=>[r.avatar?(N(),I(we,{key:0,src:r.avatar},null,8,["src"])):(N(),R("span",Ie,F(r.name.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),c("div",Ke,[c("h6",Te,[e(se,{to:{name:"apps-user-view-id",params:{id:r.id}},class:"font-weight-medium user-list-name"},{default:l(()=>[z(F(r.name),1)]),_:2},1032,["to"])]),c("span",qe,"@"+F(r.brand),1)])])]),c("td",null,[c("span",Ee,F(r.SKU),1)]),c("td",null,[e(ye,{color:r.stockable?"success":"error",variant:"elevated"},{default:l(()=>[z(F(r.stockable?"YES":"NO"),1)]),_:2},1032,["color"])]),c("td",Re,[e(A,{icon:"",size:"x-small",color:"default",variant:"text",onClick:re=>B(r)},{default:l(()=>[e(E,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(A,{icon:"",size:"x-small",color:"default",variant:"text",onClick:re=>oe(r)},{default:l(()=>[e(E,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(A,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(E,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),pe(c("tfoot",null,je,512),[[me,!o(V).length]])]),_:1}),e(W),e(K,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:l(()=>[c("span",Me,F(o(T)),1),e(De,{modelValue:o(i),"onUpdate:modelValue":d[4]||(d[4]=r=>n(i)?i.value=r:null),size:"small","total-visible":5,length:o(p)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ue,{isDrawerOpen:o(b),"onUpdate:isDrawerOpen":d[5]||(d[5]=r=>n(b)?b.value=r:null),onProductData:u},null,8,["isDrawerOpen"]),e(Ce,{isDrawerOpen:o(U),"onUpdate:isDrawerOpen":d[6]||(d[6]=r=>n(U)?U.value=r:null),product:o(O),"onUpdate:product":d[7]||(d[7]=r=>n(O)?O.value=r:O=r),onProductData:t},null,8,["isDrawerOpen","product"]),o(S)?(N(),I(Oe,{key:0,isDialogVisible:o(S),"onUpdate:isDialogVisible":d[8]||(d[8]=r=>n(S)?S.value=r:null),product:o(O),"onUpdate:product":d[9]||(d[9]=r=>n(O)?O.value=r:O=r),onProductData:a},null,8,["isDialogVisible","product"])):ve("",!0)])}}};export{Nl as default};
