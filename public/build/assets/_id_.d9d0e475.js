import{bd as E,j as G,k as n,$ as K,o as v,b as y,w as l,p as e,q as s,be as z,E as i,c as Q,a as H,F as J,y as S,m as f,D as h,bf as C}from"./main.e6f2226b.js";import"./AppDateTimePicker.1db41a12.js";import{u as W}from"./useSaleStore.8bc8c67e.js";import{s as R}from"./successMiddleware.f4309dc7.js";import{_ as X}from"./InvoiceSendInvoiceDrawer.1d0b2bd5.js";/* empty css                        *//* empty css                                                           *//* empty css                                                        */import{a as Y,V}from"./VBtn.8ee7d1bc.js";import{a as Z}from"./VOverlay.6f5b1171.js";import{V as B,c as L}from"./VCard.98fdd3d2.js";import{V as ee}from"./VForm.677822bd.js";import{V as P,a as r}from"./VRow.0dee9a23.js";import{V as _}from"./VInput.8559a63c.js";import{V as p}from"./VTextField.8783cc1b.js";import{V as k}from"./VSwitch.a8d2091c.js";import"./VField.0c7bfcf3.js";import"./index.96305a7f.js";import"./position.00c850f0.js";import"./router.5ba86b57.js";import"./easing.36b781ab.js";import"./VSpacer.5af32ac4.js";import"./VAvatar.bf7ae53a.js";import"./VImg.37abf546.js";import"./VTextarea.a8767de0.js";/* empty css                   */import"./forwardRefs.c003b6b8.js";import"./VCounter.57b6c0d3.js";import"./VChip.93584157.js";import"./VNavigationDrawer.84b927c3.js";import"./ssrBoot.671feef1.js";import"./lazy.e5202e15.js";import"./VSelectionControl.14a64459.js";const te=f("h6",{class:"text-sm font-weight-medium mb-3"}," Payment Method: ",-1),le={class:"mt-5 d-flex align-center justify-space-between"},ae={class:"d-flex align-center justify-space-between"},oe={class:"d-flex align-center justify-space-between"},se={__name:"[id]",setup(ue){const w=E(),$=G(),c=n([]),d=n({raw_material_price:0,total_profit:0,total_amount:0}),g=n(0),A=W(),m=n({isActive:!1}),j=n(null),F=()=>{A.getArticlesBenefit(Number(w.params.id)).then(a=>{m.isActive=!1,c.value=a.data.articles,d.value=a.data.benefit,d.value.total_profit=d.value.benefit}).catch(a=>{m.isActive=!1,console.log(a)})};K(F);const b=n(!1);n(!1);const U=n(!0),T=n(!1),x=n(!1),N=n(!1);n(0);const D=()=>{},O=a=>{a.total_profit=parseFloat(a.benefit)*parseFloat(a.quantity),q()},q=()=>{g.value=0,d.value.total_amount=0;for(let a=0;a<c.value.length;a++)g.value+=parseFloat(c.value[a].total_profit),d.value.total_amount+=parseFloat(c.value[a].total_amount);d.value.total_profit=parseFloat(g.value).toFixed(2)},M=()=>{m.value.isActive=!0,A.updateProfit(c.value,d.value,Number(w.params.id)).then(a=>{m.value.isActive=!1,R(a.data.message),$.push("/apps/pos/benefitultra/list")}).catch(a=>{m.value.isActive=!1,console.log(a)})},I=()=>{m.value.isActive=!0,A.refreshData(Number(w.params.id)).then(a=>{console.log(a),m.value.isActive=!1,F(),R(a.data.message)}).catch(a=>{m.value.isActive=!1,console.log(a)})};return(a,o)=>(v(),y(P,null,{default:l(()=>[e(Z,{"model-value":s(m).isActive,class:"align-center justify-center"},{default:l(()=>[e(Y,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(r,{cols:"12",md:"12"},{default:l(()=>[e(B,null,{default:l(()=>[e(L,{class:"d-flex flex-wrap justify-space-between flex-column"},{default:l(()=>[e(ee,{ref:"refForm",onSubmit:o[4]||(o[4]=z(()=>{},["prevent"]))},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(_,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:s(d).total_amount,"onUpdate:modelValue":o[0]||(o[0]=t=>s(d).total_amount=t),type:"number",readonly:"",label:"TOTAL AMOUNT",placeholder:"TOTAL AMOUNT"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(_,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:s(d).total_profit,"onUpdate:modelValue":o[1]||(o[1]=t=>s(d).total_profit=t),type:"number",readonly:"",label:"TOTAL PROFIT",placeholder:"TOTAL PROFIT"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4",md:"1",class:"mt-7"},{default:l(()=>[e(V,{onClick:o[2]||(o[2]=t=>M())},{default:l(()=>[i(" Submit ")]),_:1})]),_:1}),e(r,{cols:"4",md:"1",class:"mt-7"},{default:l(()=>[e(V,{color:"success",onClick:o[3]||(o[3]=t=>I())},{default:l(()=>[i(" Refresh ")]),_:1})]),_:1})]),_:1}),(v(!0),Q(J,null,H(s(c),t=>(v(),y(P,null,{default:l(()=>[e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{modelValue:t.product.name,"onUpdate:modelValue":u=>t.product.name=u,label:"Name of the product",placeholder:"Name of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.product_price,"onUpdate:modelValue":[u=>t.product_price=u,u=>O(t)],label:"Product's Price",placeholder:"price of the product"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.benefit,"onUpdate:modelValue":[u=>t.benefit=u,u=>O(t)],label:"Product's Benefit",placeholder:"Benefit of the product"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.quantity,"onUpdate:modelValue":u=>t.quantity=u,label:"Product's Quantity",placeholder:"quantity of the product this month",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.total_amount,"onUpdate:modelValue":u=>t.total_amount=u,label:"Product's total amount",placeholder:"total amount of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.total_profit,"onUpdate:modelValue":u=>t.total_profit=u,label:"Product's total profit",placeholder:"total profit of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),256))]),_:1},512)]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:l(()=>[e(B,{class:"mb-8"},{default:l(()=>[e(L,null,{default:l(()=>[e(V,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:o[5]||(o[5]=t=>b.value=!0)},{default:l(()=>[i(" Send Invoice ")]),_:1}),s(N)?(v(),y(V,{key:0,block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-preview-id",params:{id:s(j)}}},{default:l(()=>[i(" Preview ")]),_:1},8,["to"])):S("",!0),s(N)?S("",!0):(v(),y(V,{key:1,loading:s(m).isActive,disabled:s(m).isActive,block:"",color:"success",class:"mb-2",onClick:D},{default:l(()=>[i(" Save ")]),_:1},8,["loading","disabled"]))]),_:1})]),_:1}),te,f("div",le,[e(_,{for:"payment-terms"},{default:l(()=>[i(" Payment Terms ")]),_:1}),f("div",null,[e(k,{id:"payment-terms",modelValue:s(U),"onUpdate:modelValue":o[6]||(o[6]=t=>h(U)?U.value=t:null)},null,8,["modelValue"])])]),f("div",ae,[e(_,{for:"client-notes"},{default:l(()=>[i(" Client Notes ")]),_:1}),f("div",null,[e(k,{id:"client-notes",modelValue:s(T),"onUpdate:modelValue":o[7]||(o[7]=t=>h(T)?T.value=t:null)},null,8,["modelValue"])])]),f("div",oe,[e(_,{for:"payment-stub"},{default:l(()=>[i(" Payment Stub ")]),_:1}),f("div",null,[e(k,{id:"payment-stub",modelValue:s(x),"onUpdate:modelValue":o[8]||(o[8]=t=>h(x)?x.value=t:null)},null,8,["modelValue"])])])]),_:1}),e(X,{isDrawerOpen:s(b),"onUpdate:isDrawerOpen":o[9]||(o[9]=t=>h(b)?b.value=t:null)},null,8,["isDrawerOpen"])]),_:1}))}};typeof C=="function"&&C(se);export{se as default};
