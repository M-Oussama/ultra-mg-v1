import{k as e,bd as Q,$ as D,Z as W,A as Z,o as c,c as m,p as l,w as r,q as n,m as s,x as d,b as N,y as O,F as x,a as V,E as C,D as f}from"./main.d35fbec3.js";import{_ as G,a as H}from"./EditEmployeeDrawer.804bf974.js";import{_ as K}from"./ConfirmationDialog.183ea1ee.js";import{s as P,e as S}from"./errorsMiddleware.4625f22b.js";import{u as X}from"./useAttendanceStore.9ffd8048.js";import{a as Y}from"./VOverlay.14a0b7c6.js";import{a as I,V as U}from"./VBtn.700b1318.js";import{a as $,V as ee}from"./VRow.8db60750.js";import{V as R,c as T}from"./VCard.f8041308.js";import{V as te}from"./VTable.9594b719.js";import"./AppDateTimePicker.ffef8622.js";import"./VField.227569ed.js";import"./index.61b6a4c2.js";import"./VInput.39d6375e.js";import"./router.c3ce030e.js";import"./VImg.ce8fe4e4.js";import"./position.9303592e.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VSpacer.579caa23.js";import"./VAvatar.19c9e7af.js";import"./VForm.9c58eaf3.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.eac73b49.js";/* empty css                   */import"./VCounter.cf623612.js";import"./VAutocomplete.7a715ec5.js";import"./VSelect.095bc109.js";import"./VList.36b17c1a.js";import"./VDivider.29d004f4.js";import"./dialog-transition.d0501c4f.js";import"./VMenu.094cfd40.js";import"./scopeId.d773ef8a.js";import"./VCheckboxBtn.6bc04730.js";import"./VSelectionControl.24c4861f.js";import"./VChip.ad6b807d.js";import"./filter.f936f71c.js";import"./VNavigationDrawer.e2f98f69.js";import"./ssrBoot.8070aa61.js";import"./DialogCloseBtn.c5d0edaa.js";import"./VDialog.c66cd88f.js";import"./lazy.db74bf33.js";const ae={class:"align-center flex-wrap gap-4"},se=s("thead",null,[s("tr",null,[s("th",{class:"text-center"}," Employee "),s("th",{class:"text-center"}," Start Date "),s("th",{class:"text-center"}," Days "),s("th",{class:"text-center"}," Number Of Present Days "),s("th",{class:"text-center"}," End Date ")])],-1),le={class:"text-center"},oe={class:"text-center"},re={class:"ma-0"},ne=s("th",{class:"text-center"}," Jours(J) ",-1),ie={class:"text-center"},ce={class:"text-center"},ue={class:"ma-0"},at={__name:"[id]",setup(me){const y=X(),j=e(""),F=Q(),J=e(!1),i=e({isActive:!0});e(0),e([]),e(!0),e(),e(),e();const b=e(10),p=e(1),v=e(1),M=e(0);e();let h=e({month:"",year:""}),E=e([]),k=e({});D(()=>{i.value.isActive=!0,y.getAttendanceByID(Number(F.params.id)).then(o=>{E.value=o.data.employeeAttendance,h.value=o.data.attendance,console.log(o),i.value.isActive=!1}).catch(o=>{console.error(o),i.value.isActive=!1})}),D(()=>{p.value>v.value&&(p.value=v.value)}),W(j,()=>{fetchAttendances()});const g=e(!1),w=e(!1),_=e(!1);let u=e();D(()=>{p.value>v.value&&(p.value=v.value)}),Z(()=>{const o=k.value.length?(p.value-1)*b.value+1:0,t=k.value.length+(p.value-1)*b.value;return`Showing ${o} to ${t} of ${M.value} entries`});const q=o=>{i.value.isActive=!0,y.updateAttendance(o).then(t=>{P(t.data.message),i.value.isActive=!1,fetchAttendances()}).catch(t=>{S(t.data.message),i.value.isActive=!1})},z=o=>{i.value.isActive=!0,y.deleteAttendance(o).then(t=>{i.value.isActive=!1,P(t.data.message)}).catch(t=>{S(t.data.message),i.value.isActive=!1}),fetchAttendances()};e(!0);const L=()=>{window.print()};return(o,t)=>(c(),m("section",null,[l(ee,null,{default:r(()=>[l(Y,{"model-value":n(i).isActive,class:"align-center justify-center"},{default:r(()=>[l(I,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l($,{cols:"12",md:"9"},{default:r(()=>[l(R,{class:"text-center"},{default:r(()=>[l(T,{class:"flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:r(()=>[s("h3",null,"Attendance "+d(n(h).month)+"/ "+d(n(h).year),1),s("div",ae,[s("div",null,[n(J)?(c(),N(I,{key:0,indeterminate:"",color:"primary"})):O("",!0)]),l(te,{class:"mt-6"},{default:r(()=>[se,s("tbody",null,[(c(!0),m(x,null,V(n(E),a=>(c(),m("tr",null,[s("th",le,d(a.employee.name)+" "+d(a.employee.surname),1),s("th",oe,[(c(!0),m(x,null,V(a.result,(B,A)=>(c(),m("p",re,d(B[0].start_date),1))),256))]),ne,s("th",ie,d(a.present_count),1),s("th",ce,[(c(!0),m(x,null,V(a.result,(B,A)=>(c(),m("p",ue,d(A===""?"Still Working":A),1))),256))])]))),256))])]),_:1})])]),_:1})]),_:1})]),_:1}),l($,{cols:"12",md:"3",class:"d-print-none"},{default:r(()=>[l(R,{class:"mb-8 print-row"},{default:r(()=>[l(T,null,{default:r(()=>[l(U,{block:"","prepend-icon":"tabler-send",class:"mb-2"},{default:r(()=>[C(" Send Invoice ")]),_:1}),l(U,{block:"",color:"default",variant:"tonal",onClick:L},{default:r(()=>[C(" Print ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{isDrawerOpen:n(g),"onUpdate:isDrawerOpen":t[0]||(t[0]=a=>f(g)?g.value=a:null),onEmployeeData:o.addNewEmployee},null,8,["isDrawerOpen","onEmployeeData"]),l(H,{isDrawerOpen:n(w),"onUpdate:isDrawerOpen":t[1]||(t[1]=a=>f(w)?w.value=a:null),employee:n(u),"onUpdate:employee":t[2]||(t[2]=a=>f(u)?u.value=a:u=a),onEmployeeData:q},null,8,["isDrawerOpen","employee"]),n(_)?(c(),N(K,{key:0,isDialogVisible:n(_),"onUpdate:isDialogVisible":t[3]||(t[3]=a=>f(_)?_.value=a:null),employee:n(u),"onUpdate:employee":t[4]||(t[4]=a=>f(u)?u.value=a:u=a),onEmployeeData:z},null,8,["isDialogVisible","employee"])):O("",!0)]))}};export{at as default};
