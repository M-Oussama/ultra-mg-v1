import{k as t,o as x,b as P,w as a,m as i,p as e,C as A,q as l,P as Z,D as c,be as G,E as O,ay as q,Z as M,y as j,$ as R,A as te,r as oe,c as B,F as se,a as re,x as I,H as ne,I as ie}from"./main.cf9f31a9.js";import{r as N,e as J}from"./validators.330a354f.js";import{V as H}from"./VSpacer.6ec948ae.js";import{V as U,a as de}from"./VBtn.d73656ae.js";import{V as T,c as F}from"./VCard.a1247ba2.js";import{V as K}from"./VForm.f1d9c3ac.js";import{V as Q,a as C}from"./VRow.a394feb3.js";import{V as $}from"./VTextField.9102871e.js";import{V as W}from"./VNavigationDrawer.2d863e08.js";import{V as ue}from"./VSwitch.ba1ab839.js";import{_ as pe}from"./DialogCloseBtn.1c4165b0.js";import{V as me}from"./VDialog.ac89ffbe.js";import{u as ce}from"./useUserListStore.61d03b91.js";import{V as L}from"./VDivider.01acf602.js";import{V as fe}from"./VSelect.32c4b2dd.js";import{V as ve}from"./VTable.60781dfc.js";import{V as Ve}from"./VAvatar.9270a597.js";import{V as we}from"./VImg.134af49b.js";import{V as _e}from"./VPagination.7fcfaf73.js";import"./index.b522f886.js";import"./router.1658937d.js";import"./position.b360a9d1.js";import"./VInput.d6b4ca43.js";import"./index.d1f0132a.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.6a2ec846.js";import"./easing.36b781ab.js";import"./VCounter.4f92d6c5.js";import"./ssrBoot.e94d367d.js";import"./VSelectionControl.5a5e7888.js";import"./scopeId.08611610.js";import"./VOverlay.9d9650d6.js";import"./lazy.f959659a.js";import"./dialog-transition.b0009893.js";import"./VList.a34172e8.js";import"./VMenu.3df9bfa4.js";import"./VCheckboxBtn.b3570faf.js";import"./VChip.6c2e2c44.js";const be={class:"d-flex align-center pa-6 pb-1"},ye=i("h6",{class:"text-h6"}," Add User ",-1),ge={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(z,{emit:V}){const g=z,D=t(!1),_=t(),b=t(""),u=t("");t(""),t(""),t(""),t();let d=t(),v=t(!1),p=t(!1),w=t();t(),t();const k=()=>{V("update:isDrawerOpen",!1),q(()=>{var y,s;(y=_.value)==null||y.reset(),(s=_.value)==null||s.resetValidation()})},h=()=>{var y;(y=_.value)==null||y.validate().then(({valid:s})=>{s&&(V("userData",{name:b.value,email:u.value,password:d.value}),V("update:isDrawerOpen",!1),q(()=>{var o,n;(o=_.value)==null||o.reset(),(n=_.value)==null||n.resetValidation()}))})},S=y=>{V("update:isDrawerOpen",y)};return(y,s)=>(x(),P(W,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":g.isDrawerOpen,"onUpdate:modelValue":S},{default:a(()=>[i("div",be,[ye,e(H),e(U,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:k},{default:a(()=>[e(A,{size:"18",icon:"tabler-x"})]),_:1})]),e(l(Z),{options:{wheelPropagation:!1}},{default:a(()=>[e(T,{flat:""},{default:a(()=>[e(F,null,{default:a(()=>[e(K,{ref_key:"refForm",ref:_,modelValue:l(D),"onUpdate:modelValue":s[6]||(s[6]=o=>c(D)?D.value=o:null),onSubmit:G(h,["prevent"])},{default:a(()=>[e(Q,null,{default:a(()=>[e(C,{cols:"12"},{default:a(()=>[e($,{modelValue:l(b),"onUpdate:modelValue":s[0]||(s[0]=o=>c(b)?b.value=o:null),rules:[l(N)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e($,{modelValue:l(u),"onUpdate:modelValue":s[1]||(s[1]=o=>c(u)?u.value=o:null),rules:[l(N),l(J)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e($,{"hide-details":"auto","append-inner-icon":l(v)?"mdi-eye-off":"mdi-eye",type:l(v)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":s[2]||(s[2]=o=>c(v)?v.value=!l(v):v=!l(v)),modelValue:l(d),"onUpdate:modelValue":s[3]||(s[3]=o=>c(d)?d.value=o:d=o),rules:[l(N)],label:"password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e($,{"hide-details":"auto","append-inner-icon":l(p)?"mdi-eye-off":"mdi-eye",type:l(p)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":s[4]||(s[4]=o=>c(p)?p.value=!l(p):p=!l(p)),modelValue:l(w),"onUpdate:modelValue":s[5]||(s[5]=o=>c(w)?w.value=o:w=o),rules:[l(N),o=>!!o||"Confirm password is required",o=>o===l(d)||"Passwords do not match"],label:"Confirm Password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e(U,{type:"submit",class:"me-3"},{default:a(()=>[O(" Submit ")]),_:1}),e(U,{type:"reset",variant:"tonal",color:"secondary",onClick:k},{default:a(()=>[O(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},De={class:"d-flex align-center pa-6 pb-1"},xe=i("h6",{class:"text-h6"}," Edit User ",-1),Ue={__name:"EditUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},user:{type:Object}},emits:["update:isDrawerOpen","userData"],setup(z,{emit:V}){const g=z;M(()=>g.user,s=>{s&&(b.value=s.id||0,u.value=s.name||"",d.value=s.email||"")});const D=t(!1),_=t(),b=t(),u=t(""),d=t("");t(""),t(""),t(""),t();let v=t(),p=t(!1),w=t(!1),k=t(!1),h=t();t(),t();const S=()=>{V("update:isDrawerOpen",!1),q(()=>{var s,o;(s=_.value)==null||s.reset(),(o=_.value)==null||o.resetValidation()})},y=()=>{var s;(s=_.value)==null||s.validate().then(({valid:o})=>{o&&(V("userData",{passwordchanged:k.value,id:b.value,name:u.value,email:d.value,password:v.value}),V("update:isDrawerOpen",!1),q(()=>{var n,E;(n=_.value)==null||n.reset(),(E=_.value)==null||E.resetValidation()}))})};return(s,o)=>(x(),P(W,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":g.isDrawerOpen},{default:a(()=>[i("div",De,[xe,e(H),e(U,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:S},{default:a(()=>[e(A,{size:"18",icon:"tabler-x"})]),_:1})]),e(l(Z),{options:{wheelPropagation:!1}},{default:a(()=>[e(T,{flat:""},{default:a(()=>[e(F,null,{default:a(()=>[e(K,{ref_key:"refForm",ref:_,modelValue:l(D),"onUpdate:modelValue":o[7]||(o[7]=n=>c(D)?D.value=n:null),onSubmit:G(y,["prevent"])},{default:a(()=>[e(Q,null,{default:a(()=>[e(C,{cols:"12"},{default:a(()=>[e($,{modelValue:l(u),"onUpdate:modelValue":o[0]||(o[0]=n=>c(u)?u.value=n:null),rules:[l(N)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e($,{modelValue:l(d),"onUpdate:modelValue":o[1]||(o[1]=n=>c(d)?d.value=n:null),rules:[l(N),l(J)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e(ue,{modelValue:l(k),"onUpdate:modelValue":o[2]||(o[2]=n=>c(k)?k.value=n:k=n),inset:"",label:"Change Password "},null,8,["modelValue"])]),_:1}),l(k)?(x(),P(C,{key:0,cols:"12"},{default:a(()=>[e($,{"hide-details":"auto","append-inner-icon":l(p)?"mdi-eye-off":"mdi-eye",type:l(p)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o[3]||(o[3]=n=>c(p)?p.value=!l(p):p=!l(p)),modelValue:l(v),"onUpdate:modelValue":o[4]||(o[4]=n=>c(v)?v.value=n:v=n),rules:[l(N)],label:"password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1})):j("",!0),l(k)?(x(),P(C,{key:1,cols:"12"},{default:a(()=>[e($,{"hide-details":"auto","append-inner-icon":l(w)?"mdi-eye-off":"mdi-eye",type:l(w)?"text":"password",density:"compact","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o[5]||(o[5]=n=>c(w)?w.value=!l(w):w=!l(w)),modelValue:l(h),"onUpdate:modelValue":o[6]||(o[6]=n=>c(h)?h.value=n:h=n),rules:[l(N),n=>!!n||"Confirm password is required",n=>n===l(v)||"Passwords do not match"],label:"Confirm Password"},null,8,["append-inner-icon","type","modelValue","rules"])]),_:1})):j("",!0),e(C,{cols:"12"},{default:a(()=>[e(U,{type:"submit",class:"me-3"},{default:a(()=>[O(" Submit ")]),_:1}),e(U,{type:"reset",variant:"tonal",color:"secondary",onClick:S},{default:a(()=>[O(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ke={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},user:{type:Object,required:!0}},emits:["update:isDrawerOpen","userData"],setup(z,{emit:V}){const g=z,D=t(),_=()=>{V("update:isDialogVisible",!1)};M(()=>g.user,u=>{u&&(D.value=u.id||0)});const b=()=>{V("userData",{id:g.user.id}),V("update:isDialogVisible",!1)};return(u,d)=>{const v=pe;return x(),P(me,{modelValue:g.isDialogVisible,"onUpdate:modelValue":d[2]||(d[2]=p=>g.isDialogVisible=p),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(v,{onClick:d[0]||(d[0]=p=>_())}),e(T,{title:"Confirmation"},{default:a(()=>[e(F,null,{default:a(()=>[O(" Are you sure you want to delete this user ? ")]),_:1}),e(F,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(U,{color:"secondary",variant:"tonal",onClick:d[1]||(d[1]=p=>V("update:isDialogVisible",!1))},{default:a(()=>[O(" Disagree ")]),_:1}),e(U,{onClick:b},{default:a(()=>[O(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Ce={class:"me-3",style:{width:"80px"}},he={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Oe={style:{width:"10rem"}},Se=i("thead",null,[i("tr",null,[i("th",{scope:"col"}," ID "),i("th",{scope:"col"}," USER "),i("th",{scope:"col"}," email "),i("th",{scope:"col"}," ACTIONS ")])],-1),Pe={class:"d-flex align-center"},$e={key:1},Ne={class:"d-flex flex-column"},ze={class:"text-base"},Ie={class:"text-sm text-disabled"},Fe={class:"text-capitalize text-base font-weight-semibold"},Ae={class:"text-center",style:{width:"5rem"}},Ee=i("tr",null,[i("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Be=[Ee],qe={class:"text-sm text-disabled"},kl={__name:"index",setup(z){const V=ce(),g=t(""),D=t(!1),_=t(!0);t(),t(),t();const b=t(10),u=t(1),d=t(1),v=t(0);let p=t([]);const w=()=>{V.fetchUsers({searchValue:g.value,perPage:b.value,currentPage:u.value}).then(m=>{p.value=m.data.users.data,d.value=m.data.totalPage,v.value=m.data.totalUsers,D.value=!1}).catch(m=>{console.error(m)})};R(w),R(()=>{u.value>d.value&&(u.value=d.value)}),M(g,()=>{D.value=!0,w()});const k=m=>m==="subscriber"?{color:"warning",icon:"tabler-user"}:m==="author"?{color:"success",icon:"tabler-circle-check"}:m==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:m==="editor"?{color:"info",icon:"tabler-pencil"}:m==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},h=t(!1),S=t(!1),y=t(!1);let s=t();R(()=>{u.value>d.value&&(u.value=d.value)});const o=te(()=>{const m=p.value.length?(u.value-1)*b.value+1:0,f=p.value.length+(u.value-1)*b.value;return`Showing ${m} to ${f} of ${v.value} entries`}),n=m=>{V.addUser(m),w()},E=m=>{V.updateUser(m),w()},X=m=>{V.deleteUser(m),w()},Y=m=>{S.value=!0,s=m},ee=m=>{y.value=!0,s=m};return(m,f)=>{const le=oe("RouterLink");return x(),B("section",null,[e(Q,null,{default:a(()=>[e(C,{cols:"12"},{default:a(()=>[e(T,{title:"Users"},{default:a(()=>[e(L),e(F,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[i("div",Ce,[e(fe,{modelValue:l(b),"onUpdate:modelValue":f[0]||(f[0]=r=>c(b)?b.value=r:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(H),i("div",he,[i("div",Oe,[l(D)?(x(),P(de,{key:0,indeterminate:"",color:"primary"})):(x(),P($,{key:1,onInput:f[1]||(f[1]=r=>_.value=!0),ref:"searchField",modelValue:l(g),"onUpdate:modelValue":f[2]||(f[2]=r=>c(g)?g.value=r:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(U,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:a(()=>[O(" Export ")]),_:1}),e(U,{"prepend-icon":"tabler-plus",onClick:f[3]||(f[3]=r=>h.value=!0)},{default:a(()=>[O(" Add New User ")]),_:1})])]),_:1}),e(L),e(ve,{class:"text-no-wrap"},{default:a(()=>[Se,i("tbody",null,[(x(!0),B(se,null,re(l(p),r=>(x(),B("tr",{key:r.id,style:{height:"3.75rem"}},[i("td",null,I(r.id),1),i("td",null,[i("div",Pe,[e(Ve,{variant:"tonal",color:k(r.role).color,class:"me-3",size:"38"},{default:a(()=>[r.avatar?(x(),P(we,{key:0,src:r.avatar},null,8,["src"])):(x(),B("span",$e,I(r.name.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),i("div",Ne,[i("h6",ze,[e(le,{to:{name:"apps-user-view-id",params:{id:r.id}},class:"font-weight-medium user-list-name"},{default:a(()=>[O(I(r.name),1)]),_:2},1032,["to"])]),i("span",Ie,"@"+I(r.email),1)])])]),i("td",null,[i("span",Fe,I(r.email),1)]),i("td",Ae,[e(U,{icon:"",size:"x-small",color:"default",variant:"text",onClick:ae=>Y(r)},{default:a(()=>[e(A,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(U,{icon:"",size:"x-small",color:"default",variant:"text",onClick:ae=>ee(r)},{default:a(()=>[e(A,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(U,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e(A,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),ne(i("tfoot",null,Be,512),[[ie,!l(p).length]])]),_:1}),e(L),e(F,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[i("span",qe,I(l(o)),1),e(_e,{modelValue:l(u),"onUpdate:modelValue":f[4]||(f[4]=r=>c(u)?u.value=r:null),size:"small","total-visible":5,length:l(d)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ge,{isDrawerOpen:l(h),"onUpdate:isDrawerOpen":f[5]||(f[5]=r=>c(h)?h.value=r:null),onUserData:n},null,8,["isDrawerOpen"]),e(Ue,{isDrawerOpen:l(S),"onUpdate:isDrawerOpen":f[6]||(f[6]=r=>c(S)?S.value=r:null),user:l(s),"onUpdate:user":f[7]||(f[7]=r=>c(s)?s.value=r:s=r),onUserData:E},null,8,["isDrawerOpen","user"]),l(y)?(x(),P(ke,{key:0,isDialogVisible:l(y),"onUpdate:isDialogVisible":f[8]||(f[8]=r=>c(y)?y.value=r:null),user:l(s),"onUpdate:user":f[9]||(f[9]=r=>c(s)?s.value=r:s=r),onUserData:X},null,8,["isDialogVisible","user"])):j("",!0)])}}};export{kl as default};
