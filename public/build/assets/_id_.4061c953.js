import{k as t,bd as z,$ as w,Z as L,A as Q,o as u,c as A,p as o,w as r,q as n,m as s,x as d,b,y as E,F as Z,a as G,E as k,D as p}from"./main.cf9f31a9.js";import{_ as H,a as K}from"./EditEmployeeDrawer.30c53733.js";import{_ as W}from"./ConfirmationDialog.5db50079.js";import{s as B}from"./successMiddleware.8a77ff6b.js";import{e as C}from"./errorsMiddleware.ca71b8e1.js";import{u as X}from"./useAttendanceStore.7e1b3906.js";import{a as Y}from"./VOverlay.9d9650d6.js";import{a as N,V as O}from"./VBtn.d73656ae.js";import{a as P,V as ee}from"./VRow.a394feb3.js";import{V as I,c as S}from"./VCard.a1247ba2.js";import{V as te}from"./VTable.60781dfc.js";import"./AppDateTimePicker.b70b0339.js";import"./VField.6a2ec846.js";import"./index.d1f0132a.js";import"./VInput.d6b4ca43.js";import"./router.1658937d.js";import"./VImg.134af49b.js";import"./position.b360a9d1.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VSpacer.6ec948ae.js";import"./VAvatar.9270a597.js";import"./VForm.f1d9c3ac.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.9102871e.js";/* empty css                   */import"./VCounter.4f92d6c5.js";import"./VAutocomplete.dab6d47c.js";import"./VSelect.32c4b2dd.js";import"./VList.a34172e8.js";import"./VDivider.01acf602.js";import"./dialog-transition.b0009893.js";import"./VMenu.3df9bfa4.js";import"./scopeId.08611610.js";import"./VCheckboxBtn.b3570faf.js";import"./VSelectionControl.5a5e7888.js";import"./VChip.6c2e2c44.js";import"./filter.73bf6f77.js";import"./VNavigationDrawer.2d863e08.js";import"./ssrBoot.e94d367d.js";import"./DialogCloseBtn.1c4165b0.js";import"./VDialog.ac89ffbe.js";import"./lazy.f959659a.js";const ae={class:"align-center flex-wrap gap-4"},se=s("thead",null,[s("tr",null,[s("th",{class:"text-center"}," Employee "),s("th",{class:"text-center"}," Date de r\xE9crutement "),s("th",{class:"text-center"}," Jours "),s("th",{class:"text-center"}," Jours de travail "),s("th",{class:"text-center"}," Date de fin ")])],-1),le={class:"text-center"},oe={class:"text-center"},re={class:"ma-0"},ne=s("th",{class:"text-center"}," Jours(J) ",-1),ie={class:"text-center"},ce={class:"text-center"},de={class:"ma-0"},st={__name:"[id]",setup(me){const v=X(),U=t(""),$=z(),J=t(!1),i=t({isActive:!0});t(0),t([]),t(!0),t(),t(),t();const D=t(10),m=t(1),f=t(1),M=t(0);t();let g=t({month:"",year:""}),x=t([]),V=t({});w(()=>{i.value.isActive=!0,v.getAttendanceByID(Number($.params.id)).then(e=>{x.value=e.data.employeeAttendance,g.value=e.data.attendance,console.log(e),i.value.isActive=!1}).catch(e=>{console.error(e),i.value.isActive=!1})}),w(()=>{m.value>f.value&&(m.value=f.value)}),L(U,()=>{fetchAttendances()});const h=t(!1),y=t(!1),_=t(!1);let c=t();w(()=>{m.value>f.value&&(m.value=f.value)}),Q(()=>{const e=V.value.length?(m.value-1)*D.value+1:0,a=V.value.length+(m.value-1)*D.value;return`Showing ${e} to ${a} of ${M.value} entries`});const R=e=>{i.value.isActive=!0,v.updateAttendance(e).then(a=>{B(a.data.message),i.value.isActive=!1,fetchAttendances()}).catch(a=>{C(a.data.message),i.value.isActive=!1})},T=e=>{i.value.isActive=!0,v.deleteAttendance(e).then(a=>{i.value.isActive=!1,B(a.data.message)}).catch(a=>{C(a.data.message),i.value.isActive=!1}),fetchAttendances()};t(!0);const j=()=>{window.print()},F=e=>e[""]?e[""][0].career.start_date:e[0][0].career.start_date,q=e=>e[""]?e[""][0].career.end_date==null?"":e[""][0].career.end_date:e[0][0].career.start_date==null?"":e[0][0].career.end_date;return(e,a)=>(u(),A("section",null,[o(ee,null,{default:r(()=>[o(Y,{"model-value":n(i).isActive,class:"align-center justify-center"},{default:r(()=>[o(N,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),o(P,{cols:"12",md:"9"},{default:r(()=>[o(I,{class:"text-center"},{default:r(()=>[o(S,{class:"flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:r(()=>[s("h3",null,"Pointage Mois "+d(("0"+n(g).month).slice(-2))+"/ "+d(n(g).year),1),s("div",ae,[s("div",null,[n(J)?(u(),b(N,{key:0,indeterminate:"",color:"primary"})):E("",!0)]),o(te,{class:"mt-6"},{default:r(()=>[se,s("tbody",null,[(u(!0),A(Z,null,G(n(x),l=>(u(),A("tr",null,[s("th",le,d(l.employee.name)+" "+d(l.employee.surname),1),s("th",oe,[s("p",re,d(F(l.result)),1)]),ne,s("th",ie,d(l.present_count),1),s("th",ce,[s("p",de,d(q(l.result)),1)])]))),256))])]),_:1})])]),_:1})]),_:1})]),_:1}),o(P,{cols:"12",md:"3",class:"d-print-none"},{default:r(()=>[o(I,{class:"mb-8 print-row"},{default:r(()=>[o(S,null,{default:r(()=>[o(O,{block:"","prepend-icon":"tabler-send",class:"mb-2"},{default:r(()=>[k(" Send Invoice ")]),_:1}),o(O,{block:"",color:"default",variant:"tonal",onClick:j},{default:r(()=>[k(" Print ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(H,{isDrawerOpen:n(h),"onUpdate:isDrawerOpen":a[0]||(a[0]=l=>p(h)?h.value=l:null),onEmployeeData:e.addNewEmployee},null,8,["isDrawerOpen","onEmployeeData"]),o(K,{isDrawerOpen:n(y),"onUpdate:isDrawerOpen":a[1]||(a[1]=l=>p(y)?y.value=l:null),employee:n(c),"onUpdate:employee":a[2]||(a[2]=l=>p(c)?c.value=l:c=l),onEmployeeData:R},null,8,["isDrawerOpen","employee"]),n(_)?(u(),b(W,{key:0,isDialogVisible:n(_),"onUpdate:isDialogVisible":a[3]||(a[3]=l=>p(_)?_.value=l:null),employee:n(c),"onUpdate:employee":a[4]||(a[4]=l=>p(c)?c.value=l:c=l),onEmployeeData:T},null,8,["isDialogVisible","employee"])):E("",!0)]))}};export{st as default};
