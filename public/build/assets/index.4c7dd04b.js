import{k as s,o as A,b as E,w as l,m as c,p as e,C as q,q as o,P as te,D as n,be as ae,E as N,ay as M,Z as Y,bc as de,a1 as K,$ as W,A as ce,r as pe,c as L,y as j,F as me,a as fe,x as B,H as ve,I as Ve,bf as X}from"./main.ccc6aae0.js";import{r as $}from"./validators.330a354f.js";import{V as Z}from"./VSpacer.fc3a499d.js";import{V as T,a as ee}from"./VBtn.7efa8e0f.js";import{V as J,c as I}from"./VCard.36c7adfd.js";import{V as oe}from"./VForm.8ba2a0de.js";import{V as G,a as y}from"./VRow.a17ab33e.js";import{V as P}from"./VTextField.8db2e7e8.js";import{V as se}from"./VSwitch.45f4ff8e.js";import{V as re}from"./VNavigationDrawer.df836fef.js";import{_ as be}from"./DialogCloseBtn.eb9ea561.js";import{V as _e}from"./VDialog.11663ea2.js";import{e as Q}from"./errorsMiddleware.ca8f0215.js";import{s as le}from"./successMiddleware.53303d8d.js";import{P as R}from"./permissions.bafe5f34.js";import{a as ge}from"./VOverlay.0ad0cca7.js";import{V as H}from"./VDivider.09896c6c.js";import{V as De}from"./VSelect.b041d3dc.js";import{V as ye}from"./VTable.484ee967.js";import{V as we}from"./VAvatar.cb7dc9a5.js";import{V as xe}from"./VImg.e193e870.js";import{V as ke}from"./VChip.768b9a43.js";import{V as Pe}from"./VPagination.ced5ec2a.js";import"./index.b522f886.js";import"./router.25b57325.js";import"./position.ea536dab.js";import"./VInput.1586f7cc.js";import"./index.720d3b34.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.8b77e1e2.js";import"./easing.36b781ab.js";import"./VCounter.d2fed1b1.js";import"./VSelectionControl.e824dbee.js";import"./ssrBoot.81f110ad.js";import"./scopeId.1409e92e.js";import"./dialog-transition.e2b69798.js";import"./lazy.ab6dcefa.js";import"./VList.54d6dfac.js";import"./VMenu.01138ff3.js";import"./VCheckboxBtn.cfb39e43.js";const Ue={class:"d-flex align-center pa-6 pb-1"},Se=c("h6",{class:"text-h6"}," Add User ",-1),Ce={__name:"AddNewProductDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","productData"],setup(C,{emit:f}){const g=C,D=s(!1),v=s(),x=s(""),i=s(""),p=s(""),k=s(""),b=s(""),V=s(0);let w=s(0),h=s(0),_=s(!1);const U=s(0),S=()=>{f("update:isDrawerOpen",!1),M(()=>{var u,t;(u=v.value)==null||u.reset(),(t=v.value)==null||t.resetValidation()})},O=()=>{var u;(u=v.value)==null||u.validate().then(({valid:t})=>{t&&(f("productData",{name:x.value,brand:i.value,description:p.value,product_code:k.value,SKU:b.value,min_stock_level:V.value,price:w.value,stockable:_.value,tax_rate:U.value,weight:h.value}),f("update:isDrawerOpen",!1),M(()=>{var a,z;(a=v.value)==null||a.reset(),(z=v.value)==null||z.resetValidation()}))})},F=u=>{f("update:isDrawerOpen",u)};return(u,t)=>(A(),E(re,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":g.isDrawerOpen,"onUpdate:modelValue":F},{default:l(()=>[c("div",Ue,[Se,e(Z),e(T,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:S},{default:l(()=>[e(q,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(te),{options:{wheelPropagation:!1}},{default:l(()=>[e(J,{flat:""},{default:l(()=>[e(I,null,{default:l(()=>[e(oe,{ref_key:"refForm",ref:v,modelValue:o(D),"onUpdate:modelValue":t[10]||(t[10]=a=>n(D)?D.value=a:null),onSubmit:ae(O,["prevent"])},{default:l(()=>[e(G,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(x),"onUpdate:modelValue":t[0]||(t[0]=a=>n(x)?x.value=a:null),rules:[o($)],label:"Product Name"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(i),"onUpdate:modelValue":t[1]||(t[1]=a=>n(i)?i.value=a:null),label:"Product Brand"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(p),"onUpdate:modelValue":t[2]||(t[2]=a=>n(p)?p.value=a:null),label:"Product description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(k),"onUpdate:modelValue":t[3]||(t[3]=a=>n(k)?k.value=a:null),label:"Product code"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(b),"onUpdate:modelValue":t[4]||(t[4]=a=>n(b)?b.value=a:null),label:"Product SKU"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(V),"onUpdate:modelValue":t[5]||(t[5]=a=>n(V)?V.value=a:null),rules:[o($)],label:"min stock level",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(h),"onUpdate:modelValue":t[6]||(t[6]=a=>n(h)?h.value=a:h=a),rules:[o($)],label:"Weight",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(w),"onUpdate:modelValue":t[7]||(t[7]=a=>n(w)?w.value=a:w=a),rules:[o($)],label:"Price",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(se,{modelValue:o(_),"onUpdate:modelValue":t[8]||(t[8]=a=>n(_)?_.value=a:_=a),"false-value":0,"true-value":1,inset:"",label:"Stockable"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(U),"onUpdate:modelValue":t[9]||(t[9]=a=>n(U)?U.value=a:null),type:"number",rules:[o($)],label:"Tax Rate"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(T,{type:"submit",class:"me-3"},{default:l(()=>[N(" Submit ")]),_:1}),e(T,{type:"reset",variant:"tonal",color:"secondary",onClick:S},{default:l(()=>[N(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},he={class:"d-flex align-center pa-6 pb-1"},Oe=c("h6",{class:"text-h6"}," Edit Product ",-1),Ae={__name:"EditProductDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},product:{type:Object}},emits:["update:isDrawerOpen","productData"],setup(C,{emit:f}){const g=C;Y(()=>g.product,u=>{console.log(u),u&&(x.value=u.id||0,i.value=u.name||"",p.value=u.brand||"",k.value=u.description||"",b.value=u.product_code||"",V.value=u.SKU||"",w.value=u.min_stock_level||0,_.value=u.price||0,U.value=u.stockable||0,S.value=u.tax_rate||0,h.value=u.weight||0)});const D=s(!1),v=s(),x=s(),i=s(""),p=s(""),k=s(""),b=s(""),V=s(""),w=s(0),h=s(0);let _=s(0),U=s(0);const S=s(0),O=()=>{f("update:isDrawerOpen",!1),M(()=>{var u,t;(u=v.value)==null||u.reset(),(t=v.value)==null||t.resetValidation()})},F=()=>{var u;(u=v.value)==null||u.validate().then(({valid:t})=>{t&&(f("productData",{id:x.value,name:i.value,brand:p.value,description:k.value,product_code:b.value,SKU:V.value,min_stock_level:w.value,price:_.value,stockable:!!U.value,tax_rate:S.value,weight:h.value}),f("update:isDrawerOpen",!1),M(()=>{var a,z;(a=v.value)==null||a.reset(),(z=v.value)==null||z.resetValidation()}))})};return(u,t)=>(A(),E(re,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":g.isDrawerOpen},{default:l(()=>[c("div",he,[Oe,e(Z),e(T,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:O},{default:l(()=>[e(q,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(te),{options:{wheelPropagation:!1}},{default:l(()=>[e(J,{flat:""},{default:l(()=>[e(I,null,{default:l(()=>[e(oe,{ref_key:"refForm",ref:v,modelValue:o(D),"onUpdate:modelValue":t[10]||(t[10]=a=>n(D)?D.value=a:null),onSubmit:ae(F,["prevent"])},{default:l(()=>[e(G,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(i),"onUpdate:modelValue":t[0]||(t[0]=a=>n(i)?i.value=a:null),rules:[o($)],label:"Product Name"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(p),"onUpdate:modelValue":t[1]||(t[1]=a=>n(p)?p.value=a:null),label:"Product Brand"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(k),"onUpdate:modelValue":t[2]||(t[2]=a=>n(k)?k.value=a:null),label:"Product description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(b),"onUpdate:modelValue":t[3]||(t[3]=a=>n(b)?b.value=a:null),label:"Product code"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(V),"onUpdate:modelValue":t[4]||(t[4]=a=>n(V)?V.value=a:null),label:"Product SKU"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(w),"onUpdate:modelValue":t[5]||(t[5]=a=>n(w)?w.value=a:null),rules:[o($)],label:"min stock level",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(h),"onUpdate:modelValue":t[6]||(t[6]=a=>n(h)?h.value=a:null),rules:[o($)],label:"Weight",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(_),"onUpdate:modelValue":t[7]||(t[7]=a=>n(_)?_.value=a:_=a),rules:[o($)],label:"Price",type:"number"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(se,{modelValue:o(U),"onUpdate:modelValue":t[8]||(t[8]=a=>n(U)?U.value=a:U=a),"false-value":0,"true-value":1,inset:"",label:"Stockable"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(P,{modelValue:o(S),"onUpdate:modelValue":t[9]||(t[9]=a=>n(S)?S.value=a:null),type:"number",rules:[o($)],label:"Tax Rate"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(T,{type:"submit",class:"me-3"},{default:l(()=>[N(" Submit ")]),_:1}),e(T,{type:"reset",variant:"tonal",color:"secondary",onClick:O},{default:l(()=>[N(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Te={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},product:{type:Object,required:!0}},emits:["update:isDrawerOpen","productData"],setup(C,{emit:f}){const g=C,D=s(),v=()=>{f("update:isDialogVisible",!1)};Y(()=>g.product,i=>{i&&(D.value=i.id||0)});const x=()=>{f("productData",{id:g.product.id}),f("update:isDialogVisible",!1)};return(i,p)=>{const k=be;return A(),E(_e,{modelValue:g.isDialogVisible,"onUpdate:modelValue":p[2]||(p[2]=b=>g.isDialogVisible=b),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(k,{onClick:p[0]||(p[0]=b=>v())}),e(J,{title:"Confirmation"},{default:l(()=>[e(I,null,{default:l(()=>[N(" Are you sure you want to delete this product ? ")]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(T,{color:"secondary",variant:"tonal",onClick:p[1]||(p[1]=b=>f("update:isDialogVisible",!1))},{default:l(()=>[N(" Disagree ")]),_:1}),e(T,{onClick:x},{default:l(()=>[N(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ne=de("ProductListStore",{actions:{fetchProducts(C){return K.get("/api/products/list",{params:C})},addProduct(C){const{name:f,brand:g,description:D,product_code:v,SKU:x,min_stock_level:i,weight:p,price:k,stockable:b,tax_rate:V}=C;return new Promise((w,h)=>{K.post("/api/products/store",{name:f,brand:g,description:D,product_code:v,SKU:x,min_stock_level:i,price:k,stockable:b,tax_rate:V,weight:p}).then(_=>{w(_)}).catch(_=>{Q(_),h(_)})})},updateProduct(C){const{id:f,name:g,brand:D,description:v,product_code:x,SKU:i,min_stock_level:p,weight:k,price:b,stockable:V,tax_rate:w}=C;return new Promise((h,_)=>{let U={name:g,brand:D,description:v,product_code:x,SKU:i,min_stock_level:p,price:b,stockable:V,tax_rate:w,weight:k};K.post("/api/products/update/"+f,U).then(S=>{h(S)}).catch(S=>{_(S)})})},fetchProduct(C){return new Promise((f,g)=>{K.get(`/apps/products/${C}`).then(D=>f(D)).catch(D=>g(D))})},deleteProduct(C){console.log(C);const{id:f}=C;return new Promise((g,D)=>{K.delete("/api/products/delete/"+f).then(v=>g(v)).catch(v=>D(v))})}}});const Ee={class:"me-3",style:{width:"80px"}},$e={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{width:"8rem"}},Be=c("thead",null,[c("tr",null,[c("th",{scope:"col"}," ID "),c("th",{scope:"col"}," Product "),c("th",{scope:"col"}," SKU "),c("th",{scope:"col"}," Stockable "),c("th",{scope:"col"}," ACTIONS ")])],-1),Re={class:"d-flex align-center"},Ie={key:1},Fe={class:"d-flex flex-column"},Ke={class:"text-base"},qe={class:"text-sm text-disabled"},Le={class:"text-capitalize text-base font-weight-semibold"},je={class:"text-center",style:{width:"5rem"}},Me=c("tr",null,[c("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Je=[Me],We={class:"text-sm text-disabled"},He={__name:"index",setup(C){const f=Ne(),g=s(""),D=s(!1),v=s(!0);s(),s(),s();const x=s(10),i=s(1),p=s(1),k=s(0);let b=s([]),V=s({isActive:!1});const w=()=>{V.value.isActive=!0,f.fetchProducts({searchValue:g.value,perPage:x.value,currentPage:i.value}).then(m=>{b.value=m.data.products.data,p.value=m.data.totalPage,k.value=m.data.totalProducts,D.value=!1,V.value.isActive=!1}).catch(m=>{console.error(m),V.value.isActive=!1})};W(w),W(()=>{i.value>p.value&&(i.value=p.value)}),Y(g,()=>{D.value=!0,w()});const h=m=>m==="subscriber"?{color:"warning",icon:"tabler-user"}:m==="author"?{color:"success",icon:"tabler-circle-check"}:m==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:m==="editor"?{color:"info",icon:"tabler-pencil"}:m==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},_=s(!1),U=s(!1),S=s(!1);let O=s();W(()=>{i.value>p.value&&(i.value=p.value)});const F=ce(()=>{const m=b.value.length?(i.value-1)*x.value+1:0,d=b.value.length+(i.value-1)*x.value;return`Showing ${m} to ${d} of ${k.value} entries`}),u=m=>{V.value.isActive=!0,f.addProduct(m).then(d=>{V.value.isActive=!1,le(d.data.message),w()}).catch(d=>{Q(d),V.value.isActive=!1})},t=m=>{V.value.isActive=!0,f.updateProduct(m).then(d=>{V.value.isActive=!1,le("requests.product.success"),w()}).catch(d=>{Q(d),V.value.isActive=!1})},a=m=>{f.deleteProduct(m),w()},z=m=>{U.value=!0,O=m},ue=m=>{S.value=!0,O=m};return(m,d)=>{const ne=pe("RouterLink");return A(),L("section",null,[e(G,null,{default:l(()=>[e(ge,{"model-value":o(V).isActive,class:"align-center justify-center"},{default:l(()=>[e(ee,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(y,{cols:"12"},{default:l(()=>[e(J,{title:"Products"},{default:l(()=>[e(H),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[c("div",Ee,[e(De,{modelValue:o(x),"onUpdate:modelValue":d[0]||(d[0]=r=>n(x)?x.value=r:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),c("div",$e,[c("div",ze,[o(D)?(A(),E(ee,{key:0,indeterminate:"",color:"primary"})):(A(),E(P,{key:1,onInput:d[1]||(d[1]=r=>v.value=!0),ref:"searchField",modelValue:o(g),"onUpdate:modelValue":d[2]||(d[2]=r=>n(g)?g.value=r:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(T,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:l(()=>[N(" Export ")]),_:1}),m.$can(o(R).PRODUCT.ADD,o(R).PRODUCT.SUBJECT)?(A(),E(T,{key:0,"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=r=>_.value=!0)},{default:l(()=>[N(" Add New Product ")]),_:1})):j("",!0)])]),_:1}),e(H),e(ye,{class:"text-no-wrap"},{default:l(()=>[Be,c("tbody",null,[(A(!0),L(me,null,fe(o(b),r=>(A(),L("tr",{key:r.id,style:{height:"3.75rem"}},[c("td",null,B(r.id),1),c("td",null,[c("div",Re,[e(we,{variant:"tonal",color:h(r.role).color,class:"me-3",size:"38"},{default:l(()=>[r.avatar?(A(),E(xe,{key:0,src:r.avatar},null,8,["src"])):(A(),L("span",Ie,B(r.name.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),c("div",Fe,[c("h6",Ke,[e(ne,{to:{name:"apps-user-view-id",params:{id:r.id}},class:"font-weight-medium user-list-name"},{default:l(()=>[N(B(r.name),1)]),_:2},1032,["to"])]),c("span",qe,"@"+B(r.brand),1)])])]),c("td",null,[c("span",Le,B(r.SKU),1)]),c("td",null,[e(ke,{color:r.stockable?"success":"error",variant:"elevated"},{default:l(()=>[N(B(r.stockable?"YES":"NO"),1)]),_:2},1032,["color"])]),c("td",je,[m.$can(o(R).PRODUCT.EDIT,o(R).PRODUCT.SUBJECT)?(A(),E(T,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:ie=>z(r)},{default:l(()=>[e(q,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):j("",!0),m.$can(o(R).PRODUCT.DELETE,o(R).PRODUCT.SUBJECT)?(A(),E(T,{key:1,icon:"",size:"x-small",color:"default",variant:"text",onClick:ie=>ue(r)},{default:l(()=>[e(q,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):j("",!0),e(T,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(q,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),ve(c("tfoot",null,Je,512),[[Ve,!o(b).length]])]),_:1}),e(H),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:l(()=>[c("span",We,B(o(F)),1),e(Pe,{modelValue:o(i),"onUpdate:modelValue":d[4]||(d[4]=r=>n(i)?i.value=r:null),size:"small","total-visible":5,length:o(p)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ce,{isDrawerOpen:o(_),"onUpdate:isDrawerOpen":d[5]||(d[5]=r=>n(_)?_.value=r:null),onProductData:u},null,8,["isDrawerOpen"]),e(Ae,{isDrawerOpen:o(U),"onUpdate:isDrawerOpen":d[6]||(d[6]=r=>n(U)?U.value=r:null),product:o(O),"onUpdate:product":d[7]||(d[7]=r=>n(O)?O.value=r:O=r),onProductData:t},null,8,["isDrawerOpen","product"]),o(S)?(A(),E(Te,{key:0,isDialogVisible:o(S),"onUpdate:isDialogVisible":d[8]||(d[8]=r=>n(S)?S.value=r:null),product:o(O),"onUpdate:product":d[9]||(d[9]=r=>n(O)?O.value=r:O=r),onProductData:a},null,8,["isDialogVisible","product"])):j("",!0)])}}};typeof X=="function"&&X(He);export{He as default};
