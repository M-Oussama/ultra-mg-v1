import{k as n,Z as ae,o as r,b as c,w as l,p as e,E as y,$ as j,A as le,r as oe,q as o,m as a,D as m,y as D,C as V,c as k,a as se,x as g,O as ie,F as ne,H as re,I as de,bf as q}from"./main.ccc6aae0.js";import{_ as ce}from"./AppDateTimePicker.be59b953.js";import{a as ue}from"./formatters.4acf44a4.js";import{u as me}from"./usereturnStore.48824869.js";import{_ as pe}from"./InvoiceAddPaymentDrawer.f02078b8.js";import{_ as fe}from"./DialogCloseBtn.eb9ea561.js";import{V as G,c as A}from"./VCard.36c7adfd.js";import{V as h,a as ve}from"./VBtn.7efa8e0f.js";import{V as Ve}from"./VDialog.11663ea2.js";import{P as _}from"./permissions.bafe5f34.js";import{a as ge}from"./VOverlay.0ad0cca7.js";import{V as F}from"./VSelect.b041d3dc.js";import{V as _e}from"./VAutocomplete.5bdf49b5.js";import{V as H}from"./VDivider.09896c6c.js";import{V as xe}from"./VTable.484ee967.js";import{V as be}from"./VTooltip.e4653d13.js";import{V as M}from"./VAvatar.cb7dc9a5.js";import{V as De}from"./VImg.e193e870.js";import{V as he}from"./VMenu.01138ff3.js";import{V as ye,a as Z,b as Q}from"./VList.54d6dfac.js";import{V as we}from"./VSpacer.fc3a499d.js";import{V as Re}from"./VPagination.ced5ec2a.js";import{a as Ce,V as Se}from"./VRow.a17ab33e.js";import"./VField.8b77e1e2.js";import"./index.720d3b34.js";import"./VInput.1586f7cc.js";import"./router.25b57325.js";import"./position.ea536dab.js";import"./easing.36b781ab.js";import"./index.b522f886.js";import"./useSaleStore.1640952e.js";import"./errorsMiddleware.ca8f0215.js";import"./successMiddleware.53303d8d.js";import"./VForm.8ba2a0de.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.8db2e7e8.js";/* empty css                   */import"./VCounter.d2fed1b1.js";import"./VTextarea.815956f4.js";import"./VNavigationDrawer.df836fef.js";import"./ssrBoot.81f110ad.js";import"./scopeId.1409e92e.js";import"./dialog-transition.e2b69798.js";import"./lazy.ab6dcefa.js";import"./VCheckboxBtn.cfb39e43.js";import"./VSelectionControl.e824dbee.js";import"./VChip.768b9a43.js";import"./filter.7282d4f9.js";const Te={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},product:{type:Object,required:!0}},emits:["update:isDrawerOpen","preturnData"],setup(z,{emit:x}){const b=z,w=n(),p=()=>{x("update:isDialogVisible",!1)};ae(()=>b.product,f=>{f&&(w.value=f.id||0)});const d=()=>{console.log(b.product),x("preturnData",{id:b.product.id}),x("update:isDialogVisible",!1)};return(f,u)=>{const v=fe;return r(),c(Ve,{modelValue:b.isDialogVisible,"onUpdate:modelValue":u[2]||(u[2]=R=>b.isDialogVisible=R),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(v,{onClick:u[0]||(u[0]=R=>p())}),e(G,{title:"Confirmation"},{default:l(()=>[e(A,null,{default:l(()=>[y(" Are you sure you want to delete this record ? ")]),_:1}),e(A,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(h,{color:"secondary",variant:"tonal",onClick:u[1]||(u[1]=R=>x("update:isDialogVisible",!1))},{default:l(()=>[y(" Disagree ")]),_:1}),e(h,{onClick:d},{default:l(()=>[y(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const ke={class:"d-flex align-center",style:{width:"135px"}},Ee=a("span",{class:"text-no-wrap me-3"},"Show:",-1),Ue={class:"d-flex align-center",style:{width:"30%"}},Pe={class:"d-flex align-center flex-wrap gap-4"},Ie={class:"invoice-list-filter"},Ne={class:"invoice-list-filter"},Ae={class:"invoice-list-filter"},Oe={class:"me-3"},$e={class:"text-uppercase"},ze=a("th",{scope:"col"}," #ID ",-1),Le={scope:"col",class:"text-center"},Be=a("th",{scope:"col"}," CLIENT ",-1),Je=a("th",{scope:"col",class:"text-center"}," TOTAL ",-1),je=a("th",{scope:"col"}," Issued Date ",-1),qe=a("th",{scope:"col"}," ACTIONS ",-1),Fe={class:"text-center"},He={class:"mb-0"},Me={key:0,class:"mb-0"},Ze={key:1,class:"mb-0"},Qe={class:"d-flex align-center"},Ge={key:1},Ke={class:"d-flex flex-column"},We={class:"text-base font-weight-medium mb-0"},Xe={class:"text-disabled text-sm"},Ye={class:"text-center"},et={style:{width:"8rem"}},tt=a("tr",null,[a("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),at=[tt],lt={class:"text-sm text-disabled"},ot={__name:"index",setup(z){const x=me(),b=n(""),w=n(),p=n(10),d=n(1),f=n(1),u=n(0),v=n([]),R=n([]),E=n(!1),L=n([]),U=n(""),P=n(""),S=n(!1);let C=n();const I=n(""),K=n([{id:1,name:"PAID"},{id:0,name:"ON HOLD"}]),O=()=>{x.fetchReturns({searchValue:b.value,status:w.value,perPage:p.value,currentPage:d.value,client_id:I.value,from:U.value,to:P.value}).then(i=>{T.value.isActive=!1,v.value=i.data.returns,L.value=i.data.clients,f.value=i.data.totalPage,u.value=i.data.totalReturns}).catch(i=>{T.value.isActive=!1,console.log(i)})};j(()=>{O()}),j(()=>{d.value>f.value&&(d.value=f.value)});const W=le(()=>{const i=v.value.length?(d.value-1)*p.value+1:0,s=v.value.length+(d.value-1)*p.value;return`Showing ${i} to ${s} of ${u.value} entries`}),$=i=>i!==void 0&&i.paid?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-x"},X=n(),T=n({isActive:!0}),Y=i=>{S.value=!0,C=i,console.log(C)},ee=i=>{x.deleteReturn(i).then(s=>{O()}).catch(s=>{console.log(s)})},N=()=>{T.value.isActive=!0,O()};return(i,s)=>{const B=ce,te=oe("RouterLink");return r(),c(Se,null,{default:l(()=>[e(ge,{"model-value":o(T).isActive,class:"align-center justify-center"},{default:l(()=>[e(ve,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(Ce,null,{default:l(()=>[o(v)?(r(),c(G,{key:0,id:"invoice-list"},{default:l(()=>[e(A,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[a("div",ke,[Ee,e(F,{modelValue:o(p),"onUpdate:modelValue":s[0]||(s[0]=t=>m(p)?p.value=t:null),density:"compact",items:[10,20,30,50,100,500,1e3,5e3]},null,8,["modelValue"])]),a("div",Ue,[e(_e,{clearable:"",modelValue:o(I),"onUpdate:modelValue":[s[1]||(s[1]=t=>m(I)?I.value=t:null),N],items:o(L),"item-value":"id","item-title":"name",label:"Client",placeholder:"Client"},null,8,["modelValue","items"])]),a("div",Pe,[a("div",Ie,[e(B,{modelValue:o(U),"onUpdate:modelValue":[s[2]||(s[2]=t=>m(U)?U.value=t:null),N],label:"From Date"},null,8,["modelValue"])]),a("div",Ne,[e(B,{modelValue:o(P),"onUpdate:modelValue":[s[3]||(s[3]=t=>m(P)?P.value=t:null),N],label:"To Date"},null,8,["modelValue"])]),a("div",Ae,[e(F,{modelValue:o(w),"onUpdate:modelValue":[s[4]||(s[4]=t=>m(w)?w.value=t:null),N],label:"Select Status",clearable:"","item-value":"id","item-title":"name","clear-icon":"tabler-x","single-line":"",items:o(K)},null,8,["modelValue","items"])]),a("div",Oe,[i.$can(o(_).RETURN.ADD,o(_).RETURN.SUBJECT)?(r(),c(h,{key:0,"prepend-icon":"tabler-plus",to:{name:"apps-POS-return-add"}},{default:l(()=>[y(" Create ")]),_:1})):D("",!0)])])]),_:1}),e(H),e(xe,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[a("thead",$e,[a("tr",null,[ze,a("th",Le,[e(V,{icon:"tabler-trending-up"})]),Be,Je,je,qe])]),a("tbody",null,[(r(!0),k(ne,null,se(o(v),t=>(r(),k("tr",{key:t.id,style:{height:"3.75rem"}},[a("td",null,[e(te,{to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:l(()=>[y(" #"+g(t.id),1)]),_:2},1032,["to"])]),a("td",Fe,[e(be,null,{activator:l(({props:J})=>[e(M,ie({size:30},J,{color:$(t).variant,variant:"tonal"}),{default:l(()=>[e(V,{size:20,icon:$(t).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[a("p",He,g(t.invoiceStatus),1),t.paid?(r(),k("p",Me," Delivered ")):(r(),k("p",Ze," ON HOLD "))]),_:2},1024)]),a("td",null,[a("div",Qe,[e(M,{size:"34",color:$(t).variant,variant:"tonal",class:"me-3"},{default:l(()=>[t.avatar?(r(),c(De,{key:0,src:t.avatar},null,8,["src"])):(r(),k("span",Ge,g(o(ue)(t.client.name)),1))]),_:2},1032,["color"]),a("div",Ke,[a("h6",We,g(t.client.name),1),a("span",Xe,g(t.client.email),1)])])]),a("td",Ye,g(t.total_amount)+" DZD ",1),a("td",null,g(t.date),1),a("td",et,[e(h,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(V,{icon:"tabler-mail",size:22})]),_:1}),i.$can(o(_).RETURN.DELETE,o(_).RETURN.SUBJECT)?(r(),c(h,{key:0,icon:"",variant:"text",color:"default",size:"x-small",onClick:J=>Y(t)},{default:l(()=>[e(V,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])):D("",!0),i.$can(o(_).RETURN.LIST,o(_).RETURN.SUBJECT)?(r(),c(h,{key:1,icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:l(()=>[e(V,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"])):D("",!0),e(h,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(V,{size:22,icon:"tabler-dots-vertical"}),e(he,{activator:"parent"},{default:l(()=>[e(ye,null,{default:l(()=>[e(Z,{value:"download"},{prepend:l(()=>[e(V,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[e(Q,null,{default:l(()=>[y("Download")]),_:1})]),_:1}),i.$can(o(_).RETURN.EDIT,o(_).RETURN.SUBJECT)?(r(),c(Z,{key:0,to:{name:"apps-POS-return-edit-id",params:{id:t.id}}},{prepend:l(()=>[e(V,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[e(Q,null,{default:l(()=>[y("Edit")]),_:1})]),_:2},1032,["to"])):D("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),re(a("tfoot",null,at,512),[[de,!o(v).length]])]),_:1}),e(H),e(A,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[a("span",lt,g(o(W)),1),e(we),e(Re,{modelValue:o(d),"onUpdate:modelValue":s[5]||(s[5]=t=>m(d)?d.value=t:null),size:"small","total-visible":5,length:o(f),onNext:s[6]||(s[6]=t=>R.value=[]),onPrev:s[7]||(s[7]=t=>R.value=[])},null,8,["modelValue","length"])]),_:1}),o(S)?(r(),c(Te,{key:0,isDialogVisible:o(S),"onUpdate:isDialogVisible":s[8]||(s[8]=t=>m(S)?S.value=t:null),product:o(C),"onUpdate:product":s[9]||(s[9]=t=>m(C)?C.value=t:C=t),onPreturnData:ee},null,8,["isDialogVisible","product"])):D("",!0)]),_:1})):D("",!0)]),_:1}),o(E)?(r(),c(pe,{key:0,loading:o(T),data:o(X),isDrawerOpen:o(E),"onUpdate:isDrawerOpen":s[10]||(s[10]=t=>m(E)?E.value=t:null)},null,8,["loading","data","isDrawerOpen"])):D("",!0)]),_:1})}}};typeof q=="function"&&q(ot);export{ot as default};
