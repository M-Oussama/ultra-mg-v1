import{k as n,$ as A,A as j,r as q,o as u,b,w as l,p as e,q as s,m as t,D as _,E as f,C as d,c as S,a as H,x as r,O as M,F as Q,H as Z,I as G,y as O}from"./main.c3533bd0.js";import{a as J}from"./formatters.4acf44a4.js";import{u as K}from"./useSaleStore.420e6e1e.js";import{_ as W}from"./InvoiceAddPaymentDrawer.8d54daa8.js";import{a as X,V as w}from"./VBtn.767ed1b7.js";import{a as Y}from"./VOverlay.851a1061.js";import{V as ee,c as T}from"./VCard.bf35c916.js";import{V as L}from"./VSelect.f9bb5d50.js";import{V as N}from"./VSpacer.d2f15bbd.js";import{V as te}from"./VTextField.bdd7c815.js";import{V as $}from"./VDivider.28755b18.js";import{V as ae}from"./VTable.659abf6e.js";import{V as le}from"./VTooltip.df757cf5.js";import{V as B}from"./VAvatar.14ab3838.js";import{V as oe}from"./VImg.e1d6d13a.js";import{V as se}from"./VMenu.19d01492.js";import{V as ie,a as P,b as D}from"./VList.8c4d2492.js";import{V as ne}from"./VPagination.55cfa99a.js";import{a as re,V as ce}from"./VRow.f890f0c0.js";import"./index.b522f886.js";import"./AppDateTimePicker.1c1984b4.js";import"./VField.ecc7b478.js";import"./index.866805b8.js";import"./VInput.f1d0603b.js";import"./router.833d6863.js";import"./position.d9639743.js";import"./easing.36b781ab.js";import"./errorsMiddleware.86b9fa82.js";import"./VForm.bdfa9659.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.887217ee.js";/* empty css                   */import"./VCounter.97b6be8b.js";import"./VNavigationDrawer.e11e4389.js";import"./ssrBoot.1044c117.js";import"./lazy.5ed267c5.js";import"./dialog-transition.846b6af6.js";import"./VCheckboxBtn.c907e9f6.js";import"./VSelectionControl.3364d55e.js";import"./VChip.dd846cb6.js";import"./scopeId.5eb40561.js";const de={class:"d-flex align-center",style:{width:"135px"}},ue=t("span",{class:"text-no-wrap me-3"},"Show:",-1),me={class:"me-3"},pe={class:"d-flex align-center flex-wrap gap-4"},ve={class:"invoice-list-filter"},_e={class:"invoice-list-filter"},fe={class:"text-uppercase"},Ve=t("th",{scope:"col"}," #ID ",-1),he={scope:"col",class:"text-center"},xe=t("th",{scope:"col"}," CLIENT ",-1),ge=t("th",{scope:"col",class:"text-center"}," TOTAL ",-1),be=t("th",{scope:"col"}," Issued Date ",-1),we=t("th",{scope:"col"}," ACTIONS ",-1),ye={class:"text-center"},Se={class:"mb-0"},Pe={class:"mb-0"},De={class:"d-flex align-center"},ke={key:1},ze={class:"d-flex flex-column"},Ce={class:"text-base font-weight-medium mb-0"},Ie={class:"text-disabled text-sm"},Ae={class:"text-center"},Oe={style:{width:"8rem"}},Te=t("tr",null,[t("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Le=[Te],Ne={class:"text-sm text-disabled"},St={__name:"index",setup($e){const E=K(),V=n(""),h=n(),m=n(10),c=n(1),x=n(1),k=n(0),p=n([]),z=n([]),v=n(!1);A(()=>{E.fetchSales({searchValue:V.value,status:h.value,perPage:m.value,currentPage:c.value}).then(i=>{g.value.isActive=!1,p.value=i.data.sales.data,x.value=i.data.totalPage,k.value=i.data.totalSales}).catch(i=>{g.value.isActive=!1,console.log(i)})}),A(()=>{c.value>x.value&&(c.value=x.value)});const R=j(()=>{const i=p.value.length?(c.value-1)*m.value+1:0,o=p.value.length+(c.value-1)*m.value;return`Showing ${i} to ${o} of ${k.value} entries`}),y=i=>i>0?{variant:"error",icon:"tabler-chart-pie"}:i<0?{variant:"warning",icon:"tabler-alert-circle"}:i==0?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-chart-pie"},C=n(),U=i=>{v.value=!0,C.value=i},g=n({isActive:!0});return(i,o)=>{const F=q("RouterLink");return u(),b(ce,null,{default:l(()=>[e(Y,{"model-value":s(g).isActive,class:"align-center justify-center"},{default:l(()=>[e(X,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(re,null,{default:l(()=>[s(p)?(u(),b(ee,{key:0,id:"invoice-list"},{default:l(()=>[e(T,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[t("div",de,[ue,e(L,{modelValue:s(m),"onUpdate:modelValue":o[0]||(o[0]=a=>_(m)?m.value=a:null),density:"compact",items:[10,20,30,50,100]},null,8,["modelValue"])]),t("div",me,[e(w,{"prepend-icon":"tabler-plus",to:{name:"apps-POS-sale-add"}},{default:l(()=>[f(" Create Sale ")]),_:1})]),e(N),t("div",pe,[t("div",ve,[e(te,{modelValue:s(V),"onUpdate:modelValue":o[1]||(o[1]=a=>_(V)?V.value=a:null),placeholder:"Search Sale",density:"compact"},null,8,["modelValue"])]),t("div",_e,[e(L,{modelValue:s(h),"onUpdate:modelValue":o[2]||(o[2]=a=>_(h)?h.value=a:null),label:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),e($),e(ae,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[t("thead",fe,[t("tr",null,[Ve,t("th",he,[e(d,{icon:"tabler-trending-up"})]),xe,ge,be,we])]),t("tbody",null,[(u(!0),S(Q,null,H(s(p),a=>(u(),S("tr",{key:a.id,style:{height:"3.75rem"}},[t("td",null,[e(F,{to:{name:"apps-POS-sale-preview-id",params:{id:a.id}}},{default:l(()=>[f(" #"+r(a.id),1)]),_:2},1032,["to"])]),t("td",ye,[e(le,null,{activator:l(({props:I})=>[e(B,M({size:30},I,{color:y(a.balance).variant,variant:"tonal"}),{default:l(()=>[e(d,{size:20,icon:y(a.balance).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[t("p",Se,r(a.invoiceStatus),1),t("p",Pe," Balance: "+r(a.balance),1)]),_:2},1024)]),t("td",null,[t("div",De,[e(B,{size:"34",color:y(a.balance).variant,variant:"tonal",class:"me-3"},{default:l(()=>[a.avatar?(u(),b(oe,{key:0,src:a.avatar},null,8,["src"])):(u(),S("span",ke,r(s(J)(a.client.name)),1))]),_:2},1032,["color"]),t("div",ze,[t("h6",Ce,r(a.client.name),1),t("span",Ie,r(a.client.email),1)])])]),t("td",Ae,r(a.total_amount)+" DZD ",1),t("td",null,r(a.sale_date),1),t("td",Oe,[e(w,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(d,{icon:"tabler-mail",size:22})]),_:1}),e(w,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-sale-preview-id",params:{id:a.id}}},{default:l(()=>[e(d,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(w,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(d,{size:22,icon:"tabler-dots-vertical"}),e(se,{activator:"parent"},{default:l(()=>[e(ie,null,{default:l(()=>[e(P,{value:"download"},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[e(D,null,{default:l(()=>[f("Download")]),_:1})]),_:1}),e(P,{to:{name:"apps-POS-sale-edit-id",params:{id:a.id}}},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[e(D,null,{default:l(()=>[f("Edit")]),_:1})]),_:2},1032,["to"]),e(P,{value:"payment",onClick:I=>U(a)},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-credit-card"})]),default:l(()=>[e(D,null,{default:l(()=>[f("Payment")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),Z(t("tfoot",null,Le,512),[[G,!s(p).length]])]),_:1}),e($),e(T,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[t("span",Ne,r(s(R)),1),e(N),e(ne,{modelValue:s(c),"onUpdate:modelValue":o[3]||(o[3]=a=>_(c)?c.value=a:null),size:"small","total-visible":5,length:s(x),onNext:o[4]||(o[4]=a=>z.value=[]),onPrev:o[5]||(o[5]=a=>z.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1})):O("",!0)]),_:1}),s(v)?(u(),b(W,{key:0,loading:s(g),data:s(C),isDrawerOpen:s(v),"onUpdate:isDrawerOpen":o[6]||(o[6]=a=>_(v)?v.value=a:null)},null,8,["loading","data","isDrawerOpen"])):O("",!0)]),_:1})}}};export{St as default};
