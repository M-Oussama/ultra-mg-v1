import{k as r,Z as K,o as S,b as F,w as a,m as n,p as e,C as I,q as s,P as X,D as y,be as ee,E as h,ay as te,bd as ae,r as ce,$ as B,A as pe,c as R,F as me,a as fe,x as P,y as ve,H as _e,I as ge}from"./main.6ddfa6b7.js";import{_ as ye}from"./DialogCloseBtn.286a0e3d.js";import{s as Y,e as M}from"./errorsMiddleware.40f7c14c.js";import{u as Z}from"./useAttendanceStore.09f85bb6.js";import{_ as De}from"./AppDateTimePicker.343c4091.js";import{V as H}from"./VSpacer.892b8e7d.js";import{V as D,a as J}from"./VBtn.376421a6.js";import{V as z,c as $}from"./VCard.0bfd53b9.js";import{V as le}from"./VForm.116cc20e.js";import{V as L,a as O}from"./VRow.09821601.js";import{V as oe}from"./VNavigationDrawer.31b7f178.js";import{a as Ve}from"./VOverlay.2d6bdfb2.js";import{V as j}from"./VDivider.8642c1cc.js";import{V as we}from"./VSelect.ce0e37ca.js";import{V as be}from"./VTextField.84b2ab9a.js";import{V as xe}from"./VTable.5aa25187.js";import{V as he}from"./VPagination.71eff5f3.js";import{V as Ae}from"./VDialog.09415bef.js";import"./VField.b42ed233.js";import"./index.312d6846.js";import"./VInput.5e24232f.js";import"./router.6776eb4e.js";import"./VImg.000ebbd2.js";import"./position.e19bf76f.js";import"./easing.36b781ab.js";import"./VAvatar.de0a6008.js";import"./forwardRefs.c003b6b8.js";import"./ssrBoot.c790042d.js";import"./lazy.f12e00d0.js";import"./VList.9a90da75.js";import"./dialog-transition.0e92eaa3.js";import"./VMenu.f5c9e339.js";import"./scopeId.8423e22b.js";import"./VCheckboxBtn.6755e995.js";import"./VSelectionControl.3c10b28a.js";import"./VChip.4b7cce73.js";/* empty css                   */import"./VCounter.7ab3dccf.js";const Ce={class:"d-flex align-center pa-6 pb-1"},Se=n("h6",{class:"text-h6"}," Update End Date ",-1),ke={__name:"EditEmployeeAttendanceDrawer",props:{isDrawerOpen:{type:null,required:!0},loading:{type:null,required:!0},employee:{type:Object,required:!0},disableEndDate:{type:Boolean,required:!0},disableStartDate:{type:Boolean,required:!0}},setup(E){const d=E,A=Z(),m=r({start_date:"",end_date:""});K(d.isDrawerOpen,()=>{d.isDrawerOpen.open&&(console.log(d.employee),m.value.id=d.employee.id||"",m.value.start_date=d.employee.start_date||"",m.value.end_date=d.employee.end_date||"")});const o=r(!1),b=r();r(),r({id:-1});const C=()=>{d.isDrawerOpen.open=!1,te(()=>{var c,f;(c=b.value)==null||c.reset(),(f=b.value)==null||f.resetValidation()})},w=()=>{d.loading.isActive=!0,console.log(d.loading),A.updateEndDate(m.value.end_date,m.value.start_date,m.value.id).then(c=>{d.isDrawerOpen.open=!1,d.loading.isActive=!1,d.employee.end_date=c.data.endDate,Y(c.data.msg)}).catch(c=>{d.loading.isActive=!1,M("Error Occured",c.response.data.message)})},_=c=>{d.isDrawerOpen.value.open=c};return(c,f)=>{const v=De;return S(),F(oe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":d.isDrawerOpen.open,"onUpdate:modelValue":_},{default:a(()=>[n("div",Ce,[Se,e(H),e(D,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:C},{default:a(()=>[e(I,{size:"18",icon:"tabler-x"})]),_:1})]),e(s(X),{options:{wheelPropagation:!1}},{default:a(()=>[e(z,{flat:""},{default:a(()=>[e($,null,{default:a(()=>[e(le,{ref_key:"refForm",ref:b,modelValue:s(o),"onUpdate:modelValue":f[2]||(f[2]=g=>y(o)?o.value=g:null),onSubmit:ee(w,["prevent"])},{default:a(()=>[e(L,null,{default:a(()=>[e(O,{cols:"12"},{default:a(()=>[e(v,{modelValue:s(m).start_date,"onUpdate:modelValue":f[0]||(f[0]=g=>s(m).start_date=g),label:"Start Date",disabled:E.disableStartDate},null,8,["modelValue","disabled"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(v,{modelValue:s(m).end_date,"onUpdate:modelValue":f[1]||(f[1]=g=>s(m).end_date=g),label:"End Date",config:{minDate:`

                  ${s(m).start_date}`},disabled:E.disableEndDate},null,8,["modelValue","config","disabled"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(D,{type:"submit",class:"me-3"},{default:a(()=>[h(" Submit ")]),_:1}),e(D,{type:"reset",variant:"tonal",color:"secondary",onClick:C},{default:a(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Oe={class:"d-flex align-center pa-6 pb-1"},Ee=n("h6",{class:"text-h6"}," Add New Record ",-1),Ue={__name:"AddEmployeeAttendanceDrawer",props:{isDrawerOpen:{type:null,required:!0},loading:{type:null,required:!0},employees:{type:Object,required:!0}},setup(E){const d=E,A=Z(),m=ae(),o=r({start_date:new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+new Date().getDate(),end_date:"",end_date_restrict:new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+(new Date().getDate()+1)}),b=r(!1),C=r();r(),r({id:-1});const w=()=>{d.isDrawerOpen.open=!1,te(()=>{var i,p;(i=C.value)==null||i.reset(),(p=C.value)==null||p.resetValidation()})},_=()=>{o.value.start_date===""?M("Warning","start date must be selected"):(d.loading.isActive=!0,console.log(d.loading),A.addEmployeeAttendanceRecord(o.value.end_date,o.value.start_date,Number(m.params.id)).then(i=>{d.isDrawerOpen.open=!1,d.loading.isActive=!1,Y(i.data.msg),location.reload()}).catch(i=>{d.loading.isActive=!1,M("Error Occured",i.response.data.message)}))},c=i=>{d.isDrawerOpen.value.open=i};function f(i){return parseInt(i)<10?"0"+i:i}const v=i=>{const p=i.getDate(),x=i.getMonth()+1;return`${i.getFullYear()}-${f(x)}-${f(p)}`},g=()=>{(o.value.start_date===""||o.value.start_date>=o.value.end_date&&o.value.end_date!=="")&&(o.value.end_date=""),o.value.end_date_restrict=new Date(new Date(o.value.start_date).getTime()+24*60*60*2e3).toISOString().split("T")[0]};return(i,p)=>{const x=ce("VueDatePicker");return S(),F(oe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":d.isDrawerOpen.open,"onUpdate:modelValue":c},{default:a(()=>[n("div",Oe,[Ee,e(H),e(D,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:w},{default:a(()=>[e(I,{size:"18",icon:"tabler-x"})]),_:1})]),e(s(X),{options:{wheelPropagation:!1}},{default:a(()=>[e(z,{flat:""},{default:a(()=>[e($,null,{default:a(()=>[e(le,{ref_key:"refForm",ref:C,modelValue:s(b),"onUpdate:modelValue":p[2]||(p[2]=V=>y(b)?b.value=V:null),onSubmit:ee(_,["prevent"])},{default:a(()=>[e(L,null,{default:a(()=>[e(O,{cols:"12"},{default:a(()=>[e(x,{modelValue:s(o).start_date,"onUpdate:modelValue":[p[0]||(p[0]=V=>s(o).start_date=V),g],"auto-apply":"",format:v},null,8,["modelValue"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(x,{modelValue:s(o).end_date,"onUpdate:modelValue":p[1]||(p[1]=V=>s(o).end_date=V),"auto-apply":"",format:v,"min-date":s(o).end_date_restrict},null,8,["modelValue","min-date"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(D,{type:"submit",class:"me-3"},{default:a(()=>[h(" Submit ")]),_:1}),e(D,{type:"reset",variant:"tonal",color:"secondary",onClick:w},{default:a(()=>[h(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const $e={class:"me-3",style:{width:"80px"}},Pe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Fe={style:{width:"9rem"}},Ne=n("thead",null,[n("tr",null,[n("th",{scope:"col"}," ID "),n("th",{scope:"col"}," Start Date "),n("th",{scope:"col"}," End Date "),n("th",{scope:"col"}," Period "),n("th",{scope:"col"}," ACTIONS ")])],-1),Ie={class:"d-flex align-center"},Me={class:"d-flex flex-column"},ze={class:"text-base"},Te={class:"d-flex align-center"},qe={class:"d-flex flex-column"},Be={class:"text-base"},Re={class:"d-flex align-center"},je={class:"d-flex flex-column"},Ye={class:"text-base"},Ze={class:"text-center",style:{width:"5rem"}},He=n("tr",null,[n("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Le=[He],Qe={class:"text-sm text-disabled"},Pt={__name:"[id]",setup(E){const d=Z(),A=r(""),m=r(!1),o=r({isActive:!0}),b=ae(),C=r(!0);r(),r(),r();const w=r(10),_=r(1),c=r(1),f=r(0);let v=r([]),g=r({open:!1}),i=r({open:!1}),p=r({open:!1}),x=r(!1),V=r(!0);const T=()=>{o.value.isActive=!0,d.fetchEmployeesByAttendance(Number(b.params.id)).then(u=>{v.value=u.data.employees.data,c.value=u.data.totalPage,f.value=u.data.totalEmployees,m.value=!1,o.value.isActive=!1,console.log(u)}).catch(u=>{console.error(u),o.value.isActive=!1})};B(T),B(()=>{_.value>c.value&&(_.value=c.value)}),K(A,()=>{T()}),r(!1);let k=r(null);B(()=>{_.value>c.value&&(_.value=c.value)});const ne=pe(()=>{const u=v.value.length?(_.value-1)*w.value+1:0,l=v.value.length+(_.value-1)*w.value;return`Showing ${u} to ${l} of ${f.value} entries`}),se=u=>{k.value=u,g.value.open=!0},re=u=>{k.value=u,i.value.open=!0},de=()=>{p.value.open=!0},ie=()=>{o.value.isActive=!0,i.value.open=!1,d.deleteCareer(k.value.id).then(u=>{o.value.isActive=!1,Y(u.data.message),T()}).catch(u=>{M(u.data.message),o.value.isActive=!1})},Q=()=>{i.value.open=!1},ue=u=>{let l=new Date(u.end_date);u.end_date||(l=new Date);const q=l-new Date(u.start_date),t=Math.floor(q/(1e3*60*60*24)),N=Math.floor(t/365),W=Math.floor(t%365/30),G=t%30;let U="";return N>0&&(U+=("0"+N).slice(-2)+" years, "),W>0&&(U+=("0"+W).slice(-2)+" months, "),G>0&&(U+=("0"+G).slice(-2)+" days"),U=U.replace(/,\s*$/,""),U};return(u,l)=>{const q=ye;return S(),R("section",null,[e(L,null,{default:a(()=>[e(Ve,{"model-value":s(o).isActive,class:"align-center justify-center"},{default:a(()=>[e(J,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(O,{cols:"12"},{default:a(()=>[e(z,{title:"Employees"},{default:a(()=>[e(j),e($,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[n("div",$e,[e(we,{modelValue:s(w),"onUpdate:modelValue":l[0]||(l[0]=t=>y(w)?w.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(H),n("div",Pe,[n("div",Fe,[s(m)?(S(),F(J,{key:0,indeterminate:"",color:"primary"})):(S(),F(be,{key:1,onInput:l[1]||(l[1]=t=>C.value=!0),ref:"searchField",modelValue:s(A),"onUpdate:modelValue":l[2]||(l[2]=t=>y(A)?A.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(D,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:a(()=>[h(" Export ")]),_:1}),e(D,{color:"primary","prepend-icon":"tabler-plus",onClick:l[3]||(l[3]=t=>de())},{default:a(()=>[h(" New Record ")]),_:1})])]),_:1}),e(j),e(xe,{class:"text-no-wrap"},{default:a(()=>[Ne,n("tbody",null,[(S(!0),R(me,null,fe(s(v),t=>(S(),R("tr",{key:t.id,style:{height:"3.75rem"}},[n("td",null,P(t.id),1),n("td",null,[n("div",Ie,[n("div",Me,[n("h6",ze,P(t.start_date),1)])])]),n("td",null,[n("div",Te,[n("div",qe,[n("h6",Be,P(t.end_date),1)])])]),n("td",null,[n("div",Re,[n("div",je,[n("h6",Ye,P(ue(t)),1)])])]),n("td",Ze,[t.last?(S(),F(D,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:N=>se(t)},{default:a(()=>[e(I,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):ve("",!0),e(D,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e(I,{size:"22",icon:"tabler-trash",onClick:N=>re(t)},null,8,["onClick"])]),_:2},1024)])]))),128))]),_e(n("tfoot",null,Le,512),[[ge,!s(v).length]])]),_:1}),e(j),e($,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[n("span",Qe,P(s(ne)),1),e(he,{modelValue:s(_),"onUpdate:modelValue":l[4]||(l[4]=t=>y(_)?_.value=t:null),size:"small","total-visible":5,length:s(c)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ke,{isDrawerOpen:s(g),"onUpdate:isDrawerOpen":l[5]||(l[5]=t=>y(g)?g.value=t:g=t),employee:s(k),"onUpdate:employee":l[6]||(l[6]=t=>y(k)?k.value=t:k=t),"disable-end-date":s(x),"onUpdate:disable-end-date":l[7]||(l[7]=t=>y(x)?x.value=t:x=t),loading:s(o),"onUpdate:loading":l[8]||(l[8]=t=>y(o)?o.value=t:null),"disable-start-date":s(V),"onUpdate:disable-start-date":l[9]||(l[9]=t=>y(V)?V.value=t:V=t)},null,8,["isDrawerOpen","employee","disable-end-date","loading","disable-start-date"]),e(Ue,{isDrawerOpen:s(p),"onUpdate:isDrawerOpen":l[10]||(l[10]=t=>y(p)?p.value=t:p=t),employees:s(v),"onUpdate:employees":l[11]||(l[11]=t=>y(v)?v.value=t:v=t),loading:s(o),"onUpdate:loading":l[12]||(l[12]=t=>y(o)?o.value=t:null)},null,8,["isDrawerOpen","employees","loading"]),e(Ae,{modelValue:s(i).open,"onUpdate:modelValue":l[15]||(l[15]=t=>s(i).open=t),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(q,{onClick:l[13]||(l[13]=t=>Q())}),e(z,{title:"Confirmation"},{default:a(()=>[e($,null,{default:a(()=>[h(" Are you sure you want to delete this record ? ")]),_:1}),e($,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(D,{color:"secondary",variant:"tonal",onClick:l[14]||(l[14]=t=>Q())},{default:a(()=>[h(" Disagree ")]),_:1}),e(D,{onClick:ie},{default:a(()=>[h(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Pt as default};
