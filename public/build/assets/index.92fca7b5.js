import{k as n,Z as M,o as u,b as y,w as a,p as e,E as b,$ as O,A as Q,r as G,q as i,m as l,D as V,c as z,a as J,x as g,C as w,F as K,H as W,I as X,y as A}from"./main.f953bb32.js";import{a as Y}from"./formatters.4acf44a4.js";import{u as ee}from"./usereturnStore.b30cd725.js";import{_ as te}from"./InvoiceAddPaymentDrawer.40c1e4cc.js";import{_ as ae}from"./DialogCloseBtn.d8d8323c.js";import{V as B,c as k}from"./VCard.7307dc50.js";import{V as x,a as le}from"./VBtn.53826497.js";import{V as oe}from"./VDialog.c5a0cc45.js";import{a as se}from"./VOverlay.00baf023.js";import{V as $}from"./VSelect.64bf3f05.js";import{V as T}from"./VSpacer.97180599.js";import{V as ie}from"./VTextField.b3fcc6a6.js";import{V as L}from"./VDivider.0296d5ca.js";import{V as ne}from"./VTable.69dd1c1a.js";import{V as re}from"./VAvatar.cb499833.js";import{V as de}from"./VImg.4ecfe5db.js";import{V as ce}from"./VMenu.4462e6e8.js";import{V as ue,a as N,b as U}from"./VList.b77b6faf.js";import{V as me}from"./VPagination.0b1cb419.js";import{a as pe,V as fe}from"./VRow.463c82a5.js";import"./index.b522f886.js";import"./AppDateTimePicker.220e8818.js";import"./VField.f20494b5.js";import"./index.bcea3609.js";import"./VInput.1c807576.js";import"./router.392dd72d.js";import"./position.20814070.js";import"./easing.36b781ab.js";import"./useSaleStore.6a87799d.js";import"./errorsMiddleware.9f89ec9d.js";import"./successMiddleware.cdacaeb5.js";import"./VForm.4c472cc7.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.810bf745.js";/* empty css                   */import"./VCounter.7a557e1b.js";import"./VNavigationDrawer.81f726b4.js";import"./ssrBoot.9eb188de.js";import"./scopeId.26638b4f.js";import"./dialog-transition.d5a03f10.js";import"./lazy.16b1c569.js";import"./VCheckboxBtn.2d0ad59f.js";import"./VSelectionControl.8ce3f773.js";import"./VChip.713d6306.js";const ve={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},product:{type:Object,required:!0}},emits:["update:isDrawerOpen","preturnData"],setup(I,{emit:v}){const r=I,_=n(),m=()=>{v("update:isDialogVisible",!1)};M(()=>r.product,p=>{p&&(_.value=p.id||0)});const d=()=>{console.log(r.product),v("preturnData",{id:r.product.id}),v("update:isDialogVisible",!1)};return(p,c)=>{const f=ae;return u(),y(oe,{modelValue:r.isDialogVisible,"onUpdate:modelValue":c[2]||(c[2]=D=>r.isDialogVisible=D),persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(f,{onClick:c[0]||(c[0]=D=>m())}),e(B,{title:"Confirmation"},{default:a(()=>[e(k,null,{default:a(()=>[b(" Are you sure you want to delete this record ? ")]),_:1}),e(k,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(x,{color:"secondary",variant:"tonal",onClick:c[1]||(c[1]=D=>v("update:isDialogVisible",!1))},{default:a(()=>[b(" Disagree ")]),_:1}),e(x,{onClick:d},{default:a(()=>[b(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Ve={class:"d-flex align-center",style:{width:"135px"}},ge=l("span",{class:"text-no-wrap me-3"},"Show:",-1),xe={class:"me-3"},be={class:"d-flex align-center flex-wrap gap-4"},_e={class:"invoice-list-filter"},De={class:"invoice-list-filter"},he=l("thead",{class:"text-uppercase"},[l("tr",null,[l("th",{scope:"col"}," #ID "),l("th",{scope:"col"}," CLIENT "),l("th",{scope:"col",class:"text-center"}," TOTAL "),l("th",{scope:"col"}," Issued Date "),l("th",{scope:"col"}," ACTIONS ")])],-1),we={class:"d-flex align-center"},ye={key:1},Ce={class:"d-flex flex-column"},Se={class:"text-base font-weight-medium mb-0"},Pe={class:"text-disabled text-sm"},ke={class:"text-center"},ze={style:{width:"8rem"}},Ae=l("tr",null,[l("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Ie=[Ae],Re={class:"text-sm text-disabled"},yt={__name:"index",setup(I){const v=ee(),r=n(""),_=n(),m=n(10),d=n(1),p=n(1),c=n(0),f=n([]),D=n([]),S=n(!1),C=n(!1);let h=n();const R=()=>{v.fetchReturns({searchValue:r.value,status:_.value,perPage:m.value,currentPage:d.value}).then(s=>{P.value.isActive=!1,f.value=s.data.returns.data,p.value=s.data.totalPage,c.value=s.data.totalReturns}).catch(s=>{P.value.isActive=!1,console.log(s)})};O(()=>{R()}),O(()=>{d.value>p.value&&(d.value=p.value)});const E=Q(()=>{const s=f.value.length?(d.value-1)*m.value+1:0,o=f.value.length+(d.value-1)*m.value;return`Showing ${s} to ${o} of ${c.value} entries`}),j=s=>s.balance>0?s.balance==s.total_amount?{variant:"error",icon:"tabler-x"}:{variant:"info",icon:"tabler-circle-half-2"}:s.balance<0?{variant:"warning",icon:"tabler-alert-circle"}:s.balance==0?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-chart-pie"},q=n(),P=n({isActive:!0}),F=s=>{C.value=!0,h=s,console.log(h)},Z=s=>{v.deleteReturn(s).then(o=>{R()}).catch(o=>{console.log(o)})};return(s,o)=>{const H=G("RouterLink");return u(),y(fe,null,{default:a(()=>[e(se,{"model-value":i(P).isActive,class:"align-center justify-center"},{default:a(()=>[e(le,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(pe,null,{default:a(()=>[i(f)?(u(),y(B,{key:0,id:"invoice-list"},{default:a(()=>[e(k,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[l("div",Ve,[ge,e($,{modelValue:i(m),"onUpdate:modelValue":o[0]||(o[0]=t=>V(m)?m.value=t:null),density:"compact",items:[10,20,30,50,100]},null,8,["modelValue"])]),l("div",xe,[e(x,{"prepend-icon":"tabler-plus",to:{name:"apps-POS-return-add"}},{default:a(()=>[b(" Create return ")]),_:1})]),e(T),l("div",be,[l("div",_e,[e(ie,{modelValue:i(r),"onUpdate:modelValue":o[1]||(o[1]=t=>V(r)?r.value=t:null),placeholder:"Search return",density:"compact"},null,8,["modelValue"])]),l("div",De,[e($,{modelValue:i(_),"onUpdate:modelValue":o[2]||(o[2]=t=>V(_)?_.value=t:null),label:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),e(L),e(ne,{class:"text-no-wrap invoice-list-table"},{default:a(()=>[he,l("tbody",null,[(u(!0),z(K,null,J(i(f),t=>(u(),z("tr",{key:t.id,style:{height:"3.75rem"}},[l("td",null,[e(H,{to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:a(()=>[b(" #"+g(t.id),1)]),_:2},1032,["to"])]),l("td",null,[l("div",we,[e(re,{size:"34",color:j(t).variant,variant:"tonal",class:"me-3"},{default:a(()=>[t.avatar?(u(),y(de,{key:0,src:t.avatar},null,8,["src"])):(u(),z("span",ye,g(i(Y)(t.client.name)),1))]),_:2},1032,["color"]),l("div",Ce,[l("h6",Se,g(t.client.name),1),l("span",Pe,g(t.client.email),1)])])]),l("td",ke,g(t.total_amount)+" DZD ",1),l("td",null,g(t.date),1),l("td",ze,[e(x,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(w,{icon:"tabler-mail",size:22})]),_:1}),e(x,{icon:"",variant:"text",color:"default",size:"x-small",onClick:Oe=>F(t)},{default:a(()=>[e(w,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(x,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:a(()=>[e(w,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(x,{icon:"",variant:"text",color:"default",size:"x-small"},{default:a(()=>[e(w,{size:22,icon:"tabler-dots-vertical"}),e(ce,{activator:"parent"},{default:a(()=>[e(ue,null,{default:a(()=>[e(N,{value:"download"},{prepend:a(()=>[e(w,{size:"24",class:"me-3",icon:"tabler-download"})]),default:a(()=>[e(U,null,{default:a(()=>[b("Download")]),_:1})]),_:1}),e(N,{to:{name:"apps-POS-return-edit-id",params:{id:t.id}}},{prepend:a(()=>[e(w,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:a(()=>[e(U,null,{default:a(()=>[b("Edit")]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),W(l("tfoot",null,Ie,512),[[X,!i(f).length]])]),_:1}),e(L),e(k,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:a(()=>[l("span",Re,g(i(E)),1),e(T),e(me,{modelValue:i(d),"onUpdate:modelValue":o[3]||(o[3]=t=>V(d)?d.value=t:null),size:"small","total-visible":5,length:i(p),onNext:o[4]||(o[4]=t=>D.value=[]),onPrev:o[5]||(o[5]=t=>D.value=[])},null,8,["modelValue","length"])]),_:1}),i(C)?(u(),y(ve,{key:0,isDialogVisible:i(C),"onUpdate:isDialogVisible":o[6]||(o[6]=t=>V(C)?C.value=t:null),product:i(h),"onUpdate:product":o[7]||(o[7]=t=>V(h)?h.value=t:h=t),onPreturnData:Z},null,8,["isDialogVisible","product"])):A("",!0)]),_:1})):A("",!0)]),_:1}),i(S)?(u(),y(te,{key:0,loading:i(P),data:i(q),isDrawerOpen:i(S),"onUpdate:isDrawerOpen":o[8]||(o[8]=t=>V(S)?S.value=t:null)},null,8,["loading","data","isDrawerOpen"])):A("",!0)]),_:1})}}};export{yt as default};
