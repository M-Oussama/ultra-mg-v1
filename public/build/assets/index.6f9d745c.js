import{k as n,Z as te,o as r,b as u,w as l,p as e,E as h,$ as M,A as ae,r as le,q as i,m as a,D as m,y as S,C as V,c as w,a as oe,x as g,O as se,F as ie,H as ne,I as re,bf as J}from"./main.8e3d834c.js";import{_ as de}from"./AppDateTimePicker.96354d05.js";import{a as ue}from"./formatters.4acf44a4.js";import{u as ce}from"./usereturnStore.5821bbd1.js";import{_ as me}from"./InvoiceAddPaymentDrawer.48046dfe.js";import{_ as pe}from"./DialogCloseBtn.6e92c959.js";import{V as Q,c as U}from"./VCard.23579ef6.js";import{V as b,a as fe}from"./VBtn.d45a6048.js";import{V as ve}from"./VDialog.60004fa2.js";import{a as Ve}from"./VOverlay.e098729e.js";import{V as j}from"./VSelect.97f52872.js";import{V as ge}from"./VAutocomplete.bf2fd8ca.js";import{V as q}from"./VDivider.6d6bcb40.js";import{V as De}from"./VTable.aae49bb7.js";import{V as _e}from"./VTooltip.79044a10.js";import{V as F}from"./VAvatar.a16965d6.js";import{V as Se}from"./VImg.5f2c6d35.js";import{V as be}from"./VMenu.07de16f8.js";import{V as he,a as H,b as Z}from"./VList.5eb680d2.js";import{V as xe}from"./VSpacer.8cabb308.js";import{V as ye}from"./VPagination.25f4202e.js";import{a as Ce,V as Ie}from"./VRow.45fdd78b.js";import"./VField.b13be34f.js";import"./index.a0fbf071.js";import"./VInput.221caba9.js";import"./router.96bf7663.js";import"./position.c80f08b0.js";import"./easing.36b781ab.js";import"./index.b522f886.js";import"./useSaleStore.b8524038.js";import"./errorsMiddleware.e88e793d.js";import"./successMiddleware.60712f12.js";import"./VForm.b347f109.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.810b1049.js";/* empty css                   */import"./VCounter.1ff827ea.js";import"./VTextarea.60881078.js";import"./VNavigationDrawer.d95beabf.js";import"./ssrBoot.455730b9.js";import"./scopeId.5ac90517.js";import"./dialog-transition.721de8d1.js";import"./lazy.a8f563f0.js";import"./VCheckboxBtn.515d277c.js";import"./VSelectionControl.a2ce79b7.js";import"./VChip.d81a1f97.js";import"./filter.524761c6.js";const Pe={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},product:{type:Object,required:!0}},emits:["update:isDrawerOpen","preturnData"],setup($,{emit:D}){const _=$,x=n(),p=()=>{D("update:isDialogVisible",!1)};te(()=>_.product,f=>{f&&(x.value=f.id||0)});const d=()=>{console.log(_.product),D("preturnData",{id:_.product.id}),D("update:isDialogVisible",!1)};return(f,c)=>{const v=pe;return r(),u(ve,{modelValue:_.isDialogVisible,"onUpdate:modelValue":c[2]||(c[2]=y=>_.isDialogVisible=y),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(v,{onClick:c[0]||(c[0]=y=>p())}),e(Q,{title:"Confirmation"},{default:l(()=>[e(U,null,{default:l(()=>[h(" Are you sure you want to delete this record ? ")]),_:1}),e(U,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(b,{color:"secondary",variant:"tonal",onClick:c[1]||(c[1]=y=>D("update:isDialogVisible",!1))},{default:l(()=>[h(" Disagree ")]),_:1}),e(b,{onClick:d},{default:l(()=>[h(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const we={class:"d-flex align-center",style:{width:"135px"}},Oe=a("span",{class:"text-no-wrap me-3"},"Show:",-1),Re={class:"d-flex align-center",style:{width:"30%"}},Te={class:"d-flex align-center flex-wrap gap-4"},ke={class:"invoice-list-filter"},Ee={class:"invoice-list-filter"},Ue={class:"invoice-list-filter"},Ne={class:"me-3"},Ae={class:"text-uppercase"},$e=a("th",{scope:"col"}," #ID ",-1),ze={scope:"col",class:"text-center"},Le=a("th",{scope:"col"}," CLIENT ",-1),Be=a("th",{scope:"col",class:"text-center"}," TOTAL ",-1),Me=a("th",{scope:"col"}," Issued Date ",-1),Je=a("th",{scope:"col"}," ACTIONS ",-1),je={class:"text-center"},qe={class:"mb-0"},Fe={key:0,class:"mb-0"},He={key:1,class:"mb-0"},Ze={class:"d-flex align-center"},Qe={key:1},Ge={class:"d-flex flex-column"},Ke={class:"text-base font-weight-medium mb-0"},We={class:"text-disabled text-sm"},Xe={class:"text-center"},Ye={style:{width:"8rem"}},et=a("tr",null,[a("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),tt=[et],at={class:"text-sm text-disabled"},lt={__name:"index",setup($){const D=ce(),_=n(""),x=n(),p=n(10),d=n(1),f=n(1),c=n(0),v=n([]),y=n([]),O=n(!1),z=n([]),R=n(""),T=n(""),I=n(!1);let C=n();const k=n(""),G=n([{id:1,name:"PAID"},{id:0,name:"ON HOLD"}]),N=()=>{D.fetchReturns({searchValue:_.value,status:x.value,perPage:p.value,currentPage:d.value,client_id:k.value,from:R.value,to:T.value}).then(o=>{P.value.isActive=!1,v.value=o.data.returns,z.value=o.data.clients,f.value=o.data.totalPage,c.value=o.data.totalReturns}).catch(o=>{P.value.isActive=!1,console.log(o)})};M(()=>{N()}),M(()=>{d.value>f.value&&(d.value=f.value)});const K=ae(()=>{const o=v.value.length?(d.value-1)*p.value+1:0,s=v.value.length+(d.value-1)*p.value;return`Showing ${o} to ${s} of ${c.value} entries`}),A=o=>o!==void 0&&o.paid?{variant:"success",icon:"tabler-circle-check"}:{variant:"error",icon:"tabler-x"},W=n(),P=n({isActive:!0}),X=o=>{I.value=!0,C=o,console.log(C)},Y=o=>{D.deleteReturn(o).then(s=>{N()}).catch(s=>{console.log(s)})},E=()=>{P.value.isActive=!0,N()};return(o,s)=>{const L=de,ee=le("RouterLink");return r(),u(Ie,null,{default:l(()=>[e(Ve,{"model-value":i(P).isActive,class:"align-center justify-center"},{default:l(()=>[e(fe,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(Ce,null,{default:l(()=>[i(v)?(r(),u(Q,{key:0,id:"invoice-list"},{default:l(()=>[e(U,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[a("div",we,[Oe,e(j,{modelValue:i(p),"onUpdate:modelValue":s[0]||(s[0]=t=>m(p)?p.value=t:null),density:"compact",items:[10,20,30,50,100,500,1e3,5e3]},null,8,["modelValue"])]),a("div",Re,[e(ge,{clearable:"",modelValue:i(k),"onUpdate:modelValue":[s[1]||(s[1]=t=>m(k)?k.value=t:null),E],items:i(z),"item-value":"id","item-title":"name",label:"Client",placeholder:"Client"},null,8,["modelValue","items"])]),a("div",Te,[a("div",ke,[e(L,{modelValue:i(R),"onUpdate:modelValue":[s[2]||(s[2]=t=>m(R)?R.value=t:null),E],label:"From Date"},null,8,["modelValue"])]),a("div",Ee,[e(L,{modelValue:i(T),"onUpdate:modelValue":[s[3]||(s[3]=t=>m(T)?T.value=t:null),E],label:"To Date"},null,8,["modelValue"])]),a("div",Ue,[e(j,{modelValue:i(x),"onUpdate:modelValue":[s[4]||(s[4]=t=>m(x)?x.value=t:null),E],label:"Select Status",clearable:"","item-value":"id","item-title":"name","clear-icon":"tabler-x","single-line":"",items:i(G)},null,8,["modelValue","items"])]),a("div",Ne,[o.$can(o.PERMISSIONS.RETURN.ADD,o.PERMISSIONS.RETURN.SUBJECT)?(r(),u(b,{key:0,"prepend-icon":"tabler-plus",to:{name:"apps-POS-return-add"}},{default:l(()=>[h(" Create ")]),_:1})):S("",!0)])])]),_:1}),e(q),e(De,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[a("thead",Ae,[a("tr",null,[$e,a("th",ze,[e(V,{icon:"tabler-trending-up"})]),Le,Be,Me,Je])]),a("tbody",null,[(r(!0),w(ie,null,oe(i(v),t=>(r(),w("tr",{key:t.id,style:{height:"3.75rem"}},[a("td",null,[e(ee,{to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:l(()=>[h(" #"+g(t.id),1)]),_:2},1032,["to"])]),a("td",je,[e(_e,null,{activator:l(({props:B})=>[e(F,se({size:30},B,{color:A(t).variant,variant:"tonal"}),{default:l(()=>[e(V,{size:20,icon:A(t).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[a("p",qe,g(t.invoiceStatus),1),t.paid?(r(),w("p",Fe," Delivered ")):(r(),w("p",He," ON HOLD "))]),_:2},1024)]),a("td",null,[a("div",Ze,[e(F,{size:"34",color:A(t).variant,variant:"tonal",class:"me-3"},{default:l(()=>[t.avatar?(r(),u(Se,{key:0,src:t.avatar},null,8,["src"])):(r(),w("span",Qe,g(i(ue)(t.client.name)),1))]),_:2},1032,["color"]),a("div",Ge,[a("h6",Ke,g(t.client.name),1),a("span",We,g(t.client.email),1)])])]),a("td",Xe,g(t.total_amount)+" DZD ",1),a("td",null,g(t.date),1),a("td",Ye,[e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(V,{icon:"tabler-mail",size:22})]),_:1}),o.$can(o.PERMISSIONS.PRODUCT.DELETE,o.PERMISSIONS.PRODUCT.SUBJECT)?(r(),u(b,{key:0,icon:"",variant:"text",color:"default",size:"x-small",onClick:B=>X(t)},{default:l(()=>[e(V,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])):S("",!0),o.$can(o.PERMISSIONS.PRODUCT.LIST,o.PERMISSIONS.PRODUCT.SUBJECT)?(r(),u(b,{key:1,icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-POS-return-preview-id",params:{id:t.id}}},{default:l(()=>[e(V,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"])):S("",!0),e(b,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(V,{size:22,icon:"tabler-dots-vertical"}),e(be,{activator:"parent"},{default:l(()=>[e(he,null,{default:l(()=>[e(H,{value:"download"},{prepend:l(()=>[e(V,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[e(Z,null,{default:l(()=>[h("Download")]),_:1})]),_:1}),o.$can(o.PERMISSIONS.PRODUCT.EDIT,o.PERMISSIONS.PRODUCT.SUBJECT)?(r(),u(H,{key:0,to:{name:"apps-POS-return-edit-id",params:{id:t.id}}},{prepend:l(()=>[e(V,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[e(Z,null,{default:l(()=>[h("Edit")]),_:1})]),_:2},1032,["to"])):S("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),ne(a("tfoot",null,tt,512),[[re,!i(v).length]])]),_:1}),e(q),e(U,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[a("span",at,g(i(K)),1),e(xe),e(ye,{modelValue:i(d),"onUpdate:modelValue":s[5]||(s[5]=t=>m(d)?d.value=t:null),size:"small","total-visible":5,length:i(f),onNext:s[6]||(s[6]=t=>y.value=[]),onPrev:s[7]||(s[7]=t=>y.value=[])},null,8,["modelValue","length"])]),_:1}),i(I)?(r(),u(Pe,{key:0,isDialogVisible:i(I),"onUpdate:isDialogVisible":s[8]||(s[8]=t=>m(I)?I.value=t:null),product:i(C),"onUpdate:product":s[9]||(s[9]=t=>m(C)?C.value=t:C=t),onPreturnData:Y},null,8,["isDialogVisible","product"])):S("",!0)]),_:1})):S("",!0)]),_:1}),i(O)?(r(),u(me,{key:0,loading:i(P),data:i(W),isDrawerOpen:i(O),"onUpdate:isDrawerOpen":s[10]||(s[10]=t=>m(O)?O.value=t:null)},null,8,["loading","data","isDrawerOpen"])):S("",!0)]),_:1})}}};typeof J=="function"&&J(lt);export{lt as default};
