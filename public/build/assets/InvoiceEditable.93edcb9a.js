import{_ as $}from"./AppDateTimePicker.7a3a8451.js";/* empty css                        */import{a as u,V as w}from"./VRow.54306fd6.js";import{V as b}from"./VTextField.cfceb116.js";import{V as F}from"./VBtn.f2bdc60e.js";import{A as L,Z as T,o as g,c as S,m as t,p as s,w as o,x as d,q as i,C as j,F as E,k as x,b as B,V as K,v as Z,D as M,a as O}from"./main.bc5a6167.js";import{V as P,c as v}from"./VCard.7d98e4d8.js";import{u as Y}from"./useCertifyInvoiceListStore.98dfa0b8.js";import{q as A}from"./VueSearchSelect.cffa6350.js";import{V}from"./VDivider.4d5529ad.js";import{V as G}from"./VTextarea.c207fe45.js";const z={class:"add-products-header mb-2 d-none d-md-flex"},Q=t("span",{class:"text-sm"}," Item ",-1),H=t("span",{class:"text-sm"}," Price ",-1),J=t("span",{class:"text-sm"}," Quantity ",-1),W=t("span",{class:"text-sm"}," Total ",-1),X={class:"pa-5 flex-grow-1"},tt={class:"text-sm-center my-2"},et=t("span",{class:"d-inline d-md-none"},"Price: ",-1),st={class:"text-body-1"},at={class:"d-flex flex-column justify-space-between border-s pa-1"},ot={__name:"InvoiceProductEdit",props:{id:{type:Number,required:!0},data:{type:Object,required:!0,default:()=>({id:"",name:"",brand:"",description:"",product_code:"",SKU:"",price:15,stockable:!1,tax_rate:.5,product_stock:{quantity:0}})}},emits:["removeProduct","totalAmount"],setup(I,{emit:e}){const c=I,_=L(()=>Number(c.data.price)*Number(c.data.quantity)),y=()=>{e("removeProduct",c.data)},f=()=>{e("totalAmount",c.data)};return T(_,()=>{console.log("watch price"),f()},{immediate:!0}),(r,p)=>(g(),S(E,null,[t("div",z,[s(w,{class:"font-weight-medium px-4"},{default:o(()=>[s(u,{cols:"12",md:"6"},{default:o(()=>[Q]),_:1}),s(u,{cols:"12",md:"2"},{default:o(()=>[H]),_:1}),s(u,{cols:"12",md:"2"},{default:o(()=>[J]),_:1}),s(u,{cols:"12",md:"2"},{default:o(()=>[W]),_:1})]),_:1})]),s(P,{flat:"",border:"",class:"d-flex flex-row"},{default:o(()=>[t("div",X,[s(w,null,{default:o(()=>[s(u,{cols:"12",md:"6",sm:"4"},{default:o(()=>[s(b,{modelValue:c.data.product.name,"onUpdate:modelValue":p[0]||(p[0]=h=>c.data.product.name=h),type:"string",label:"Product",disabled:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"2",sm:"4"},{default:o(()=>[s(b,{modelValue:c.data.price,"onUpdate:modelValue":p[1]||(p[1]=h=>c.data.price=h),type:"number",label:"Price"},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"2",sm:"4"},{default:o(()=>[s(b,{modelValue:c.data.quantity,"onUpdate:modelValue":p[2]||(p[2]=h=>c.data.quantity=h),type:"number",label:"Quantity"},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"2",sm:"4"},{default:o(()=>[t("p",tt,[et,t("span",st,d(i(_).toFixed(2))+" DZD",1)])]),_:1})]),_:1})]),t("div",at,[s(F,{icon:"",size:"x-small",color:"default",variant:"text",onClick:y},{default:o(()=>[s(j,{size:"20",icon:"tabler-x"})]),_:1})])]),_:1})],64))}};const lt={class:"ma-sm-4"},dt={class:"d-flex align-center mb-6"},nt={class:"font-weight-bold text-xl"},it={class:"mb-0"},ct={class:"mb-0"},ut={class:"mb-0"},rt={class:"mt-4 ma-sm-4"},mt={class:"d-flex align-center font-weight-medium justify-sm-end text-xl mb-3"},pt=t("span",{class:"me-3"},"Invoice",-1),_t={class:"d-flex align-center justify-sm-end mb-3"},ft=t("span",{class:"me-3"},"Date Issued",-1),ht={class:"align-center mb-6"},xt=t("h6",{class:"text-sm font-weight-medium mb-3"}," Invoice To: ",-1),bt=t("div",{class:"align-center mb-6"},[t("h6",{class:"text-sm font-weight-medium mb-3"}," City: ")],-1),vt={class:"mt-4 ma-sm-4"},yt=t("h6",{class:"text-sm font-weight-medium mb-3"}," Bill To: ",-1),Vt=t("td",{class:"pe-6"}," Invoice: ",-1),gt={class:"font-weight-semibold"},wt=t("td",{class:"pe-6"}," Payment Method: ",-1),It={class:"font-weight-semibold"},Nt=t("td",{class:"pe-6"}," Client: ",-1),Tt={class:"font-weight-semibold"},St=t("td",{class:"pe-6"}," Address: ",-1),At=t("td",{class:"pe-6"}," N\xB0RC: ",-1),Et=t("td",{class:"pe-6"}," N\xB0IF: ",-1),Pt=t("td",{class:"pe-6"}," N\xB0IS: ",-1),kt=t("td",{class:"pe-6"}," N\xB0ART: ",-1),Dt={class:"mt-4 ma-sm-4"},Ut=t("div",{class:"mt-7 ma-sm-7"},null,-1),qt={class:"mx-sm-4 my-2"},Ct={class:"d-flex align-center mb-4"},Rt=t("h6",{class:"text-sm font-weight-semibold me-2"}," Salesperson: ",-1),$t={class:"my-2 mx-sm-4"},Ft=t("td",{class:"text-end"},[t("div",{class:"me-5"},[t("p",{class:"mb-2"}," Montant HT: "),t("p",{class:"mb-2"}," TVA 19%: "),t("p",{class:"mb-2"}," Montant TTC: ")])],-1),Lt={class:"font-weight-semibold"},jt={class:"mb-2"},Bt={class:"mb-2"},Kt={class:"mb-2"},Zt=t("p",{class:"font-weight-semibold mb-2"}," Note: ",-1),ee={__name:"InvoiceEditable",props:{data:{type:null,required:!0},loading:{type:null,required:!0}},setup(I){const e=I,c=Y();let _=x(0),y=x(e.data.date);x({id:-1,name:"",brand:"",description:"",product_code:"",SKU:"",price:0,stockable:!1,tax_rate:0,product_stock:{quantity:0}}),x([]);const f=x({name:"EURL SETIFIS DETERGENTS",address:"LOT N, 6 GROUPE 51, ZONE INDUSTRIELLE, 34 SECTION, Ksar El Abtal 19220",address2:"KASR EL ABTAL 19220, SETIF, ALGERIE",phone1:"+213 0668 15 41 45",phone2:"+213 0668 15 41 45"});let r=x({quantity:0,price:0,total:0,product:{id:-1,name:"Select a product",brand:"",description:"",product_code:"",SKU:"",price:0,stockable:!1,tax_rate:0,product_stock:{quantity:0}}}),p=x({quantity:0,price:0,total:0,product:{id:-1,name:"Select a product",brand:"",description:"",product_code:"",SKU:"",price:0,stockable:!1,tax_rate:0,product_stock:{quantity:0}}});T(e.data,()=>{console.log(e.data),y.value!==e.data.date&&(y.value=e.data.date,e.loading.isActive=!0,console.log(e.data),c.getLastID({date:e.data.date}).then(l=>{e.data.id=l.data.id,e.loading.isActive=!1}).catch(l=>{e.loading.isActive=!1,console.log(l)}))}),T(r,()=>{D()});const h=l=>`${l.name}  ${l.surname}`,k=l=>`${l.product.name}`,D=l=>{U(),r.value={...p.value}},U=()=>{r.value!==void 0&&(e.data.certify_invoice_products.findIndex(a=>a.product.id===r.value.product.id)===-1&&r.value.product.id!==-1&&e.data.certify_invoice_products.push({...r.value}),N())},q=l=>{const a=e.data.certify_invoice_products.findIndex(m=>m.product.id===l.product.id);e.data.certify_invoice_products.splice(a,1),N()};function N(){let l=e.data.certify_invoice_products.map(a=>a.price*a.quantity);_.value=l.reduce((a,m)=>a+m,0),e.data.total=l.reduce((a,m)=>a+m,0),e.data.amount=l.reduce((a,m)=>a+m,0)}const C=l=>{N()};return(l,a)=>{const m=$;return g(),B(P,null,{default:o(()=>[s(v,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},{default:o(()=>[t("div",lt,[t("div",dt,[s(i(K),{nodes:i(Z).app.logo,class:"me-3"},null,8,["nodes"]),t("h6",nt,d(i(f).name),1)]),t("p",it,d(i(f).address),1),t("p",ct,d(i(f).address2),1),t("p",ut,d(i(f).phone1)+" , "+d(i(f).phone2),1)]),t("div",rt,[t("h6",mt,[pt,t("span",null,[s(b,{modelValue:e.data.id,"onUpdate:modelValue":a[0]||(a[0]=n=>e.data.id=n),disabled:"",prefix:"#",density:"compact",style:{width:"8.9rem"}},null,8,["modelValue"])])]),t("p",_t,[ft,t("span",null,[s(m,{modelValue:e.data.date,"onUpdate:modelValue":a[1]||(a[1]=n=>e.data.date=n),density:"compact",placeholder:"YYYY-MM-DD",style:{width:"8.9rem"},config:{position:"auto right"}},null,8,["modelValue"])])])])]),_:1}),s(V),s(v,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},{default:o(()=>[s(w,null,{default:o(()=>[s(u,{cols:"12",md:"7"},{default:o(()=>[t("div",ht,[xt,s(i(A),{list:e.data.clients,modelValue:e.data.client,"onUpdate:modelValue":a[2]||(a[2]=n=>e.data.client=n),"option-value":"id","custom-text":h,placeholder:"Select Client"},null,8,["list","modelValue"])]),bt]),_:1}),s(u,{cols:"12",md:"5"},{default:o(()=>[t("div",vt,[yt,t("table",null,[t("tbody",null,[t("tr",null,[Vt,t("td",gt," FAJ/2023/"+d(e.data.id),1)]),t("tr",null,[wt,t("td",It,d(e.data.payment_type),1)]),t("tr",null,[Nt,t("td",Tt,d(e.data.client.name)+" "+d(e.data.client.surname),1)]),t("tr",null,[St,t("td",null,d(e.data.client.address),1)]),t("tr",null,[At,t("td",null,d(e.data.client.NRC),1)]),t("tr",null,[Et,t("td",null,d(e.data.client.NIF),1)]),t("tr",null,[Pt,t("td",null,d(e.data.client.NIS),1)]),t("tr",null,[kt,t("td",null,d(e.data.client.NART),1)])])])])]),_:1})]),_:1})]),_:1}),s(V),s(v,{class:"add-products-form"},{default:o(()=>[t("div",Dt,[s(w,null,{default:o(()=>[s(u,{cols:"12",md:"12"},{default:o(()=>[s(i(A),{list:e.data.products,modelValue:i(r),"onUpdate:modelValue":a[3]||(a[3]=n=>M(r)?r.value=n:r=n),"option-value":"id","custom-text":k,placeholder:"Select Product"},null,8,["list","modelValue"])]),_:1}),s(u,{cols:"12",md:"2"})]),_:1})]),Ut,(g(!0),S(E,null,O(e.data.certify_invoice_products,(n,R)=>(g(),S("div",{key:R,class:"ma-sm-4"},[s(ot,{id:n.id,data:n,onRemoveProduct:q,onTotalAmount:C},null,8,["id","data"])]))),128))]),_:1}),s(V),s(v,{class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row"},{default:o(()=>[t("div",qt,[t("div",Ct,[Rt,s(b,{modelValue:e.data.salesperson,"onUpdate:modelValue":a[4]||(a[4]=n=>e.data.salesperson=n),style:{width:"10rem"}},null,8,["modelValue"])]),s(b,{modelValue:e.data.thanksNote,"onUpdate:modelValue":a[5]||(a[5]=n=>e.data.thanksNote=n),placeholder:"Thanks for your business"},null,8,["modelValue"])]),t("div",$t,[t("table",null,[t("tr",null,[Ft,t("td",Lt,[t("p",jt,d(i(_).toFixed(2))+" DZD ",1),t("p",Bt,d((i(_)*.19).toFixed(2))+" DZD ",1),t("p",Kt,d((i(_)*1.19).toFixed(2))+" DZD ",1)])])])])]),_:1}),s(V),s(v,{class:"mx-sm-4"},{default:o(()=>[Zt,s(G,{modelValue:e.data.note,"onUpdate:modelValue":a[6]||(a[6]=n=>e.data.note=n),rows:2},null,8,["modelValue"])]),_:1})]),_:1})}}};export{ee as _};
