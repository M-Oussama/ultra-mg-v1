import{k as r,$ as P,A as E,r as O,q as n,o as p,b as z,w as l,p as e,m as t,D as V,E as f,C as d,c as y,a as R,x as i,O as U,F as j,H as q,I as H,y as J}from"./main.6ddfa6b7.js";import{a as M}from"./formatters.4acf44a4.js";import{u as Q}from"./useCertifyInvoiceListStore.23b34baf.js";import{a as Y,V as x}from"./VBtn.376421a6.js";import{a as Z}from"./VOverlay.2d6bdfb2.js";import{V as C}from"./VSelect.ce0e37ca.js";import{V as k}from"./VSpacer.892b8e7d.js";import{V as G}from"./VTextField.84b2ab9a.js";import{c as A,V as K}from"./VCard.0bfd53b9.js";import{V as T}from"./VDivider.8642c1cc.js";import{V as W}from"./VTooltip.7a8e9a48.js";import{V as L}from"./VAvatar.de0a6008.js";import{V as X}from"./VImg.000ebbd2.js";import{V as ee}from"./VMenu.f5c9e339.js";import{V as te,a as w,b as I}from"./VList.9a90da75.js";import{V as ae}from"./VTable.5aa25187.js";import{V as le}from"./VPagination.71eff5f3.js";import"./index.b522f886.js";import"./router.6776eb4e.js";import"./position.e19bf76f.js";import"./lazy.f12e00d0.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./dialog-transition.0e92eaa3.js";import"./VCheckboxBtn.6755e995.js";import"./VSelectionControl.3c10b28a.js";import"./VInput.5e24232f.js";import"./index.312d6846.js";import"./VChip.4b7cce73.js";/* empty css                   */import"./VField.b42ed233.js";import"./VCounter.7ab3dccf.js";import"./scopeId.8423e22b.js";const oe={class:"d-flex align-center",style:{width:"135px"}},se=t("span",{class:"text-no-wrap me-3"},"Show:",-1),ie={class:"me-3"},ne={class:"d-flex align-center flex-wrap gap-4"},re={class:"invoice-list-filter"},ce={class:"invoice-list-filter"},de={class:"text-uppercase"},ue=t("th",{scope:"col"}," #ID ",-1),me=t("th",{scope:"col"}," #FAC ",-1),pe={scope:"col",class:"text-center"},fe=t("th",{scope:"col"}," CLIENT ",-1),_e=t("th",{scope:"col",class:"text-center"}," TOTAL ",-1),ve=t("th",{scope:"col"}," Issued Date ",-1),he=t("th",{scope:"col"}," ACTIONS ",-1),Ve={class:"text-center"},xe={class:"mb-0"},ge={class:"mb-0"},be={class:"mb-0"},ye={class:"d-flex align-center"},we={key:1},Ie={class:"d-flex flex-column"},De={class:"text-base font-weight-medium mb-0"},Se={class:"text-disabled text-sm"},Pe={class:"text-center"},ze={style:{width:"8rem"}},Ce=t("tr",null,[t("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),ke=[Ce],Ae={class:"text-sm text-disabled"},mt={__name:"index",setup(Te){const N=Q(),_=r(""),v=r(),u=r(10),c=r(1),h=r(1),D=r(0),m=r([]),S=r([]);P(()=>{N.fetchCertifyInvoices({searchValue:_.value,status:v.value,perPage:u.value,currentPage:c.value}).then(o=>{b.value.isActive=!1,m.value=o.data.invoices.data,h.value=o.data.totalPage,D.value=o.data.totalInvoices}).catch(o=>{b.value.isActive=!1,console.log(o)})}),P(()=>{c.value>h.value&&(c.value=h.value)});const F=E(()=>{const o=m.value.length?(c.value-1)*u.value+1:0,s=m.value.length+(c.value-1)*u.value;return`Showing ${o} to ${s} of ${D.value} entries`}),g=o=>o==="Partial Payment"?{variant:"success",icon:"tabler-circle-half-2"}:o==="Paid"?{variant:"warning",icon:"tabler-chart-pie"}:o==="Downloaded"?{variant:"info",icon:"tabler-arrow-down-circle"}:o==="Draft"?{variant:"primary",icon:"tabler-device-floppy"}:o==="Sent"?{variant:"secondary",icon:"tabler-circle-check"}:o==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},b=r({isActive:!0});return(o,s)=>{const B=O("RouterLink");return n(m)?(p(),z(K,{key:0,id:"invoice-list"},{default:l(()=>[e(Z,{"model-value":n(b).isActive,class:"align-center justify-center"},{default:l(()=>[e(Y,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(A,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[t("div",oe,[se,e(C,{modelValue:n(u),"onUpdate:modelValue":s[0]||(s[0]=a=>V(u)?u.value=a:null),density:"compact",items:[10,20,30,50,100]},null,8,["modelValue"])]),t("div",ie,[e(x,{"prepend-icon":"tabler-plus",to:{name:"apps-certifyInvoice-add"}},{default:l(()=>[f(" Create invoice ")]),_:1})]),e(k),t("div",ne,[t("div",re,[e(G,{modelValue:n(_),"onUpdate:modelValue":s[1]||(s[1]=a=>V(_)?_.value=a:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),t("div",ce,[e(C,{modelValue:n(v),"onUpdate:modelValue":s[2]||(s[2]=a=>V(v)?v.value=a:null),label:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),e(T),e(ae,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[t("thead",de,[t("tr",null,[ue,me,t("th",pe,[e(d,{icon:"tabler-trending-up"})]),fe,_e,ve,he])]),t("tbody",null,[(p(!0),y(j,null,R(n(m),a=>(p(),y("tr",{key:a.id,style:{height:"3.75rem"}},[t("td",null,[e(B,{to:{name:"apps-certifyInvoice-preview-id",params:{id:a.id}}},{default:l(()=>[f(" #"+i(a.id),1)]),_:2},1032,["to"])]),t("td",null," FAJ/"+i(new Date(a.date).getFullYear())+"/"+i(a.id),1),t("td",Ve,[e(W,null,{activator:l(({props:$})=>[e(L,U({size:30},$,{color:g(a.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[e(d,{size:20,icon:g(a.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[t("p",xe,i(a.invoiceStatus),1),t("p",ge," Balance: "+i(a.balance),1),t("p",be," Due date: "+i(a.dueDate),1)]),_:2},1024)]),t("td",null,[t("div",ye,[e(L,{size:"34",color:g(a.invoiceStatus).variant,variant:"tonal",class:"me-3"},{default:l(()=>[a.avatar?(p(),z(X,{key:0,src:a.avatar},null,8,["src"])):(p(),y("span",we,i(n(M)(a.client.name)),1))]),_:2},1032,["color"]),t("div",Ie,[t("h6",De,i(a.client.name),1),t("span",Se,i(a.client.email),1)])])]),t("td",Pe,i(a.amount.toFixed(2))+" DZD ",1),t("td",null,i(a.date),1),t("td",ze,[e(x,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(d,{icon:"tabler-mail",size:22})]),_:1}),e(x,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-certifyInvoice-preview-id",params:{id:a.id}}},{default:l(()=>[e(d,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(x,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(d,{size:22,icon:"tabler-dots-vertical"}),e(ee,{activator:"parent"},{default:l(()=>[e(te,null,{default:l(()=>[e(w,{value:"download"},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[e(I,null,{default:l(()=>[f("Download")]),_:1})]),_:1}),e(w,{to:{name:"apps-certifyInvoice-edit-id",params:{id:a.id}}},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[e(I,null,{default:l(()=>[f("Edit")]),_:1})]),_:2},1032,["to"]),e(w,{value:"duplicate"},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-stack"})]),default:l(()=>[e(I,null,{default:l(()=>[f("Duplicate")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),q(t("tfoot",null,ke,512),[[H,!n(m).length]])]),_:1}),e(T),e(A,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[t("span",Ae,i(n(F)),1),e(k),e(le,{modelValue:n(c),"onUpdate:modelValue":s[3]||(s[3]=a=>V(c)?c.value=a:null),size:"small","total-visible":5,length:n(h),onNext:s[4]||(s[4]=a=>S.value=[]),onPrev:s[5]||(s[5]=a=>S.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1})):J("",!0)}}};export{mt as default};
