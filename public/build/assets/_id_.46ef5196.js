import{k as s,bd as M,$ as A,Z as q,A as H,r as Q,o as u,c as h,p as a,w as n,q as o,m as l,D as p,b as w,E as D,F as Z,a as G,x as v,C as O,H as J,I as K,y as W}from"./main.c3533bd0.js";import{_ as X,a as Y}from"./EditEmployeeDrawer.afd66310.js";import{_ as ee}from"./ConfirmationDialog.77a1e0bf.js";import{s as k,e as S}from"./errorsMiddleware.86b9fa82.js";import{u as te}from"./useAttendanceStore.0ef3bbf0.js";import{a as ae}from"./VOverlay.851a1061.js";import{a as z,V as E}from"./VBtn.767ed1b7.js";import{a as le,V as se}from"./VRow.f890f0c0.js";import{V as oe,c as P}from"./VCard.bf35c916.js";import{V as C}from"./VDivider.28755b18.js";import{V as ie}from"./VSelect.f9bb5d50.js";import{V as re}from"./VSpacer.d2f15bbd.js";import{V as ne}from"./VTextField.bdd7c815.js";import{V as de}from"./VTable.659abf6e.js";import{V as me}from"./VAvatar.14ab3838.js";import{V as ue}from"./VImg.e1d6d13a.js";import{V as pe}from"./VPagination.55cfa99a.js";import"./AppDateTimePicker.1c1984b4.js";import"./VField.ecc7b478.js";import"./index.866805b8.js";import"./VInput.f1d0603b.js";import"./router.833d6863.js";import"./position.d9639743.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VForm.bdfa9659.js";import"./forwardRefs.c003b6b8.js";import"./VNavigationDrawer.e11e4389.js";import"./ssrBoot.1044c117.js";import"./DialogCloseBtn.714a955d.js";import"./VDialog.5082ee87.js";import"./scopeId.5eb40561.js";import"./dialog-transition.846b6af6.js";import"./lazy.5ed267c5.js";import"./VList.8c4d2492.js";import"./VMenu.19d01492.js";import"./VCheckboxBtn.c907e9f6.js";import"./VSelectionControl.3364d55e.js";import"./VChip.dd846cb6.js";/* empty css                   */import"./VCounter.97b6be8b.js";const ce={class:"me-3",style:{width:"80px"}},ve={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},fe={style:{width:"9rem"}},ye=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," ID "),l("th",{scope:"col"}," Employee "),l("th",{scope:"col"}," ACTIONS ")])],-1),Ve={class:"d-flex align-center"},_e={key:1},ge={class:"d-flex flex-column"},xe={class:"text-base"},he={class:"text-sm text-disabled"},we={class:"text-center",style:{width:"5rem"}},Ee=l("tr",null,[l("td",{colspan:"7",class:"text-center"}," No data available ")],-1),be=[Ee],Ae={class:"text-sm text-disabled"},ft={__name:"[id]",setup(De){const $=te(),_=s(""),N=s(!1),r=s({isActive:!0}),I=M(),B=s(!0);s(),s(),s();const f=s(10),d=s(1),c=s(1),U=s(0);let y=s([]);const V=()=>{r.value.isActive=!0,$.fetchEmployeesByAttendance(Number(I.params.id)).then(i=>{y.value=i.data.employees.data,c.value=i.data.totalPage,U.value=i.data.totalEmployees,N.value=!1,r.value.isActive=!1,console.log(i)}).catch(i=>{console.error(i),r.value.isActive=!1})};A(V),A(()=>{d.value>c.value&&(d.value=c.value)}),q(_,()=>{V()});const g=s(!1),b=s(!1),x=s(!1);let m=s();A(()=>{d.value>c.value&&(d.value=c.value)});const R=H(()=>{const i=y.value.length?(d.value-1)*f.value+1:0,e=y.value.length+(d.value-1)*f.value;return`Showing ${i} to ${e} of ${U.value} entries`}),T=i=>{r.value.isActive=!0,employeeStore.addEmployee(i).then(e=>{k(e.data.message),r.value.isActive=!1,V()}).catch(e=>{S(e.data.message),r.value.isActive=!1})},F=i=>{r.value.isActive=!0,employeeStore.updateEmployee(i).then(e=>{k(e.data.message),r.value.isActive=!1,V()}).catch(e=>{S(e.data.message),r.value.isActive=!1})},L=i=>{r.value.isActive=!0,employeeStore.deleteEmployee(i).then(e=>{r.value.isActive=!1,k(e.data.message)}).catch(e=>{S(e.data.message),r.value.isActive=!1}),V()};return(i,e)=>{const j=Q("RouterLink");return u(),h("section",null,[a(se,null,{default:n(()=>[a(ae,{"model-value":o(r).isActive,class:"align-center justify-center"},{default:n(()=>[a(z,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),a(le,{cols:"12"},{default:n(()=>[a(oe,{title:"Employee Record"},{default:n(()=>[a(C),a(P,{class:"d-flex flex-wrap py-4 gap-4"},{default:n(()=>[l("div",ce,[a(ie,{modelValue:o(f),"onUpdate:modelValue":e[0]||(e[0]=t=>p(f)?f.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),a(re),l("div",ve,[l("div",fe,[o(N)?(u(),w(z,{key:0,indeterminate:"",color:"primary"})):(u(),w(ne,{key:1,onInput:e[1]||(e[1]=t=>B.value=!0),ref:"searchField",modelValue:o(_),"onUpdate:modelValue":e[2]||(e[2]=t=>p(_)?_.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),a(E,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:n(()=>[D(" Export ")]),_:1}),a(E,{"prepend-icon":"tabler-plus",onClick:e[3]||(e[3]=t=>g.value=!0)},{default:n(()=>[D(" New Employee ")]),_:1})])]),_:1}),a(C),a(de,{class:"text-no-wrap"},{default:n(()=>[ye,l("tbody",null,[(u(!0),h(Z,null,G(o(y),t=>(u(),h("tr",{key:t.id,style:{height:"3.75rem"}},[l("td",null,v(t.id),1),l("td",null,[l("div",Ve,[a(me,{variant:"tonal",class:"me-3",size:"38"},{default:n(()=>[t.avatar?(u(),w(ue,{key:0,src:t.avatar},null,8,["src"])):(u(),h("span",_e,v(t.name.toUpperCase().charAt(0)),1))]),_:2},1024),l("div",ge,[l("h6",xe,[a(j,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"font-weight-medium user-list-name"},{default:n(()=>[D(v(t.name)+" "+v(t.surname),1)]),_:2},1032,["to"])]),l("span",he,"@"+v(t.email),1)])])]),l("td",we,[a(E,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-attendance-employees-record-id",params:{id:t.id,attendanceId:Number(o(I).params.id)}}},{default:n(()=>[a(O,{size:"22",icon:"tabler-eye"})]),_:2},1032,["to"]),a(E,{icon:"",size:"x-small",color:"default",variant:"text"},{default:n(()=>[a(O,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),J(l("tfoot",null,be,512),[[K,!o(y).length]])]),_:1}),a(C),a(P,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:n(()=>[l("span",Ae,v(o(R)),1),a(pe,{modelValue:o(d),"onUpdate:modelValue":e[4]||(e[4]=t=>p(d)?d.value=t:null),size:"small","total-visible":5,length:o(c)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),a(X,{isDrawerOpen:o(g),"onUpdate:isDrawerOpen":e[5]||(e[5]=t=>p(g)?g.value=t:null),onEmployeeData:T},null,8,["isDrawerOpen"]),a(Y,{isDrawerOpen:o(b),"onUpdate:isDrawerOpen":e[6]||(e[6]=t=>p(b)?b.value=t:null),employee:o(m),"onUpdate:employee":e[7]||(e[7]=t=>p(m)?m.value=t:m=t),onEmployeeData:F},null,8,["isDrawerOpen","employee"]),o(x)?(u(),w(ee,{key:0,isDialogVisible:o(x),"onUpdate:isDialogVisible":e[8]||(e[8]=t=>p(x)?x.value=t:null),employee:o(m),"onUpdate:employee":e[9]||(e[9]=t=>p(m)?m.value=t:m=t),onEmployeeData:L},null,8,["isDialogVisible","employee"])):W("",!0)])}}};export{ft as default};
