import{k as s,bd as ie,$ as I,Z as ue,A as ne,o as m,c as g,p as l,w as o,q as r,m as i,b as h,y as $,D as d,E as k,F as R,a as L,C as me,x as U,bf as Q}from"./main.8e3d834c.js";import{_ as de}from"./AppDateTimePicker.96354d05.js";import{_ as pe,a as ce}from"./EditEmployeeDrawer.38110e9b.js";import{_ as fe}from"./ConfirmationDialog.5022fad8.js";import{s as W}from"./successMiddleware.60712f12.js";import{e as C}from"./errorsMiddleware.e88e793d.js";import{u as ve}from"./useAttendanceStore.c9fc99d0.js";import{a as Ve}from"./VOverlay.e098729e.js";import{a as Y,V as q}from"./VBtn.d45a6048.js";import{a as v,V as N}from"./VRow.45fdd78b.js";import{V as z,c as T}from"./VCard.23579ef6.js";import{V as Z}from"./VDivider.6d6bcb40.js";import{V as ye}from"./VAutocomplete.bf2fd8ca.js";import{V as _e,a as be}from"./VTabs.521b0d68.js";import{V as Ae,a as ge}from"./VWindowItem.011c0acb.js";import{V as he}from"./VTable.aae49bb7.js";import{V as De}from"./VSwitch.1d7d7135.js";import{V as F}from"./VCheckbox.fd84d358.js";import{V as xe}from"./VPagination.25f4202e.js";import"./VField.b13be34f.js";import"./index.a0fbf071.js";import"./VInput.221caba9.js";import"./router.96bf7663.js";import"./VImg.5f2c6d35.js";import"./position.c80f08b0.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VSpacer.8cabb308.js";import"./VAvatar.a16965d6.js";import"./VForm.b347f109.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.810b1049.js";/* empty css                   */import"./VCounter.1ff827ea.js";import"./VNavigationDrawer.d95beabf.js";import"./ssrBoot.455730b9.js";import"./DialogCloseBtn.6e92c959.js";import"./VDialog.60004fa2.js";import"./scopeId.5ac90517.js";import"./dialog-transition.721de8d1.js";import"./lazy.a8f563f0.js";import"./VSelect.97f52872.js";import"./VList.5eb680d2.js";import"./VMenu.07de16f8.js";import"./VCheckboxBtn.515d277c.js";import"./VSelectionControl.a2ce79b7.js";import"./VChip.d81a1f97.js";import"./filter.524761c6.js";import"./VSlideGroup.09119cf8.js";const we={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ee={class:"pa-6"},ke={class:"ma-7"},Ue={class:"pt-5"},Ce=i("th",{class:"text-left"}," Quit Employee ",-1),Ne={class:"text-left"},Te=i("th",{class:"text-left"}," Remove Employee ",-1),Pe={class:"text-left"},Se=i("tr",null,[i("th",{class:"text-left"}," date "),i("th",{class:"text-left"}," Presence ")],-1),Oe=i("th",{class:"text-left"}," ALL DAYS ",-1),Be={class:"text-left"},Ie={class:"text-left"},$e={class:"text-left"},Re={class:"text-sm text-disabled"},Le={__name:"[id]",setup(qe){const _=ve(),G=s(""),D=ie(),H=s(!1),u=s({isActive:!0}),V=s(0);s([]),s(!1),s(),s(),s();const j=s(10),p=s(1),b=s(1),J=s(0);s({employees:[],dates:[]});let c=s({}),M=s({}),x=s([]),A=s({}),w=s({});const y=()=>{u.value.isActive=!0,_.getAttendanceByID(Number(D.params.id)).then(e=>{c.value=e.data.employeeAttendance,x.value=e.data.employees,console.log("employeeAttendance"),console.log(c),u.value.isActive=!1}).catch(e=>{console.error(e),u.value.isActive=!1})};I(y),I(()=>{p.value>b.value&&(p.value=b.value)}),ue(G,()=>{y()});const P=s(!1),S=s(!1),E=s(!1);let f=s();I(()=>{p.value>b.value&&(p.value=b.value)});const K=ne(()=>{const e=M.value.length?(p.value-1)*j.value+1:0,t=M.value.length+(p.value-1)*j.value;return`Showing ${e} to ${t} of ${J.value} entries`}),X=()=>{u.value.isActive=!0,_.updateAttendance(c,Number(D.params.id)).then(e=>{W(e.data.message),u.value.isActive=!1,y()}).catch(e=>{C(e.data.message),u.value.isActive=!1})},ee=e=>{u.value.isActive=!0,_.deleteAttendance(e).then(t=>{u.value.isActive=!1,W(t.data.message)}).catch(t=>{C(t.data.message),u.value.isActive=!1}),y()},O=s(!0),B=e=>(e.toString(),""),le=e=>e.name===void 0?"Select An Employee":e.name+" "+e.surname,te=()=>{u.value.isActive=!0,_.AddEmployeeToAttendance(A.value,Number(D.params.id)).then(e=>{u.value.isActive=!1,x.value=e.data.employees,c[e.data.key]=e.data.newAttendance,console.log(c),y()}).catch(e=>{C(e.data.message),u.value.isActive=!1})},ae=e=>{e.allDays=!e.allDays;for(let t=0;t<e.result.length;t++)e.result[t].present=e.allDays},oe=e=>{u.value.isActive=!0,console.log(e.result),_.RemoveEmployeeFromAttendance(e.result,Number(D.params.id)).then(t=>{u.value.isActive=!1,x=t.data.employees,c.value.hasOwnProperty(e.id)&&delete c.value[e.id],y()}).catch(t=>{C(t.data.message),u.value.isActive=!1})};return(e,t)=>{const se=de;return m(),g("section",null,[l(N,null,{default:o(()=>[l(Ve,{"model-value":r(u).isActive,class:"align-center justify-center"},{default:o(()=>[l(Y,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l(v,{cols:"9"},{default:o(()=>[l(z,{title:"New Attendance"},{default:o(()=>[l(Z),l(T,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[i("div",we,[i("div",null,[r(H)?(m(),h(Y,{key:0,indeterminate:"",color:"primary"})):$("",!0)])])]),_:1}),i("div",Ee,[l(N,null,{default:o(()=>[l(v,{cols:"8"},{default:o(()=>[l(ye,{modelValue:r(A),"onUpdate:modelValue":t[0]||(t[0]=a=>d(A)?A.value=a:A=a),items:r(x),label:"Employee","item-value":"id","item-title":le},null,8,["modelValue","items"])]),_:1}),l(v,{cols:"3"},{default:o(()=>[l(q,{block:"",color:"default",variant:"tonal",onClick:te},{default:o(()=>[k(" Add ")]),_:1})]),_:1})]),_:1})]),i("div",ke,[l(N,null,{default:o(()=>[l(v,{cols:"5",sm:"4"},{default:o(()=>[l(_e,{modelValue:r(V),"onUpdate:modelValue":t[1]||(t[1]=a=>d(V)?V.value=a:null),direction:"vertical",class:"v-tabs-pill"},{default:o(()=>[(m(!0),g(R,null,L(r(c),a=>(m(),h(be,null,{default:o(()=>[l(me,{start:"",icon:"tabler-user"}),k(" "+U(a.result[0].employee.name)+" "+U(a.result[0].employee.surname),1)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1}),l(v,{cols:"7",sm:"8"},{default:o(()=>[l(z,null,{default:o(()=>[l(T,null,{default:o(()=>[l(Ae,{modelValue:r(V),"onUpdate:modelValue":t[3]||(t[3]=a=>d(V)?V.value=a:null)},{default:o(()=>[(m(!0),g(R,null,L(r(c),a=>(m(),h(ge,null,{default:o(()=>[l(he,null,{default:o(()=>[i("thead",null,[i("tr",Ue,[Ce,i("th",Ne,[l(N,null,{default:o(()=>[l(v,{cols:"4"},{default:o(()=>[l(De,{modelValue:a.result[0].employee.active,"onUpdate:modelValue":n=>a.result[0].employee.active=n,inset:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a.result[0].employee.active?(m(),h(v,{key:0,cols:"8"},{default:o(()=>[l(se,{modelValue:a.result[0].employee.quitDate,"onUpdate:modelValue":n=>a.result[0].employee.quitDate=n,label:"End Date"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):$("",!0)]),_:2},1024)])]),i("tr",null,[Te,i("th",Pe,[l(F,{modelValue:r(w),"onUpdate:modelValue":t[2]||(t[2]=n=>d(w)?w.value=n:w=n),label:B(r(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error",onClick:n=>oe(a)},null,8,["modelValue","label","onClick"])])]),Se]),i("tbody",null,[i("tr",null,[Oe,i("th",Be,[l(F,{modelValue:a.allDays,"onUpdate:modelValue":n=>a.allDays=n,label:B(r(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error",onClick:n=>ae(a)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])])]),(m(!0),g(R,null,L(a.result,n=>(m(),g("tr",null,[i("th",Ie,U(n.date),1),i("th",$e,[l(F,{modelValue:n.present,"onUpdate:modelValue":re=>n.present=re,label:B(r(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error"},null,8,["modelValue","onUpdate:modelValue","label"])])]))),256))])]),_:2},1024)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(Z),l(T,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[i("span",Re,U(r(K)),1),l(xe,{modelValue:r(p),"onUpdate:modelValue":t[4]||(t[4]=a=>d(p)?p.value=a:null),size:"small","total-visible":5,length:r(b)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),l(v,{cols:"12",md:"3"},{default:o(()=>[l(z,{class:"mb-8"},{default:o(()=>[l(T,null,{default:o(()=>[l(q,{block:"","prepend-icon":"tabler-send",class:"mb-2"},{default:o(()=>[k(" Send Invoice ")]),_:1}),l(q,{block:"",color:"default",variant:"tonal",onClick:X},{default:o(()=>[k(" Update ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(pe,{isDrawerOpen:r(P),"onUpdate:isDrawerOpen":t[5]||(t[5]=a=>d(P)?P.value=a:null),onEmployeeData:e.addNewEmployee},null,8,["isDrawerOpen","onEmployeeData"]),l(ce,{isDrawerOpen:r(S),"onUpdate:isDrawerOpen":t[6]||(t[6]=a=>d(S)?S.value=a:null),employee:r(f),"onUpdate:employee":t[7]||(t[7]=a=>d(f)?f.value=a:f=a),onEmployeeData:e.updateEmployee},null,8,["isDrawerOpen","employee","onEmployeeData"]),r(E)?(m(),h(fe,{key:0,isDialogVisible:r(E),"onUpdate:isDialogVisible":t[8]||(t[8]=a=>d(E)?E.value=a:null),employee:r(f),"onUpdate:employee":t[9]||(t[9]=a=>d(f)?f.value=a:f=a),onEmployeeData:ee},null,8,["isDialogVisible","employee"])):$("",!0)])}}};typeof Q=="function"&&Q(Le);export{Le as default};
