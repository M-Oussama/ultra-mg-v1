import{k as s,o as D,b as h,w as t,m as u,p as e,C as N,q as o,P as K,D as b,be as W,E as x,ay as z,Z as J,bc as ce,a1 as T,$ as L,A as pe,r as me,c as I,y as j,F as fe,a as ve,x as k,H as Ve,I as _e,bf as Z}from"./main.ccc6aae0.js";import{r as B}from"./validators.330a354f.js";import{V as H}from"./VSpacer.fc3a499d.js";import{V as y,a as G}from"./VBtn.7efa8e0f.js";import{V as F,c as E}from"./VCard.36c7adfd.js";import{V as Y}from"./VForm.8ba2a0de.js";import{V as Q,a as A}from"./VRow.a17ab33e.js";import{V as X}from"./VTextField.8db2e7e8.js";import{V as ee}from"./VAutocomplete.5bdf49b5.js";import{V as te}from"./VNavigationDrawer.df836fef.js";import{_ as be}from"./DialogCloseBtn.eb9ea561.js";import{V as ge}from"./VDialog.11663ea2.js";import{P as S}from"./permissions.bafe5f34.js";import{s as R}from"./successMiddleware.53303d8d.js";import{e as q}from"./errorsMiddleware.ca8f0215.js";import{a as De}from"./VOverlay.0ad0cca7.js";import{V as M}from"./VDivider.09896c6c.js";import{V as ye}from"./VSelect.b041d3dc.js";import{V as we}from"./VTable.484ee967.js";import{V as Ce}from"./VAvatar.cb7dc9a5.js";import{V as he}from"./VImg.e193e870.js";import{V as xe}from"./VPagination.ced5ec2a.js";import"./index.b522f886.js";import"./router.25b57325.js";import"./position.ea536dab.js";import"./VInput.1586f7cc.js";import"./index.720d3b34.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.8b77e1e2.js";import"./easing.36b781ab.js";import"./VCounter.d2fed1b1.js";import"./filter.7282d4f9.js";import"./VList.54d6dfac.js";import"./VMenu.01138ff3.js";import"./scopeId.1409e92e.js";import"./dialog-transition.e2b69798.js";import"./VCheckboxBtn.cfb39e43.js";import"./VSelectionControl.e824dbee.js";import"./VChip.768b9a43.js";import"./ssrBoot.81f110ad.js";import"./lazy.ab6dcefa.js";const Oe={class:"d-flex align-center pa-6 pb-1"},ke=u("h6",{class:"text-h6"}," Add Component ",-1),Ae={__name:"AddNewDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},assets:{type:Array,required:!0}},emits:["update:isDrawerOpen","userData"],setup(g,{emit:m}){const f=g,V=s(!1),v=s(),d=s(""),_=s(),n=()=>{m("update:isDrawerOpen",!1),z(()=>{var r,i;(r=v.value)==null||r.reset(),(i=v.value)==null||i.resetValidation()})},w=()=>{var r;(r=v.value)==null||r.validate().then(({valid:i})=>{i&&(m("objectData",{name:d.value,asset_id:_.value}),m("update:isDrawerOpen",!1),z(()=>{var c,C;(c=v.value)==null||c.reset(),(C=v.value)==null||C.resetValidation()}))})},O=r=>{m("update:isDrawerOpen",r)};return(r,i)=>(D(),h(te,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen,"onUpdate:modelValue":O},{default:t(()=>[u("div",Oe,[ke,e(H),e(y,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:n},{default:t(()=>[e(N,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(F,{flat:""},{default:t(()=>[e(E,null,{default:t(()=>[e(Y,{ref_key:"refForm",ref:v,modelValue:o(V),"onUpdate:modelValue":i[2]||(i[2]=c=>b(V)?V.value=c:null),onSubmit:W(w,["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>[e(X,{modelValue:o(d),"onUpdate:modelValue":i[0]||(i[0]=c=>b(d)?d.value=c:null),rules:[o(B)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(ee,{clearable:"",modelValue:o(_),"onUpdate:modelValue":i[1]||(i[1]=c=>b(_)?_.value=c:null),items:f.assets,"item-value":"id","item-title":"name",label:"Asset",placeholder:"Asset",rules:[o(B)]},null,8,["modelValue","items","rules"])]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(y,{type:"submit",class:"me-3"},{default:t(()=>[x(" Submit ")]),_:1}),e(y,{type:"reset",variant:"tonal",color:"secondary",onClick:n},{default:t(()=>[x(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Se={class:"d-flex align-center pa-6 pb-1"},Ee=u("h6",{class:"text-h6"}," Edit Component ",-1),Ue={__name:"EditDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},assets:{type:Array},component:{type:Object}},emits:["update:isDrawerOpen","objectData"],setup(g,{emit:m}){const f=g,V=s();J(()=>f.component,r=>{r&&(_.value=r.id||0,n.value=r.name||"",V.value=r.asset_id||"")});const v=s(!1),d=s(),_=s(),n=s("");s([]),s(),s(),s(!1);const w=()=>{m("update:isDrawerOpen",!1),z(()=>{var r,i;(r=d.value)==null||r.reset(),(i=d.value)==null||i.resetValidation()})},O=()=>{var r;(r=d.value)==null||r.validate().then(({valid:i})=>{i&&(m("objectData",{id:_.value,name:n.value,asset_id:V.value}),m("update:isDrawerOpen",!1),z(()=>{var c,C;(c=d.value)==null||c.reset(),(C=d.value)==null||C.resetValidation()}))})};return(r,i)=>(D(),h(te,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":f.isDrawerOpen},{default:t(()=>[u("div",Se,[Ee,e(H),e(y,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:w},{default:t(()=>[e(N,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(K),{options:{wheelPropagation:!1}},{default:t(()=>[e(F,{flat:""},{default:t(()=>[e(E,null,{default:t(()=>[e(Y,{ref_key:"refForm",ref:d,modelValue:o(v),"onUpdate:modelValue":i[2]||(i[2]=c=>b(v)?v.value=c:null),onSubmit:W(O,["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>[e(X,{modelValue:o(n),"onUpdate:modelValue":i[0]||(i[0]=c=>b(n)?n.value=c:null),rules:[o(B)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(ee,{clearable:"",modelValue:o(V),"onUpdate:modelValue":i[1]||(i[1]=c=>b(V)?V.value=c:null),items:f.assets,"item-value":"id","item-title":"name",label:"Asset",placeholder:"Asset",rules:[o(B)]},null,8,["modelValue","items","rules"])]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(y,{type:"submit",class:"me-3"},{default:t(()=>[x(" Submit ")]),_:1}),e(y,{type:"reset",variant:"tonal",color:"secondary",onClick:w},{default:t(()=>[x(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ne={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},component:{type:Object,required:!0}},emits:["update:isDrawerOpen","objectData"],setup(g,{emit:m}){const f=g,V=s(),v=()=>{m("update:isDialogVisible",!1)};J(()=>f.component,_=>{_&&(V.value=_.id||0)});const d=()=>{m("objectData",{id:f.component.id}),m("update:isDialogVisible",!1)};return(_,n)=>{const w=be;return D(),h(ge,{modelValue:f.isDialogVisible,"onUpdate:modelValue":n[2]||(n[2]=O=>f.isDialogVisible=O),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(w,{onClick:n[0]||(n[0]=O=>v())}),e(F,{title:"Confirmation"},{default:t(()=>[e(E,null,{default:t(()=>[x(" Are you sure you want to delete this component ? ")]),_:1}),e(E,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(y,{color:"secondary",variant:"tonal",onClick:n[1]||(n[1]=O=>m("update:isDialogVisible",!1))},{default:t(()=>[x(" Disagree ")]),_:1}),e(y,{onClick:d},{default:t(()=>[x(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},$e=ce("useComponentStore",{actions:{fetchData(g){return T.get("/api/components/list",{params:g})},addComponent(g){const{name:m,asset_id:f}=g;return new Promise((V,v)=>{T.post("/api/components/store",{name:m,asset_id:f}).then(d=>V(d)).catch(d=>v(d))})},updateComponent(g){console.log(g);const{id:m,name:f,asset_id:V}=g;return new Promise((v,d)=>{let _={name:f,asset_id:V};T.post("/api/components/update/"+m,_).then(n=>v(n)).catch(n=>d(n))})},deleteComponent(g){const{id:m}=g;return new Promise((f,V)=>{T.delete("/api/components/delete/"+m).then(v=>f(v)).catch(v=>V(v))})}}});const Pe={class:"me-3"},Te={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ie={style:{width:"8rem"}},je=u("thead",null,[u("tr",null,[u("th",{scope:"col"}," ID "),u("th",{scope:"col"}," Component "),u("th",{scope:"col"}," Asset "),u("th",{scope:"col"}," LAST MAINTENANCE "),u("th",{scope:"col"}," NEXT MAINTENANCE "),u("th",{scope:"col"}," ACTIONS ")])],-1),ze={class:"d-flex align-center"},Be={key:1},Fe={class:"d-flex flex-column"},Le={class:"text-base"},Re={class:"text-center",style:{width:"5rem"}},qe=u("tr",null,[u("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Me=[qe],Je={class:"text-sm text-disabled"},He={__name:"index",setup(g){const m=$e(),f=s(""),V=s(!1),v=s(!0),d=s();s(),s();const _=s(10),n=s(1),w=s(1),O=s(0);let r=s([]),i=s([]);const c=s({isActive:!1}),C=()=>{c.value.isActive=!0,m.fetchData({searchValue:f.value,perPage:_.value,currentPage:n.value}).then(p=>{i.value=p.data.components,r.value=p.data.assets,V.value=!1,c.value.isActive=!1}).catch(p=>{c.value.isActive=!1})};L(C),L(()=>{n.value>w.value&&(n.value=w.value)}),J(f,()=>{V.value=!0,C()});const ae=p=>p==="subscriber"?{color:"warning",icon:"tabler-user"}:p==="author"?{color:"success",icon:"tabler-circle-check"}:p==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:p==="editor"?{color:"info",icon:"tabler-pencil"}:p==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},$=s(!1),P=s(!1),U=s(!1);s(),L(()=>{n.value>w.value&&(n.value=w.value)});const le=pe(()=>{const p=i.value.length?(n.value-1)*_.value+1:0,a=i.value.length+(n.value-1)*_.value;return`Showing ${p} to ${a} of ${O.value} entries`}),oe=p=>{m.addComponent(p).then(a=>{C(),R(a.data.message)}).catch(a=>{q(a.response.data.message),c.value.isActive=!1})},se=p=>{m.updateComponent(p).then(a=>{C(),R(a.data.message)}).catch(a=>{q(a.response.data.message),c.value.isActive=!1})},ne=p=>{m.deleteComponent(p).then(a=>{C(),R(a.data.message)}).catch(a=>{q(a.response.data.message),c.value.isActive=!1})},re=p=>{P.value=!0,d.value=p},ie=p=>{U.value=!0,d.value=p};return(p,a)=>{const ue=me("RouterLink");return D(),I("section",null,[e(Q,null,{default:t(()=>[e(De,{"model-value":o(c).isActive,class:"align-center justify-center"},{default:t(()=>[e(G,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(A,{cols:"12"},{default:t(()=>[e(F,{title:"Components"},{default:t(()=>[e(M),e(E,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[u("div",Pe,[e(ye,{modelValue:o(_),"onUpdate:modelValue":a[0]||(a[0]=l=>b(_)?_.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(H),u("div",Te,[u("div",Ie,[o(V)?(D(),h(G,{key:0,indeterminate:"",color:"primary"})):(D(),h(X,{key:1,onInput:a[1]||(a[1]=l=>v.value=!0),ref:"searchField",modelValue:o(f),"onUpdate:modelValue":a[2]||(a[2]=l=>b(f)?f.value=l:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(y,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:t(()=>[x(" Export ")]),_:1}),p.$can(o(S).ROLE.ADD,o(S).ROLE.SUBJECT)?(D(),h(y,{key:0,"prepend-icon":"tabler-plus",onClick:a[3]||(a[3]=l=>$.value=!0)},{default:t(()=>[x(" Add Component ")]),_:1})):j("",!0)])]),_:1}),e(M),e(we,{class:"text-no-wrap"},{default:t(()=>[je,u("tbody",null,[(D(!0),I(fe,null,ve(o(i),l=>(D(),I("tr",{key:l.id,style:{height:"3.75rem"}},[u("td",null,k(l.id),1),u("td",null,[u("div",ze,[e(Ce,{variant:"tonal",color:ae(l.component).color,class:"me-3",size:"38"},{default:t(()=>[l.avatar?(D(),h(he,{key:0,src:l.avatar},null,8,["src"])):(D(),I("span",Be,k(l.name.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),u("div",Fe,[u("h6",Le,[e(ue,{to:{name:"apps-user-view-id",params:{id:l.id}},class:"font-weight-medium user-list-name"},{default:t(()=>[x(k(l.name),1)]),_:2},1032,["to"])])])])]),u("td",null,k(l.asset.name),1),u("td",null,k(l.last_maintenance_date),1),u("td",null,k(l.next_maintenance_date),1),u("td",Re,[p.$can(o(S).ROLE.EDIT,o(S).ROLE.SUBJECT)?(D(),h(y,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:de=>re(l)},{default:t(()=>[e(N,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):j("",!0),p.$can(o(S).ROLE.DELETE,o(S).ROLE.SUBJECT)?(D(),h(y,{key:1,icon:"",size:"x-small",color:"default",variant:"text",onClick:de=>ie(l)},{default:t(()=>[e(N,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):j("",!0),e(y,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(N,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),Ve(u("tfoot",null,Me,512),[[_e,!o(i).length]])]),_:1}),e(M),e(E,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[u("span",Je,k(o(le)),1),e(xe,{modelValue:o(n),"onUpdate:modelValue":a[4]||(a[4]=l=>b(n)?n.value=l:null),size:"small","total-visible":5,length:o(w)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ae,{isDrawerOpen:o($),"onUpdate:isDrawerOpen":a[5]||(a[5]=l=>b($)?$.value=l:null),assets:o(r),"onUpdate:assets":a[6]||(a[6]=l=>b(r)?r.value=l:r=l),onObjectData:oe},null,8,["isDrawerOpen","assets"]),e(Ue,{isDrawerOpen:o(P),"onUpdate:isDrawerOpen":a[7]||(a[7]=l=>b(P)?P.value=l:null),component:o(d),"onUpdate:component":a[8]||(a[8]=l=>b(d)?d.value=l:null),assets:o(r),"onUpdate:assets":a[9]||(a[9]=l=>b(r)?r.value=l:r=l),onObjectData:se},null,8,["isDrawerOpen","component","assets"]),o(U)?(D(),h(Ne,{key:0,isDialogVisible:o(U),"onUpdate:isDialogVisible":a[10]||(a[10]=l=>b(U)?U.value=l:null),component:o(d),"onUpdate:component":a[11]||(a[11]=l=>b(d)?d.value=l:null),onObjectData:ne},null,8,["isDialogVisible","component"])):j("",!0)])}}};typeof Z=="function"&&Z(He);export{He as default};
