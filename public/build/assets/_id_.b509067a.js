import{bd as I,j as E,k as n,$ as G,o as v,b as y,w as l,p as e,q as s,be as K,E as i,c as z,a as Q,F as H,y as S,m as c,D as h}from"./main.bc5a6167.js";import"./AppDateTimePicker.7a3a8451.js";import{u as J}from"./useSaleStore.0d02a10c.js";import{s as C}from"./successMiddleware.76cc9273.js";import{_ as W}from"./InvoiceSendInvoiceDrawer.d9626c7d.js";/* empty css                        *//* empty css                                                           *//* empty css                                                        */import{a as X,V}from"./VBtn.f2bdc60e.js";import{a as Y}from"./VOverlay.73582a32.js";import{V as R,c as B}from"./VCard.7d98e4d8.js";import{V as Z}from"./VForm.0f28fc52.js";import{V as P,a as r}from"./VRow.54306fd6.js";import{V as _}from"./VInput.2754c40c.js";import{V as p}from"./VTextField.cfceb116.js";import{V as F}from"./VSwitch.bab713f6.js";import"./VField.ee41957d.js";import"./index.aabd9a56.js";import"./position.9c03e7aa.js";import"./router.97736653.js";import"./easing.36b781ab.js";import"./VSpacer.6a899248.js";import"./VAvatar.ac7ddd4f.js";import"./VImg.e07274e6.js";import"./VTextarea.c207fe45.js";/* empty css                   */import"./forwardRefs.c003b6b8.js";import"./VCounter.4d14b846.js";import"./VChip.dd0a5f41.js";import"./VNavigationDrawer.159baa28.js";import"./ssrBoot.53da8efe.js";import"./lazy.de2d5758.js";import"./VSelectionControl.75656c3f.js";const ee=c("h6",{class:"text-sm font-weight-medium mb-3"}," Payment Method: ",-1),te={class:"mt-5 d-flex align-center justify-space-between"},le={class:"d-flex align-center justify-space-between"},ae={class:"d-flex align-center justify-space-between"},je={__name:"[id]",setup(oe){const w=I(),L=E(),f=n([]),d=n({raw_material_price:0,total_profit:0,total_amount:0}),g=n(0),A=J(),m=n({isActive:!1}),$=n(null),k=()=>{A.getArticlesBenefit(Number(w.params.id)).then(a=>{m.isActive=!1,f.value=a.data.articles,d.value=a.data.benefit,d.value.total_profit=d.value.benefit}).catch(a=>{m.isActive=!1,console.log(a)})};G(k);const b=n(!1);n(!1);const U=n(!0),T=n(!1),x=n(!1),N=n(!1);n(0);const j=()=>{},O=a=>{a.total_profit=parseFloat(a.benefit)*parseFloat(a.quantity),D()},D=()=>{g.value=0,d.value.total_amount=0;for(let a=0;a<f.value.length;a++)g.value+=parseFloat(f.value[a].total_profit),d.value.total_amount+=parseFloat(f.value[a].total_amount);d.value.total_profit=parseFloat(g.value).toFixed(2)},q=()=>{m.value.isActive=!0,A.updateProfit(f.value,d.value,Number(w.params.id)).then(a=>{m.value.isActive=!1,C(a.data.message),L.push("/apps/pos/benefitultra/list")}).catch(a=>{m.value.isActive=!1,console.log(a)})},M=()=>{m.value.isActive=!0,A.refreshData(Number(w.params.id)).then(a=>{console.log(a),m.value.isActive=!1,k(),C(a.data.message)}).catch(a=>{m.value.isActive=!1,console.log(a)})};return(a,o)=>(v(),y(P,null,{default:l(()=>[e(Y,{"model-value":s(m).isActive,class:"align-center justify-center"},{default:l(()=>[e(X,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(r,{cols:"12",md:"12"},{default:l(()=>[e(R,null,{default:l(()=>[e(B,{class:"d-flex flex-wrap justify-space-between flex-column"},{default:l(()=>[e(Z,{ref:"refForm",onSubmit:o[4]||(o[4]=K(()=>{},["prevent"]))},{default:l(()=>[e(P,null,{default:l(()=>[e(r,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(_,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:s(d).total_amount,"onUpdate:modelValue":o[0]||(o[0]=t=>s(d).total_amount=t),type:"number",readonly:"",label:"TOTAL AMOUNT",placeholder:"TOTAL AMOUNT"},null,8,["modelValue"])]),_:1}),e(r,{cols:"6",md:"3",class:"mb-5 text-center"},{default:l(()=>[e(_,{title:"Raw material price per KG ",class:"mb-5"}),e(p,{modelValue:s(d).total_profit,"onUpdate:modelValue":o[1]||(o[1]=t=>s(d).total_profit=t),type:"number",readonly:"",label:"TOTAL PROFIT",placeholder:"TOTAL PROFIT"},null,8,["modelValue"])]),_:1}),e(r,{cols:"4",md:"1",class:"mt-7"},{default:l(()=>[e(V,{onClick:o[2]||(o[2]=t=>q())},{default:l(()=>[i(" Submit ")]),_:1})]),_:1}),e(r,{cols:"4",md:"1",class:"mt-7"},{default:l(()=>[e(V,{color:"success",onClick:o[3]||(o[3]=t=>M())},{default:l(()=>[i(" Refresh ")]),_:1})]),_:1})]),_:1}),(v(!0),z(H,null,Q(s(f),t=>(v(),y(P,null,{default:l(()=>[e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{modelValue:t.product.name,"onUpdate:modelValue":u=>t.product.name=u,label:"Name of the product",placeholder:"Name of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.product_price,"onUpdate:modelValue":[u=>t.product_price=u,u=>O(t)],label:"Product's Price",placeholder:"price of the product"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.benefit,"onUpdate:modelValue":[u=>t.benefit=u,u=>O(t)],label:"Product's Benefit",placeholder:"Benefit of the product"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.quantity,"onUpdate:modelValue":u=>t.quantity=u,label:"Product's Quantity",placeholder:"quantity of the product this month",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.total_amount,"onUpdate:modelValue":u=>t.total_amount=u,label:"Product's total amount",placeholder:"total amount of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{cols:"12",md:"2"},{default:l(()=>[e(p,{type:"number",modelValue:t.total_profit,"onUpdate:modelValue":u=>t.total_profit=u,label:"Product's total profit",placeholder:"total profit of the product",readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),256))]),_:1},512)]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",md:"3"},{default:l(()=>[e(R,{class:"mb-8"},{default:l(()=>[e(B,null,{default:l(()=>[e(V,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:o[5]||(o[5]=t=>b.value=!0)},{default:l(()=>[i(" Send Invoice ")]),_:1}),s(N)?(v(),y(V,{key:0,block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-preview-id",params:{id:s($)}}},{default:l(()=>[i(" Preview ")]),_:1},8,["to"])):S("",!0),s(N)?S("",!0):(v(),y(V,{key:1,loading:s(m).isActive,disabled:s(m).isActive,block:"",color:"success",class:"mb-2",onClick:j},{default:l(()=>[i(" Save ")]),_:1},8,["loading","disabled"]))]),_:1})]),_:1}),ee,c("div",te,[e(_,{for:"payment-terms"},{default:l(()=>[i(" Payment Terms ")]),_:1}),c("div",null,[e(F,{id:"payment-terms",modelValue:s(U),"onUpdate:modelValue":o[6]||(o[6]=t=>h(U)?U.value=t:null)},null,8,["modelValue"])])]),c("div",le,[e(_,{for:"client-notes"},{default:l(()=>[i(" Client Notes ")]),_:1}),c("div",null,[e(F,{id:"client-notes",modelValue:s(T),"onUpdate:modelValue":o[7]||(o[7]=t=>h(T)?T.value=t:null)},null,8,["modelValue"])])]),c("div",ae,[e(_,{for:"payment-stub"},{default:l(()=>[i(" Payment Stub ")]),_:1}),c("div",null,[e(F,{id:"payment-stub",modelValue:s(x),"onUpdate:modelValue":o[8]||(o[8]=t=>h(x)?x.value=t:null)},null,8,["modelValue"])])])]),_:1}),e(W,{isDrawerOpen:s(b),"onUpdate:isDrawerOpen":o[9]||(o[9]=t=>h(b)?b.value=t:null)},null,8,["isDrawerOpen"])]),_:1}))}};export{je as default};
