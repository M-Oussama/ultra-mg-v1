import{k as l,o as D,b as x,w as t,m as i,p as e,C as U,q as o,P as G,D as y,be as K,E as A,ay as R,Z as M,bc as de,a1 as T,$ as B,A as ce,r as pe,c as I,y as z,F as me,a as fe,x as C,H as ve,I as Ve,bf as X}from"./main.e6f2226b.js";import{r as W}from"./validators.330a354f.js";import{V as J}from"./VSpacer.5af32ac4.js";import{V as w,a as Z}from"./VBtn.8ee7d1bc.js";import{V as j,c as O}from"./VCard.98fdd3d2.js";import{V as Y}from"./VForm.677822bd.js";import{V as H,a as $}from"./VRow.0dee9a23.js";import{V as Q}from"./VTextField.8783cc1b.js";import{V as ee}from"./VNavigationDrawer.84b927c3.js";import{_ as _e}from"./DialogCloseBtn.bdeee9c4.js";import{V as ge}from"./VDialog.adc227a5.js";import{P as k}from"./permissions.bafe5f34.js";import{s as L}from"./successMiddleware.f4309dc7.js";import{e as F}from"./errorsMiddleware.b7172764.js";import{a as be}from"./VOverlay.6f5b1171.js";import{V as q}from"./VDivider.3beb977f.js";import{V as De}from"./VSelect.2e98f326.js";import{V as we}from"./VTable.be0f615e.js";import{V as ye}from"./VAvatar.bf7ae53a.js";import{V as he}from"./VImg.37abf546.js";import{V as xe}from"./VPagination.5d4e2824.js";import"./index.b522f886.js";import"./router.5ba86b57.js";import"./position.00c850f0.js";import"./VInput.8559a63c.js";import"./index.96305a7f.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.0c7bfcf3.js";import"./easing.36b781ab.js";import"./VCounter.57b6c0d3.js";import"./ssrBoot.671feef1.js";import"./scopeId.f937809a.js";import"./dialog-transition.f250e308.js";import"./lazy.e5202e15.js";import"./VList.2ba046ce.js";import"./VMenu.319a5e50.js";import"./VCheckboxBtn.b0823098.js";import"./VSelectionControl.14a64459.js";import"./VChip.93584157.js";const Ae={class:"d-flex align-center pa-6 pb-1"},Ce=i("h6",{class:"text-h6"}," Add Asset ",-1),ke={__name:"AddNewDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},permissionLeft:{type:Array,required:!0},permissionRight:{type:Array,required:!0}},emits:["update:isDrawerOpen","userData"],setup(b,{emit:u}){const p=b,V=l(!1),r=l(),v=l(""),c=()=>{u("update:isDrawerOpen",!1),R(()=>{var n,f;(n=r.value)==null||n.reset(),(f=r.value)==null||f.resetValidation()})},m=()=>{var n;(n=r.value)==null||n.validate().then(({valid:f})=>{f&&(u("objectData",{name:v.value,permissions:p.permissionRight}),u("update:isDrawerOpen",!1),R(()=>{var _,g;(_=r.value)==null||_.reset(),(g=r.value)==null||g.resetValidation()}))})},h=n=>{u("update:isDrawerOpen",n)};return(n,f)=>(D(),x(ee,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":p.isDrawerOpen,"onUpdate:modelValue":h},{default:t(()=>[i("div",Ae,[Ce,e(J),e(w,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:c},{default:t(()=>[e(U,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(G),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(O,null,{default:t(()=>[e(Y,{ref_key:"refForm",ref:r,modelValue:o(V),"onUpdate:modelValue":f[1]||(f[1]=_=>y(V)?V.value=_:null),onSubmit:K(m,["prevent"])},{default:t(()=>[e(H,null,{default:t(()=>[e($,{cols:"12"},{default:t(()=>[e(Q,{modelValue:o(v),"onUpdate:modelValue":f[0]||(f[0]=_=>y(v)?v.value=_:null),rules:[o(W)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(w,{type:"submit",class:"me-3"},{default:t(()=>[A(" Submit ")]),_:1}),e(w,{type:"reset",variant:"tonal",color:"secondary",onClick:c},{default:t(()=>[A(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Oe={class:"d-flex align-center pa-6 pb-1"},Se=i("h6",{class:"text-h6"}," Edit Asset ",-1),Ee={__name:"EditDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},asset:{type:Object}},emits:["update:isDrawerOpen","objectData"],setup(b,{emit:u}){const p=b;M(()=>p.asset,n=>{n&&(v.value=n.id||0,c.value=n.name||"")});const V=l(!1),r=l(),v=l(),c=l("");l([]),l(),l(),l(!1);const m=()=>{u("update:isDrawerOpen",!1),R(()=>{var n,f;(n=r.value)==null||n.reset(),(f=r.value)==null||f.resetValidation()})},h=()=>{var n;(n=r.value)==null||n.validate().then(({valid:f})=>{f&&(u("objectData",{id:v.value,name:c.value}),u("update:isDrawerOpen",!1),R(()=>{var _,g;(_=r.value)==null||_.reset(),(g=r.value)==null||g.resetValidation()}))})};return(n,f)=>(D(),x(ee,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":p.isDrawerOpen},{default:t(()=>[i("div",Oe,[Se,e(J),e(w,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:m},{default:t(()=>[e(U,{size:"18",icon:"tabler-x"})]),_:1})]),e(o(G),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(O,null,{default:t(()=>[e(Y,{ref_key:"refForm",ref:r,modelValue:o(V),"onUpdate:modelValue":f[1]||(f[1]=_=>y(V)?V.value=_:null),onSubmit:K(h,["prevent"])},{default:t(()=>[e(H,null,{default:t(()=>[e($,{cols:"12"},{default:t(()=>[e(Q,{modelValue:o(c),"onUpdate:modelValue":f[0]||(f[0]=_=>y(c)?c.value=_:null),rules:[o(W)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(w,{type:"submit",class:"me-3"},{default:t(()=>[A(" Submit ")]),_:1}),e(w,{type:"reset",variant:"tonal",color:"secondary",onClick:m},{default:t(()=>[A(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ue={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},asset:{type:Object,required:!0}},emits:["update:isDrawerOpen","objectData"],setup(b,{emit:u}){const p=b,V=l(),r=()=>{u("update:isDialogVisible",!1)};M(()=>p.asset,c=>{c&&(V.value=c.id||0)});const v=()=>{u("objectData",{id:p.asset.id}),u("update:isDialogVisible",!1)};return(c,m)=>{const h=_e;return D(),x(ge,{modelValue:p.isDialogVisible,"onUpdate:modelValue":m[2]||(m[2]=n=>p.isDialogVisible=n),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(h,{onClick:m[0]||(m[0]=n=>r())}),e(j,{title:"Confirmation"},{default:t(()=>[e(O,null,{default:t(()=>[A(" Are you sure you want to delete this asset ? ")]),_:1}),e(O,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(w,{color:"secondary",variant:"tonal",onClick:m[1]||(m[1]=n=>u("update:isDialogVisible",!1))},{default:t(()=>[A(" Disagree ")]),_:1}),e(w,{onClick:v},{default:t(()=>[A(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},$e=de("useAssetStore",{actions:{fetchData(b){return T.get("/api/assets/list",{params:b})},addAsset(b){const{name:u}=b;return new Promise((p,V)=>{T.post("/api/assets/store",{name:u}).then(r=>p(r)).catch(r=>V(r))})},updateAsset(b){console.log(b);const{id:u,name:p}=b;return new Promise((V,r)=>{let v={name:p};T.post("/api/assets/update/"+u,v).then(c=>V(c)).catch(c=>r(c))})},deleteAsset(b){const{id:u}=b;return new Promise((p,V)=>{T.delete("/api/assets/delete/"+u).then(r=>p(r)).catch(r=>V(r))})}}});const Ne={class:"me-3",style:{width:"80px"}},Pe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Te={style:{width:"10rem"}},Ie=i("thead",null,[i("tr",null,[i("th",{scope:"col"}," ID "),i("th",{scope:"col"}," Asset "),i("th",{scope:"col"}," LAST MAINTENANCE "),i("th",{scope:"col"}," NEXT MAINTENANCE "),i("th",{scope:"col"}," ACTIONS ")])],-1),ze={class:"d-flex align-center"},Re={key:1},je={class:"d-flex flex-column"},Be={class:"text-base"},Le={class:"text-center",style:{width:"5rem"}},Fe=i("tr",null,[i("td",{colspan:"7",class:"text-center"}," No data available ")],-1),qe=[Fe],Me={class:"text-sm text-disabled"},Je={__name:"index",setup(b){const u=$e(),p=l(""),V=l(!1),r=l(!0),v=l();l(),l();const c=l(10),m=l(1),h=l(1),n=l(0);let f=l([]),_=l([]);l([]),l([]),l([]),l([]);const g=l({isActive:!1}),S=()=>{g.value.isActive=!0,u.fetchData({searchValue:p.value,perPage:c.value,currentPage:m.value}).then(d=>{_.value=d.data.assets,V.value=!1,g.value.isActive=!1}).catch(d=>{g.value.isActive=!1})};B(S),B(()=>{m.value>h.value&&(m.value=h.value)}),M(p,()=>{V.value=!0,S()});const te=d=>d==="subscriber"?{color:"warning",icon:"tabler-user"}:d==="author"?{color:"success",icon:"tabler-circle-check"}:d==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:d==="editor"?{color:"info",icon:"tabler-pencil"}:d==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},N=l(!1),P=l(!1),E=l(!1);l(),B(()=>{m.value>h.value&&(m.value=h.value)});const ae=ce(()=>{const d=f.value.length?(m.value-1)*c.value+1:0,a=f.value.length+(m.value-1)*c.value;return`Showing ${d} to ${a} of ${n.value} entries`}),le=d=>{g.value.isActive=!0,u.addAsset(d).then(a=>{S(),L(a.data.message)}).catch(a=>{F(a.response.data.message),g.value.isActive=!1})},se=d=>{g.value.isActive=!0,u.updateAsset(d).then(a=>{S(),L(a.data.message)}).catch(a=>{F(a.response.data.message),g.value.isActive=!1})},oe=d=>{g.value.isActive=!0,u.deleteAsset(d).then(a=>{S(),L(a.data.message)}).catch(a=>{F(a.response.data.message),g.value.isActive=!1})},re=d=>{P.value=!0,v.value=d},ie=d=>{E.value=!0,v.value=d};return(d,a)=>{const ne=pe("RouterLink");return D(),I("section",null,[e(H,null,{default:t(()=>[e(be,{"model-value":o(g).isActive,class:"align-center justify-center"},{default:t(()=>[e(Z,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e($,{cols:"12"},{default:t(()=>[e(j,{title:"Assets"},{default:t(()=>[e(q),e(O,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[i("div",Ne,[e(De,{modelValue:o(c),"onUpdate:modelValue":a[0]||(a[0]=s=>y(c)?c.value=s:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(J),i("div",Pe,[i("div",Te,[o(V)?(D(),x(Z,{key:0,indeterminate:"",color:"primary"})):(D(),x(Q,{key:1,onInput:a[1]||(a[1]=s=>r.value=!0),ref:"searchField",modelValue:o(p),"onUpdate:modelValue":a[2]||(a[2]=s=>y(p)?p.value=s:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(w,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:t(()=>[A(" Export ")]),_:1}),d.$can(o(k).ROLE.ADD,o(k).ROLE.SUBJECT)?(D(),x(w,{key:0,"prepend-icon":"tabler-plus",onClick:a[3]||(a[3]=s=>N.value=!0)},{default:t(()=>[A(" Add Asset ")]),_:1})):z("",!0)])]),_:1}),e(q),e(we,{class:"text-no-wrap"},{default:t(()=>[Ie,i("tbody",null,[(D(!0),I(me,null,fe(o(_),s=>(D(),I("tr",{key:s.id,style:{height:"3.75rem"}},[i("td",null,C(s.id),1),i("td",null,[i("div",ze,[e(ye,{variant:"tonal",color:te(s.asset).color,class:"me-3",size:"38"},{default:t(()=>[s.avatar?(D(),x(he,{key:0,src:s.avatar},null,8,["src"])):(D(),I("span",Re,C(s.name.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),i("div",je,[i("h6",Be,[e(ne,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium user-list-name"},{default:t(()=>[A(C(s.name),1)]),_:2},1032,["to"])])])])]),i("td",null,C(s.last_maintenance_date),1),i("td",null,C(s.next_maintenance_date),1),i("td",Le,[d.$can(o(k).ROLE.EDIT,o(k).ROLE.SUBJECT)?(D(),x(w,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:ue=>re(s)},{default:t(()=>[e(U,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):z("",!0),d.$can(o(k).ROLE.DELETE,o(k).ROLE.SUBJECT)?(D(),x(w,{key:1,icon:"",size:"x-small",color:"default",variant:"text",onClick:ue=>ie(s)},{default:t(()=>[e(U,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):z("",!0),e(w,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(U,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),ve(i("tfoot",null,qe,512),[[Ve,!o(_).length]])]),_:1}),e(q),e(O,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[i("span",Me,C(o(ae)),1),e(xe,{modelValue:o(m),"onUpdate:modelValue":a[4]||(a[4]=s=>y(m)?m.value=s:null),size:"small","total-visible":5,length:o(h)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ke,{isDrawerOpen:o(N),"onUpdate:isDrawerOpen":a[5]||(a[5]=s=>y(N)?N.value=s:null),onObjectData:le},null,8,["isDrawerOpen"]),e(Ee,{isDrawerOpen:o(P),"onUpdate:isDrawerOpen":a[6]||(a[6]=s=>y(P)?P.value=s:null),asset:o(v),"onUpdate:asset":a[7]||(a[7]=s=>y(v)?v.value=s:null),onObjectData:se},null,8,["isDrawerOpen","asset"]),o(E)?(D(),x(Ue,{key:0,isDialogVisible:o(E),"onUpdate:isDialogVisible":a[8]||(a[8]=s=>y(E)?E.value=s:null),asset:o(v),"onUpdate:asset":a[9]||(a[9]=s=>y(v)?v.value=s:null),onObjectData:oe},null,8,["isDialogVisible","asset"])):z("",!0)])}}};typeof X=="function"&&X(Je);export{Je as default};
