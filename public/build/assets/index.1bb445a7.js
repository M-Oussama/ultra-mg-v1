import{k as i,al as H,A as I,$ as P,o as g,c as k,m as c,F as N,a as z,x as R,b as $,w as o,p as e,C as B,q as d,P as se,D as x,be as ae,E as L,ay as Q,Z as X,bc as he,a1 as M,r as Ve,y as J,H as be,I as ye,bf as le}from"./main.a88fc9d8.js";import{r as ie}from"./validators.330a354f.js";import{V as Y}from"./VSpacer.ac05d315.js";import{V as C,a as oe}from"./VBtn.4793733a.js";import{V as Z,c as U}from"./VCard.a26580f4.js";import{V as re}from"./VForm.1d060c86.js";import{V as ee,a as A}from"./VRow.3acaa8a0.js";import{V as te}from"./VTextField.79a7cac4.js";import{V as ne}from"./VNavigationDrawer.10bb7940.js";import{_ as we}from"./DialogCloseBtn.ed5aa0e1.js";import{V as De}from"./VDialog.879f8fb2.js";import{P as S}from"./permissions.bafe5f34.js";import{s as G}from"./successMiddleware.18bb07f4.js";import{e as K}from"./errorsMiddleware.f9131f1f.js";import{a as xe}from"./VOverlay.7b08ee76.js";import{V as W}from"./VDivider.d969cb35.js";import{V as ke}from"./VSelect.41ef638f.js";import{V as Ce}from"./VTable.a6c0afbb.js";import{V as Re}from"./VAvatar.d9fc142d.js";import{V as Oe}from"./VImg.da644a47.js";import{V as $e}from"./VPagination.fd41084f.js";import"./index.b522f886.js";import"./router.f48c532b.js";import"./position.954b49b2.js";import"./VInput.962bc6d0.js";import"./index.60e81d91.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.c1b1c013.js";import"./easing.36b781ab.js";import"./VCounter.217b097a.js";import"./ssrBoot.f27232d8.js";import"./scopeId.a6fee37a.js";import"./dialog-transition.c09ab3d4.js";import"./lazy.a1de406b.js";import"./VList.9cd035e1.js";import"./VMenu.28d24987.js";import"./VCheckboxBtn.13b6a266.js";import"./VSelectionControl.b0dab7de.js";import"./VChip.a15d7a7c.js";const Le={class:"container"},Ae={class:"list"},Se=["onClick"],Ue={class:"controls"},je={class:"list"},Ee=["onClick"],Te={__name:"list-dual-box",props:{left:{type:Object},right:{type:Object}},setup(y){const l=y,p=i(0);let h=H([]);const f=H([]);I(()=>h.filter(t=>t==null?void 0:t.action.toLowerCase().includes(m.value.toLowerCase()))),I(()=>f.filter(t=>t==null?void 0:t.action.toLowerCase().includes(V.value.toLowerCase()))),i(!1),P(()=>{});const m=i(""),V=i(""),u=(t,a,n)=>{n.push(t);const w=a.indexOf(t);a.splice(w,1)},D=(t,a,n)=>{const w=a.indexOf(t);a.splice(w,1),n.push(t)},b=()=>{for(;l.right.length>0;)l.right.map(function(t,a){recalculateBoxRTL(t,l.right,l.left)})},v=()=>{for(;p.value>0&&l.left.length>0;)l.left.map(function(t,a){recalculateBoxLTR(t,l.left,l.right)})};return(t,a)=>(g(),k("div",Le,[c("div",Ae,[(g(!0),k(N,null,z(l.left,n=>(g(),k("div",{key:n.id,onClick:w=>u(n,l.left,l.right)},R(n.action)+"- "+R(n.subject),9,Se))),128))]),c("div",Ue,[c("div",{onClick:a[0]||(a[0]=n=>v())},">>"),c("div",{onClick:a[1]||(a[1]=n=>b())},"<<")]),c("div",je,[(g(!0),k(N,null,z(l.right,n=>(g(),k("div",{key:n.id,onClick:w=>D(n,l.right,l.left)},R(n.action)+" - "+R(n.subject),9,Ee))),128))])]))}},Pe={class:"d-flex align-center pa-6 pb-1"},Be=c("h6",{class:"text-h6"}," Add Role ",-1),Ie={__name:"AddNewDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},permissionLeft:{type:Array,required:!0},permissionRight:{type:Array,required:!0}},emits:["update:isDrawerOpen","userData"],setup(y,{emit:l}){const p=y,h=i(!1),f=i(),m=i(""),V=()=>{l("update:isDrawerOpen",!1),Q(()=>{var b,v;(b=f.value)==null||b.reset(),(v=f.value)==null||v.resetValidation()})},u=()=>{var b;(b=f.value)==null||b.validate().then(({valid:v})=>{v&&(l("objectData",{role:m.value,permissions:p.permissionRight}),l("update:isDrawerOpen",!1),Q(()=>{var t,a;(t=f.value)==null||t.reset(),(a=f.value)==null||a.resetValidation()}))})},D=b=>{l("update:isDrawerOpen",b)};return(b,v)=>(g(),$(ne,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":p.isDrawerOpen,"onUpdate:modelValue":D},{default:o(()=>[c("div",Pe,[Be,e(Y),e(C,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:V},{default:o(()=>[e(B,{size:"18",icon:"tabler-x"})]),_:1})]),e(d(se),{options:{wheelPropagation:!1}},{default:o(()=>[e(Z,{flat:""},{default:o(()=>[e(U,null,{default:o(()=>[e(re,{ref_key:"refForm",ref:f,modelValue:d(h),"onUpdate:modelValue":v[1]||(v[1]=t=>x(h)?h.value=t:null),onSubmit:ae(u,["prevent"])},{default:o(()=>[e(ee,null,{default:o(()=>[e(A,{cols:"12"},{default:o(()=>[e(te,{modelValue:d(m),"onUpdate:modelValue":v[0]||(v[0]=t=>x(m)?m.value=t:null),rules:[d(ie)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(A,{cols:"12"},{default:o(()=>[e(Te,{left:p.permissionLeft,right:p.permissionRight},null,8,["left","right"])]),_:1}),e(A,{cols:"12"},{default:o(()=>[e(C,{type:"submit",class:"me-3"},{default:o(()=>[L(" Submit ")]),_:1}),e(C,{type:"reset",variant:"tonal",color:"secondary",onClick:V},{default:o(()=>[L(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};const Ne={class:"container"},ze={class:"list"},Fe=["onClick"],qe={class:"controls"},Me={class:"list"},Je=["onClick"],He={__name:"update-list-dual-box",props:{left:{type:Object},right:{type:Object}},setup(y){const l=y,p=i(0);let h=H([]);const f=H([]);I(()=>h.filter(t=>t==null?void 0:t.action.toLowerCase().includes(m.value.toLowerCase()))),I(()=>f.filter(t=>t==null?void 0:t.action.toLowerCase().includes(V.value.toLowerCase()))),i(!1),P(()=>{});const m=i(""),V=i(""),u=(t,a,n)=>{n.push(t);const w=a.indexOf(t);a.splice(w,1)},D=(t,a,n)=>{const w=a.indexOf(t);a.splice(w,1),n.push(t)},b=()=>{for(;l.right.length>0;)l.right.map(function(t,a){recalculateBoxRTL(t,l.right,l.left)})},v=()=>{for(;p.value>0&&l.left.length>0;)l.left.map(function(t,a){recalculateBoxLTR(t,l.left,l.right)})};return(t,a)=>(g(),k("div",Ne,[c("div",ze,[(g(!0),k(N,null,z(l.left,n=>(g(),k("div",{key:n.id,onClick:w=>u(n,l.left,l.right)},R(n.action)+"- "+R(n.subject),9,Fe))),128))]),c("div",qe,[c("div",{onClick:a[0]||(a[0]=n=>v())},">>"),c("div",{onClick:a[1]||(a[1]=n=>b())},"<<")]),c("div",Me,[(g(!0),k(N,null,z(l.right,n=>(g(),k("div",{key:n.id,onClick:w=>D(n,l.right,l.left)},R(n.action)+" - "+R(n.subject),9,Je))),128))])]))}},Qe={class:"d-flex align-center pa-6 pb-1"},Ze=c("h6",{class:"text-h6"}," Edit role ",-1),Ge={__name:"EditDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},role:{type:Object},permissionLeft:{type:Object},permissionRight:{type:Object}},emits:["update:isDrawerOpen","objectData"],setup(y,{emit:l}){const p=y;X(()=>p.role,v=>{v&&(m.value=v.id||0,u.value=v.role||"",V.value=v.permissions||"")});const h=i(!1),f=i(),m=i();i("");const V=i([]),u=i();i(),i(!1);const D=()=>{l("update:isDrawerOpen",!1),Q(()=>{var v,t;(v=f.value)==null||v.reset(),(t=f.value)==null||t.resetValidation()})},b=()=>{var v;(v=f.value)==null||v.validate().then(({valid:t})=>{t&&(l("objectData",{id:m.value,role:u.value,permissions:p.permissionRight}),l("update:isDrawerOpen",!1),Q(()=>{var a,n;(a=f.value)==null||a.reset(),(n=f.value)==null||n.resetValidation()}))})};return(v,t)=>(g(),$(ne,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":p.isDrawerOpen},{default:o(()=>[c("div",Qe,[Ze,e(Y),e(C,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:D},{default:o(()=>[e(B,{size:"18",icon:"tabler-x"})]),_:1})]),e(d(se),{options:{wheelPropagation:!1}},{default:o(()=>[e(Z,{flat:""},{default:o(()=>[e(U,null,{default:o(()=>[e(re,{ref_key:"refForm",ref:f,modelValue:d(h),"onUpdate:modelValue":t[1]||(t[1]=a=>x(h)?h.value=a:null),onSubmit:ae(b,["prevent"])},{default:o(()=>[e(ee,null,{default:o(()=>[e(A,{cols:"12"},{default:o(()=>[e(te,{modelValue:d(u),"onUpdate:modelValue":t[0]||(t[0]=a=>x(u)?u.value=a:null),rules:[d(ie)],label:"Role"},null,8,["modelValue","rules"])]),_:1}),e(A,{cols:"12"},{default:o(()=>[e(He,{left:p.permissionLeft,right:p.permissionRight},null,8,["left","right"])]),_:1}),e(A,{cols:"12"},{default:o(()=>[e(C,{type:"submit",class:"me-3"},{default:o(()=>[L(" Submit ")]),_:1}),e(C,{type:"reset",variant:"tonal",color:"secondary",onClick:D},{default:o(()=>[L(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Ke={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},role:{type:Object,required:!0}},emits:["update:isDrawerOpen","objectData"],setup(y,{emit:l}){const p=y,h=i(),f=()=>{l("update:isDialogVisible",!1)};X(()=>p.role,V=>{V&&(h.value=V.id||0)});const m=()=>{l("objectData",{id:p.role.id}),l("update:isDialogVisible",!1)};return(V,u)=>{const D=we;return g(),$(De,{modelValue:p.isDialogVisible,"onUpdate:modelValue":u[2]||(u[2]=b=>p.isDialogVisible=b),persistent:"",class:"v-dialog-sm"},{default:o(()=>[e(D,{onClick:u[0]||(u[0]=b=>f())}),e(Z,{title:"Confirmation"},{default:o(()=>[e(U,null,{default:o(()=>[L(" Are you sure you want to delete this role ? ")]),_:1}),e(U,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[e(C,{color:"secondary",variant:"tonal",onClick:u[1]||(u[1]=b=>l("update:isDialogVisible",!1))},{default:o(()=>[L(" Disagree ")]),_:1}),e(C,{onClick:m},{default:o(()=>[L(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},We=he("RoleStore",{actions:{fetchData(y){return M.get("/api/roles/list",{params:y})},addRole(y){const{role:l,permissions:p}=y;return new Promise((h,f)=>{M.post("/api/roles/store",{role:l,permissions:p}).then(m=>h(m)).catch(m=>f(m))})},updateRole(y){console.log(y);const{id:l,role:p,permissions:h}=y;return new Promise((f,m)=>{let V={role:p,permissions:h};M.post("/api/roles/update/"+l,V).then(u=>f(u)).catch(u=>m(u))})},deleteRole(y){const{id:l}=y;return new Promise((p,h)=>{M.delete("/api/roles/delete/"+l).then(f=>p(f)).catch(f=>h(f))})}}});const Xe={class:"me-3",style:{width:"80px"}},Ye={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},et={style:{width:"10rem"}},tt=c("thead",null,[c("tr",null,[c("th",{scope:"col"}," ID "),c("th",{scope:"col"}," Role "),c("th",{scope:"col"}," ACTIONS ")])],-1),lt={class:"d-flex align-center"},ot={key:1},st={class:"d-flex flex-column"},at={class:"text-base"},it={class:"text-center",style:{width:"5rem"}},rt=c("tr",null,[c("td",{colspan:"7",class:"text-center"}," No data available ")],-1),nt=[rt],ut={class:"text-sm text-disabled"},dt={__name:"index",setup(y){const l=We(),p=i(""),h=i(!1),f=i(!0),m=i();i(),i();const V=i(10),u=i(1),D=i(1),b=i(0);let v=i([]),t=i([]),a=i([]),n=i([]),w=i([]),j=i([]),O=i({isActive:!1});const E=()=>{O.value.isActive=!0,l.fetchData({searchValue:p.value,perPage:V.value,currentPage:u.value}).then(_=>{t.value=_.data.roles,a.value=_.data.permissions,h.value=!1,O.value.isActive=!1}).catch(_=>{console.error(_),O.value.isActive=!1})};P(E),P(()=>{u.value>D.value&&(u.value=D.value)}),X(p,()=>{h.value=!0,E()});const ue=_=>_==="subscriber"?{color:"warning",icon:"tabler-user"}:_==="author"?{color:"success",icon:"tabler-circle-check"}:_==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:_==="editor"?{color:"info",icon:"tabler-pencil"}:_==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"},F=i(!1),q=i(!1),T=i(!1);i(),P(()=>{u.value>D.value&&(u.value=D.value)});const de=I(()=>{const _=v.value.length?(u.value-1)*V.value+1:0,s=v.value.length+(u.value-1)*V.value;return`Showing ${_} to ${s} of ${b.value} entries`}),ce=_=>{l.addRole(_).then(s=>{G(s.data.message),E(),O.value.isActive=!1}).catch(s=>{O.value.isActive=!1,console.log(s),K(s.response.data.message)})},pe=_=>{l.updateRole(_).then(s=>{G(s.data.message),E(),O.value.isActive=!1}).catch(s=>{O.value.isActive=!1,K(s.response.data.message)})},fe=_=>{l.deleteRole(_).then(s=>{G(s.data.message),E(),O.value.isActive=!1}).catch(s=>{O.value.isActive=!1,K(s.response.data.message)})},me=_=>{q.value=!0,m.value=_,j.value=_.permissions,w.value=_.remaining_permissions},ve=_=>{T.value=!0,m.value=_};return(_,s)=>{const _e=Ve("RouterLink");return g(),k("section",null,[e(ee,null,{default:o(()=>[e(xe,{"model-value":d(O).isActive,class:"align-center justify-center"},{default:o(()=>[e(oe,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(A,{cols:"12"},{default:o(()=>[e(Z,{title:"Roles"},{default:o(()=>[e(W),e(U,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[c("div",Xe,[e(ke,{modelValue:d(V),"onUpdate:modelValue":s[0]||(s[0]=r=>x(V)?V.value=r:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Y),c("div",Ye,[c("div",et,[d(h)?(g(),$(oe,{key:0,indeterminate:"",color:"primary"})):(g(),$(te,{key:1,onInput:s[1]||(s[1]=r=>f.value=!0),ref:"searchField",modelValue:d(p),"onUpdate:modelValue":s[2]||(s[2]=r=>x(p)?p.value=r:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(C,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:o(()=>[L(" Export ")]),_:1}),_.$can(d(S).ROLE.ADD,d(S).ROLE.SUBJECT)?(g(),$(C,{key:0,"prepend-icon":"tabler-plus",onClick:s[3]||(s[3]=r=>F.value=!0)},{default:o(()=>[L(" Add New Role ")]),_:1})):J("",!0)])]),_:1}),e(W),e(Ce,{class:"text-no-wrap"},{default:o(()=>[tt,c("tbody",null,[(g(!0),k(N,null,z(d(t),r=>(g(),k("tr",{key:r.id,style:{height:"3.75rem"}},[c("td",null,R(r.id),1),c("td",null,[c("div",lt,[e(Re,{variant:"tonal",color:ue(r.role).color,class:"me-3",size:"38"},{default:o(()=>[r.avatar?(g(),$(Oe,{key:0,src:r.avatar},null,8,["src"])):(g(),k("span",ot,R(r.role.toUpperCase().charAt(0)),1))]),_:2},1032,["color"]),c("div",st,[c("h6",at,[e(_e,{to:{name:"apps-user-view-id",params:{id:r.id}},class:"font-weight-medium user-list-name"},{default:o(()=>[L(R(r.role),1)]),_:2},1032,["to"])])])])]),c("td",it,[_.$can(d(S).ROLE.EDIT,d(S).ROLE.SUBJECT)?(g(),$(C,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:ge=>me(r)},{default:o(()=>[e(B,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):J("",!0),_.$can(d(S).ROLE.DELETE,d(S).ROLE.SUBJECT)?(g(),$(C,{key:1,icon:"",size:"x-small",color:"default",variant:"text",onClick:ge=>ve(r)},{default:o(()=>[e(B,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):J("",!0),e(C,{icon:"",size:"x-small",color:"default",variant:"text"},{default:o(()=>[e(B,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),be(c("tfoot",null,nt,512),[[ye,!d(t).length]])]),_:1}),e(W),e(U,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[c("span",ut,R(d(de)),1),e($e,{modelValue:d(u),"onUpdate:modelValue":s[4]||(s[4]=r=>x(u)?u.value=r:null),size:"small","total-visible":5,length:d(D)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ie,{isDrawerOpen:d(F),"onUpdate:isDrawerOpen":s[5]||(s[5]=r=>x(F)?F.value=r:null),"permission-left":d(a),"onUpdate:permission-left":s[6]||(s[6]=r=>x(a)?a.value=r:a=r),"permission-right":d(n),"onUpdate:permission-right":s[7]||(s[7]=r=>x(n)?n.value=r:n=r),onObjectData:ce},null,8,["isDrawerOpen","permission-left","permission-right"]),e(Ge,{isDrawerOpen:d(q),"onUpdate:isDrawerOpen":s[8]||(s[8]=r=>x(q)?q.value=r:null),role:d(m),"onUpdate:role":s[9]||(s[9]=r=>x(m)?m.value=r:null),"permission-left":d(w),"onUpdate:permission-left":s[10]||(s[10]=r=>x(w)?w.value=r:w=r),"permission-right":d(j),"onUpdate:permission-right":s[11]||(s[11]=r=>x(j)?j.value=r:j=r),onObjectData:pe},null,8,["isDrawerOpen","role","permission-left","permission-right"]),d(T)?(g(),$(Ke,{key:0,isDialogVisible:d(T),"onUpdate:isDialogVisible":s[12]||(s[12]=r=>x(T)?T.value=r:null),role:d(m),"onUpdate:role":s[13]||(s[13]=r=>x(m)?m.value=r:null),onObjectData:fe},null,8,["isDialogVisible","role"])):J("",!0)])}}};typeof le=="function"&&le(dt);export{dt as default};
