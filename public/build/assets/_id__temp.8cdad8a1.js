import{k as s,bd as fe,$ as B,Z as G,A as ve,o as c,c as w,p as l,w as o,q as n,m as i,b as x,y as L,D as m,E as C,F as Q,a as R,C as Ve,x as U}from"./main.cf9f31a9.js";import{_ as _e}from"./AppDateTimePicker.b70b0339.js";import{_ as ge,a as De}from"./EditEmployeeDrawer.30c53733.js";import{_ as he}from"./ConfirmationDialog.5db50079.js";import{s as z}from"./successMiddleware.8a77ff6b.js";import{e as H}from"./errorsMiddleware.ca71b8e1.js";import{u as be}from"./useAttendanceStore.7e1b3906.js";import{a as we}from"./VOverlay.9d9650d6.js";import{a as J,V as j}from"./VBtn.d73656ae.js";import{a as _,V as q}from"./VRow.a394feb3.js";import{V as F,c as S}from"./VCard.a1247ba2.js";import{V as K}from"./VDivider.01acf602.js";import{V as xe}from"./VAutocomplete.dab6d47c.js";import{V as ye,a as ke}from"./VTabs.0ae1bb3a.js";import{V as Ae,a as Ee}from"./VWindowItem.3f52cdcf.js";import{V as Ce}from"./VTable.60781dfc.js";import{V as Ue}from"./VSwitch.ba1ab839.js";import{V as M}from"./VCheckbox.fa4e0896.js";import{V as qe}from"./VPagination.7fcfaf73.js";import"./VField.6a2ec846.js";import"./index.d1f0132a.js";import"./VInput.d6b4ca43.js";import"./router.1658937d.js";import"./VImg.134af49b.js";import"./position.b360a9d1.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VSpacer.6ec948ae.js";import"./VAvatar.9270a597.js";import"./VForm.f1d9c3ac.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.9102871e.js";/* empty css                   */import"./VCounter.4f92d6c5.js";import"./VNavigationDrawer.2d863e08.js";import"./ssrBoot.e94d367d.js";import"./DialogCloseBtn.1c4165b0.js";import"./VDialog.ac89ffbe.js";import"./scopeId.08611610.js";import"./dialog-transition.b0009893.js";import"./lazy.f959659a.js";import"./VSelect.32c4b2dd.js";import"./VList.a34172e8.js";import"./VMenu.3df9bfa4.js";import"./VCheckboxBtn.b3570faf.js";import"./VSelectionControl.5a5e7888.js";import"./VChip.6c2e2c44.js";import"./filter.73bf6f77.js";import"./VSlideGroup.ee136b32.js";const Se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},$e={class:"pa-6"},Ne={class:"ma-7"},Pe={class:"pt-5"},Te=i("th",{class:"text-left"}," Quit Employee ",-1),Oe={class:"text-left"},Ie=i("th",{class:"text-left"}," Remove Employee ",-1),Be={class:"text-left"},Le=i("tr",null,[i("th",{class:"text-left"}," date "),i("th",{class:"text-left"}," Presence ")],-1),Qe=i("th",{class:"text-left"}," ALL DAYS ",-1),Re={class:"text-left"},ze={class:"text-left"},je={class:"text-left"},Fe={class:"text-sm text-disabled"},zt={__name:"[id]_temp",setup(Me){const y=be(),X=s(""),$=fe(),ee=s(!1),u=s({isActive:!0}),g=s(0);s([]),s(!1),s(),s();const N=s(""),h=s("");s();const W=s(10),p=s(1),b=s(1),te=s(0);let f=s({employees:[],dates:[]});s({});let Y=s({}),v=s({list:[]}),D=s({}),k=s({});const A=()=>{u.value.isActive=!0,y.fetchAttendanceData(Number($.params.id)).then(e=>{f.value.employees=e.data.employees,v.value.list=e.data.restEmployees,f.value.dates=e.data.dates,N.value=e.data.minDate,h.value=e.data.maxDate,console.log(N),u.value.isActive=!1}).catch(e=>{console.error(e),u.value.isActive=!1})};B(A),B(()=>{p.value>b.value&&(p.value=b.value)}),G(X,()=>{A()});const P=s(!1),T=s(!1),E=s(!1);let V=s();B(()=>{p.value>b.value&&(p.value=b.value)});const le=ve(()=>{const e=Y.value.length?(p.value-1)*W.value+1:0,t=Y.value.length+(p.value-1)*W.value;return`Showing ${e} to ${t} of ${te.value} entries`}),ae=()=>{u.value.isActive=!0,y.submitAttendance(f,$.params.id).then(e=>{z(e.data.message),u.value.isActive=!1,router.push("/apps/attendance/preview/"+$.params.id)}).catch(e=>{u.value.isActive=!1})},oe=e=>{u.value.isActive=!0,y.updateAttendance(e).then(t=>{z(t.data.message),u.value.isActive=!1,A()}).catch(t=>{H(t.data.message),u.value.isActive=!1})},se=e=>{u.value.isActive=!0,y.deleteAttendance(e).then(t=>{u.value.isActive=!1,z(t.data.message)}).catch(t=>{H(t.data.message),u.value.isActive=!1}),A()},O=s(!0),I=e=>(e.toString(),""),ne=e=>{console.log(e.allDays);for(let t=0;t<e.workingDays.length;t++)e.workingDays[t].present=!e.allDays;console.log(e)},ie=e=>e.name===void 0?"Select An Employee":e.name+" "+e.surname,re=()=>{var e=ue(v.value.list,D.value);f.value.employees.push({...e}),v.value.list.splice(Z(v.value.list,D),1)},ue=(e,t)=>{for(let d=0;d<e.length;d++)if(e[d].id===t)return e[d]},de=e=>{v.value.list.push({...e}),f.value.employees.splice(Z(f.value.employees,e.id),1)};G(v.value,()=>{console.log(v)});const Z=(e,t)=>{for(let d=0;d<e.length;d++)if(e[d].id===t)return d},ce=e=>{console.log(h._value);for(let t=0;t<e.workingDays.length;t++)e.workingDays[t].date>=e.quitDate?e.workingDays[t].present=!1:e.workingDays[t].present=!0},me=e=>{if(console.log(e.quitEmployee),e.quitEmployee)e.quitDate=h._value,console.log(e.quitDate),console.log(h._value);else for(let t=0;t<e.workingDays.length;t++)e.workingDays[t].present=!0};return(e,t)=>{const d=_e;return c(),w("section",null,[l(q,null,{default:o(()=>[l(we,{"model-value":n(u).isActive,class:"align-center justify-center"},{default:o(()=>[l(J,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l(_,{cols:"9"},{default:o(()=>[l(F,{title:"New Attendance"},{default:o(()=>[l(K),l(S,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[i("div",Se,[i("div",null,[n(ee)?(c(),x(J,{key:0,indeterminate:"",color:"primary"})):L("",!0)])])]),_:1}),i("div",$e,[l(q,null,{default:o(()=>[l(_,{cols:"8"},{default:o(()=>[l(xe,{modelValue:n(D),"onUpdate:modelValue":t[0]||(t[0]=a=>m(D)?D.value=a:D=a),items:n(v).list,label:"Employee","item-value":"id","item-title":ie},null,8,["modelValue","items"])]),_:1}),l(_,{cols:"3"},{default:o(()=>[l(j,{block:"",color:"default",variant:"tonal",onClick:re},{default:o(()=>[C(" Add ")]),_:1})]),_:1})]),_:1})]),i("div",Ne,[l(q,null,{default:o(()=>[l(_,{cols:"5",sm:"4"},{default:o(()=>[l(ye,{modelValue:n(g),"onUpdate:modelValue":t[1]||(t[1]=a=>m(g)?g.value=a:null),direction:"vertical",class:"v-tabs-pill"},{default:o(()=>[(c(!0),w(Q,null,R(n(f).employees,a=>(c(),x(ke,null,{default:o(()=>[l(Ve,{start:"",icon:"tabler-user"}),C(" "+U(a.name)+" "+U(a.surname),1)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1}),l(_,{cols:"7",sm:"8"},{default:o(()=>[l(F,null,{default:o(()=>[l(S,null,{default:o(()=>[l(Ae,{modelValue:n(g),"onUpdate:modelValue":t[3]||(t[3]=a=>m(g)?g.value=a:null)},{default:o(()=>[(c(!0),w(Q,null,R(n(f).employees,a=>(c(),x(Ee,null,{default:o(()=>[l(Ce,null,{default:o(()=>[i("thead",null,[i("tr",Pe,[Te,i("th",Oe,[l(q,null,{default:o(()=>[l(_,{cols:"4"},{default:o(()=>[l(Ue,{modelValue:a.quitEmployee,"onUpdate:modelValue":r=>a.quitEmployee=r,inset:"",onChange:r=>me(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),a.quitEmployee?(c(),x(_,{key:0,cols:"8"},{default:o(()=>[l(d,{modelValue:a.quitDate,"onUpdate:modelValue":r=>a.quitDate=r,label:"End Date",onChange:r=>ce(a),config:{minDate:`${n(N)}`,maxDate:`${n(h)}`}},null,8,["modelValue","onUpdate:modelValue","onChange","config"])]),_:2},1024)):L("",!0)]),_:2},1024)])]),i("tr",null,[Ie,i("th",Be,[l(M,{modelValue:n(k),"onUpdate:modelValue":t[2]||(t[2]=r=>m(k)?k.value=r:k=r),label:I(n(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error",onClick:r=>de(a)},null,8,["modelValue","label","onClick"])])]),Le]),i("tbody",null,[i("tr",null,[Qe,i("th",Re,[l(M,{modelValue:a.allDays,"onUpdate:modelValue":r=>a.allDays=r,label:I(n(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error",onClick:r=>ne(a)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])])]),(c(!0),w(Q,null,R(a.workingDays,r=>(c(),w("tr",null,[i("th",ze,U(r.date),1),i("th",je,[l(M,{modelValue:r.present,"onUpdate:modelValue":pe=>r.present=pe,label:I(n(O)),"true-icon":"tabler-check","false-icon":"tabler-circle-x",color:"error"},null,8,["modelValue","onUpdate:modelValue","label"])])]))),256))])]),_:2},1024)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(K),l(S,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[i("span",Fe,U(n(le)),1),l(qe,{modelValue:n(p),"onUpdate:modelValue":t[4]||(t[4]=a=>m(p)?p.value=a:null),size:"small","total-visible":5,length:n(b)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:o(()=>[l(F,{class:"mb-8"},{default:o(()=>[l(S,null,{default:o(()=>[l(j,{block:"","prepend-icon":"tabler-send",class:"mb-2"},{default:o(()=>[C(" Send Invoice ")]),_:1}),l(j,{block:"",color:"default",variant:"tonal",onClick:ae},{default:o(()=>[C(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ge,{isDrawerOpen:n(P),"onUpdate:isDrawerOpen":t[5]||(t[5]=a=>m(P)?P.value=a:null),onEmployeeData:e.addNewEmployee},null,8,["isDrawerOpen","onEmployeeData"]),l(De,{isDrawerOpen:n(T),"onUpdate:isDrawerOpen":t[6]||(t[6]=a=>m(T)?T.value=a:null),employee:n(V),"onUpdate:employee":t[7]||(t[7]=a=>m(V)?V.value=a:V=a),onEmployeeData:oe},null,8,["isDrawerOpen","employee"]),n(E)?(c(),x(he,{key:0,isDialogVisible:n(E),"onUpdate:isDialogVisible":t[8]||(t[8]=a=>m(E)?E.value=a:null),employee:n(V),"onUpdate:employee":t[9]||(t[9]=a=>m(V)?V.value=a:V=a),onEmployeeData:se},null,8,["isDialogVisible","employee"])):L("",!0)])}}};export{zt as default};
