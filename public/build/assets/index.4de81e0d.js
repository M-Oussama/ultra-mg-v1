import{bc as ue,a1 as O,k as _,o as D,b as I,w as o,m as r,p as e,C as P,q as a,P as Z,D as U,be as K,E as C,ay as q,Z as W,$ as Q,A as de,r as me,c as $,x,y as h,F as pe,a as fe,H as ce,I as Ve,bf as H}from"./main.81882816.js";import"./jspdf.es.min.2a32f844.js";import"./jspdf.plugin.autotable.9ed6ec7b.js";import{r as R,e as X}from"./validators.330a354f.js";import{V as J}from"./VSpacer.08392e38.js";import{V as g,a as ve}from"./VBtn.e04ef908.js";import{V as M,c as T}from"./VCard.138d8eaf.js";import{V as Y}from"./VForm.5347714b.js";import{V as ee,a as p}from"./VRow.b2b0e78f.js";import{V}from"./VTextField.6a8607d5.js";import{V as le}from"./VAutocomplete.38a54571.js";import{V as ae}from"./VNavigationDrawer.b5f4e693.js";import{_ as _e}from"./DialogCloseBtn.2eda3c42.js";import{V as be}from"./VDialog.651b93eb.js";import{e as L}from"./errorsMiddleware.de9f333f.js";import{s as j}from"./successMiddleware.3313c5ca.js";import{P as E}from"./permissions.bafe5f34.js";import{a as Ne}from"./VOverlay.ad02dd02.js";import{V as ye}from"./VSelect.613af58b.js";import{V as ge}from"./VTable.5fcc397b.js";import{V as Se}from"./VAvatar.637f2477.js";import{V as De}from"./VImg.7b286adf.js";import{V as Ue}from"./VDivider.85a3d826.js";import{V as we}from"./VPagination.3a3176e2.js";import"./index.b522f886.js";import"./router.8e94bdfa.js";import"./position.10bb3fae.js";import"./VInput.b9d918a3.js";import"./index.f8b100c7.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.5450c9bb.js";import"./easing.36b781ab.js";import"./VCounter.9c267138.js";import"./filter.9b77dbc8.js";import"./VList.79b77ee1.js";import"./VMenu.ef75d0b8.js";import"./scopeId.3d2bbd1b.js";import"./dialog-transition.40a0bedf.js";import"./VCheckboxBtn.cd78058c.js";import"./VSelectionControl.b76e699b.js";import"./VChip.e59b8b10.js";import"./ssrBoot.4a48a228.js";import"./lazy.0d5428c0.js";const Ce="http://127.0.0.1:8000",F=Ce+"/api",z={GET_SUPPLIERS:`${F}/suppliers/list`,CREATE_SUPPLIER:`${F}/suppliers/create`,UPDATE_SUPPLIER:`${F}/suppliers/update`,DELETE_SUPPLIER:`${F}/suppliers/delete`};function B(v){const c={};for(const b in v)v.hasOwnProperty(b)&&(c[b]=v[b]);return c}const xe=ue("useSupplierController",{actions:{getSuppliers(v){return O.post(z.GET_SUPPLIERS,B(v))},createSupplier(v){return O.post(z.CREATE_SUPPLIER,B(v))},updateSupplier(v){return O.post(z.UPDATE_SUPPLIER,B(v))},deleteSupplier(v){return O.post(z.DELETE_SUPPLIER,B(v))}}}),Ie={class:"d-flex align-center pa-6 pb-1"},Pe=r("h6",{class:"text-h6"}," Add New ",-1),Ee={__name:"AddNewDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},cities:{type:Array,required:!0}},emits:["update:isDrawerOpen","createData"],setup(v,{emit:c}){const b=v,N=_(!1),d=_(),l=_({name:"",surname:"",email:"",address:"",phone:"",NRC:"",NIF:"",NART:"",NIS:"",city_id:""}),f=()=>{c("update:isDrawerOpen",!1),q(()=>{var u,t;(u=d.value)==null||u.reset(),(t=d.value)==null||t.resetValidation()})},y=()=>{var u;(u=d.value)==null||u.validate().then(({valid:t})=>{t&&(c("createData",{name:l.value.name,surname:l.value.surname,email:l.value.email,address:l.value.address,phone:l.value.phone,NRC:l.value.NRC,NIS:l.value.NIS,NIF:l.value.NIF,NART:l.value.NART,city_id:l.value.city_id}),c("update:isDrawerOpen",!1),q(()=>{var s,S;(s=d.value)==null||s.reset(),(S=d.value)==null||S.resetValidation()}))})},w=u=>{c("update:isDrawerOpen",u)};return(u,t)=>(D(),I(ae,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":b.isDrawerOpen,"onUpdate:modelValue":w},{default:o(()=>[r("div",Ie,[Pe,e(J),e(g,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:f},{default:o(()=>[e(P,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(Z),{options:{wheelPropagation:!1}},{default:o(()=>[e(M,{flat:""},{default:o(()=>[e(T,null,{default:o(()=>[e(Y,{ref_key:"refForm",ref:d,modelValue:a(N),"onUpdate:modelValue":t[10]||(t[10]=s=>U(N)?N.value=s:null),onSubmit:K(y,["prevent"])},{default:o(()=>[e(ee,null,{default:o(()=>[e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).name,"onUpdate:modelValue":t[0]||(t[0]=s=>a(l).name=s),rules:[a(R)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).surname,"onUpdate:modelValue":t[1]||(t[1]=s=>a(l).surname=s),label:"Surname"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).email,"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).email=s),rules:[a(X)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(le,{clearable:"",modelValue:a(l).city_id,"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).city_id=s),items:b.cities,"item-value":"id","item-title":"name",label:"City",rules:[a(R)]},null,8,["modelValue","items","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).address,"onUpdate:modelValue":t[4]||(t[4]=s=>a(l).address=s),rules:[a(R)],label:"Address"},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).phone,"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).phone=s),label:"Phone"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NRC,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).NRC=s),label:"Num\xE9ro de registre"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NIF,"onUpdate:modelValue":t[7]||(t[7]=s=>a(l).NIF=s),label:"Num\xE9ro de NIF"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NIS,"onUpdate:modelValue":t[8]||(t[8]=s=>a(l).NIS=s),label:"Num\xE9ro de NIS"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NART,"onUpdate:modelValue":t[9]||(t[9]=s=>a(l).NART=s),label:"Num\xE9ro de ARTICLE"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(g,{type:"submit",class:"me-3"},{default:o(()=>[C(" Submit ")]),_:1}),e(g,{type:"reset",variant:"tonal",color:"secondary",onClick:f},{default:o(()=>[C(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Re={class:"d-flex align-center pa-6 pb-1"},Te=r("h6",{class:"text-h6"}," Add New ",-1),Ae={__name:"EditDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},cities:{type:Array,required:!0},data:{type:Object,required:!0}},emits:["update:isDrawerOpen","updateData"],setup(v,{emit:c}){const b=v;W(()=>b.data,u=>{u&&(l={...u},console.log(l))});const N=_(!1),d=_();let l=_({id:"",name:"",surname:"",email:"",address:"",phone:"",NRC:"",NIF:"",NART:"",NIS:"",city_id:""});const f=()=>{c("update:isDrawerOpen",!1),q(()=>{var u,t;(u=d.value)==null||u.reset(),(t=d.value)==null||t.resetValidation()})},y=()=>{var u;(u=d.value)==null||u.validate().then(({valid:t})=>{t&&(c("updateData",{id:l.id,name:l.name,surname:l.surname,email:l.email,address:l.address,phone:l.phone,NRC:l.NRC,NIS:l.NIS,NIF:l.NIF,NART:l.NART,city_id:l.city_id}),c("update:isDrawerOpen",!1),q(()=>{var s,S;(s=d.value)==null||s.reset(),(S=d.value)==null||S.resetValidation()}))})},w=u=>{c("update:isDrawerOpen",u)};return(u,t)=>(D(),I(ae,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":b.isDrawerOpen,"onUpdate:modelValue":w},{default:o(()=>[r("div",Re,[Te,e(J),e(g,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:f},{default:o(()=>[e(P,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(Z),{options:{wheelPropagation:!1}},{default:o(()=>[e(M,{flat:""},{default:o(()=>[e(T,null,{default:o(()=>[e(Y,{ref_key:"refForm",ref:d,modelValue:a(N),"onUpdate:modelValue":t[10]||(t[10]=s=>U(N)?N.value=s:null),onSubmit:K(y,["prevent"])},{default:o(()=>[e(ee,null,{default:o(()=>[e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).name,"onUpdate:modelValue":t[0]||(t[0]=s=>a(l).name=s),rules:[a(R)],label:"Name"},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).surname,"onUpdate:modelValue":t[1]||(t[1]=s=>a(l).surname=s),label:"Surname"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).email,"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).email=s),rules:[a(X)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(le,{clearable:"",modelValue:a(l).city_id,"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).city_id=s),items:b.cities,"item-value":"id","item-title":"name",label:"City",rules:[a(R)]},null,8,["modelValue","items","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).address,"onUpdate:modelValue":t[4]||(t[4]=s=>a(l).address=s),rules:[a(R)],label:"Address"},null,8,["modelValue","rules"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).phone,"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).phone=s),label:"Phone"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NRC,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).NRC=s),label:"Num\xE9ro de registre"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NIF,"onUpdate:modelValue":t[7]||(t[7]=s=>a(l).NIF=s),label:"Num\xE9ro de NIF"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NIS,"onUpdate:modelValue":t[8]||(t[8]=s=>a(l).NIS=s),label:"Num\xE9ro de NIS"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(V,{modelValue:a(l).NART,"onUpdate:modelValue":t[9]||(t[9]=s=>a(l).NART=s),label:"Num\xE9ro de ARTICLE"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(g,{type:"submit",class:"me-3"},{default:o(()=>[C(" Submit ")]),_:1}),e(g,{type:"reset",variant:"tonal",color:"secondary",onClick:f},{default:o(()=>[C(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ke={__name:"ConfirmationDialog",props:{isDialogVisible:{type:Boolean,required:!0},object:{type:Object,required:!0}},emits:["update:isDialogVisible","objectData"],setup(v,{emit:c}){const b=v,N=_(),d=()=>{c("update:isDialogVisible",!1)};W(()=>b.object,f=>{f&&(N.value=f.id||0)});const l=()=>{c("update:isDialogVisible",!1),c("objectData",{id:b.object.id})};return(f,y)=>{const w=_e;return D(),I(be,{modelValue:b.isDialogVisible,"onUpdate:modelValue":y[2]||(y[2]=u=>b.isDialogVisible=u),persistent:"",class:"v-dialog-sm"},{default:o(()=>[e(w,{onClick:y[0]||(y[0]=u=>d())}),e(M,{title:"Confirmation"},{default:o(()=>[e(T,null,{default:o(()=>[C(" Are you sure you want to delete this record ? ")]),_:1}),e(T,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[e(g,{color:"secondary",variant:"tonal",onClick:y[1]||(y[1]=u=>c("update:isDialogVisible",!1))},{default:o(()=>[C(" Disagree ")]),_:1}),e(g,{onClick:l},{default:o(()=>[C(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};const Oe={class:"me-3",style:{width:"80px"}},$e={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},he={style:{width:"9rem"}},Le={style:{width:"100%"}},Fe=r("thead",null,[r("tr",null,[r("th",{scope:"col"}," ID "),r("th",{scope:"col"}," Client "),r("th",{scope:"col"}," City "),r("th",{scope:"col"}," Phone "),r("th",{scope:"col"}," ACTIONS ")])],-1),ze={class:"d-flex align-center"},Be={key:1},qe={class:"d-flex flex-column"},Me={class:"text-base"},je={class:"text-sm text-disabled"},Je={class:"text-capitalize text-base font-weight-semibold"},Ge={class:"text-capitalize text-base font-weight-semibold"},Qe={class:"text-center",style:{width:"5rem"}},He=r("tr",null,[r("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Ze=[He],Ke={class:"text-sm mt-5 text-disabled"},We={__name:"index",setup(v){const c="Suppliers",b="Supplier",N=_([]),d=_(),l=_([]),f=_(!1),y=xe(),w=_(!1),u=_(!1),t=_(!1),s=_(10),S=_(1),A=_(1),G=_(0),k=()=>{f.value=!0,y.getSuppliers({perPage:s.value,currentPage:S.value}).then(m=>{N.value=m.data.suppliers.data,l.value=m.data.cities,A.value=m.data.totalPage,G.value=m.data.total,f.value=!1}).catch(m=>{f.value=!1,L(m.code,m.response.statusText)})};Q(k);const te=m=>{f.value=!0,y.createSupplier(m).then(i=>{k(),j(i.data.message)}).catch(i=>{f.value=!1,L(i.code,i.response.statusText)})},oe=m=>{f.value=!0,y.updateSupplier(m).then(i=>{k(),j(i.data.message)}).catch(i=>{f.value=!1,L(i.code,i.response.statusText)})},se=m=>{console.log(m),f.value=!0,y.deleteSupplier(m).then(i=>{k(),j(i.data.message)}).catch(i=>{f.value=!1,L(i.code,i.response.statusText)})};Q(()=>{S.value>A.value&&(S.value=A.value)});const ie=de(()=>{const m=N.value.length?(S.value-1)*s.value+1:0,i=N.value.length+(S.value-1)*s.value;return`Showing ${m} to ${i} of ${G.value} entries`});return(m,i)=>{const ne=me("RouterLink");return D(),$("section",null,[e(Ne,{"model-value":a(f),class:"align-center justify-center"},{default:o(()=>[e(ve,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(M,{title:c},{default:o(()=>[e(T,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[r("div",Oe,[e(ye,{modelValue:a(s),"onUpdate:modelValue":i[0]||(i[0]=n=>U(s)?s.value=n:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(J),r("div",$e,[r("div",he,[e(V,{onInput:i[1]||(i[1]=n=>m.isTyping=!0),ref:"searchField",modelValue:m.searchQuery,"onUpdate:modelValue":i[2]||(i[2]=n=>m.searchQuery=n),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e(g,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:m.exportList},{default:o(()=>[C(" Export ")]),_:1},8,["onClick"]),m.$can(a(E).SUPPLIER.ADD,a(E).SUPPLIER.SUBJECT)?(D(),I(g,{key:0,"prepend-icon":"tabler-plus",onClick:i[3]||(i[3]=n=>w.value=!0)},{default:o(()=>[C(" New "+x(b))]),_:1})):h("",!0)]),r("div",Le,[e(ge,{class:"text-no-wrap"},{default:o(()=>[Fe,r("tbody",null,[(D(!0),$(pe,null,fe(a(N),n=>(D(),$("tr",{key:n.id,style:{height:"3.75rem"}},[r("td",null,x(n.id),1),r("td",null,[r("div",ze,[e(Se,{variant:"tonal",class:"me-3",size:"38"},{default:o(()=>[n.avatar?(D(),I(De,{key:0,src:n.avatar},null,8,["src"])):(D(),$("span",Be,x(n.name.toUpperCase().charAt(0)),1))]),_:2},1024),r("div",qe,[r("h6",Me,[e(ne,{to:{name:"apps-user-view-id",params:{id:n.id}},class:"font-weight-medium user-list-name"},{default:o(()=>[C(x(n.name),1)]),_:2},1032,["to"])]),r("span",je,"@"+x(n.email),1)])])]),r("td",null,[r("span",Je,x(n.city.name),1)]),r("td",null,[r("span",Ge,x(n.phone),1)]),r("td",Qe,[e(g,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-client-log-id",params:{id:n.id}}},{default:o(()=>[e(P,{size:"22",icon:"tabler-currency-dollar"})]),_:2},1032,["to"]),e(g,{icon:"",size:"x-small",color:"default",variant:"text"},{default:o(()=>[e(P,{size:"22",icon:"tabler-shopping-cart"})]),_:1}),m.$can(a(E).SUPPLIER.EDIT,a(E).SUPPLIER.SUBJECT)?(D(),I(g,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:re=>{d.value={...n},u.value=!0}},{default:o(()=>[e(P,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):h("",!0),m.$can(a(E).SUPPLIER.DELETE,a(E).SUPPLIER.SUBJECT)?(D(),I(g,{key:1,icon:"",size:"x-small",color:"default",variant:"text",onClick:re=>{d.value={...n},t.value=!0}},{default:o(()=>[e(P,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):h("",!0),e(g,{icon:"",size:"x-small",color:"default",variant:"text"},{default:o(()=>[e(P,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]))),128))]),ce(r("tfoot",null,Ze,512),[[Ve,!a(N).length]])]),_:1})]),e(Ue),r("div",null,[r("span",Ke,x(a(ie)),1),e(we,{modelValue:a(S),"onUpdate:modelValue":i[4]||(i[4]=n=>U(S)?S.value=n:null),size:"small","total-visible":5,length:a(A)},null,8,["modelValue","length"])])]),_:1})]),_:1}),e(Ee,{isDrawerOpen:a(w),"onUpdate:isDrawerOpen":i[5]||(i[5]=n=>U(w)?w.value=n:null),cities:a(l),"onUpdate:cities":i[6]||(i[6]=n=>U(l)?l.value=n:null),onCreateData:te},null,8,["isDrawerOpen","cities"]),e(Ae,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":i[7]||(i[7]=n=>U(u)?u.value=n:null),cities:a(l),"onUpdate:cities":i[8]||(i[8]=n=>U(l)?l.value=n:null),data:a(d),"onUpdate:data":i[9]||(i[9]=n=>U(d)?d.value=n:null),onUpdateData:oe},null,8,["isDrawerOpen","cities","data"]),a(t)?(D(),I(ke,{key:0,isDialogVisible:a(t),"onUpdate:isDialogVisible":i[10]||(i[10]=n=>U(t)?t.value=n:null),object:a(d),"onUpdate:object":i[11]||(i[11]=n=>U(d)?d.value=n:null),onObjectData:se},null,8,["isDialogVisible","object"])):h("",!0)])}}};typeof H=="function"&&H(We);export{We as default};
