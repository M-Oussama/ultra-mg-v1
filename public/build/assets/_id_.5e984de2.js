import{k as r,Z as J,bd as K,r as ie,o as C,b as I,w as l,m as s,p as e,C as A,q as i,P as de,D as g,be as ue,E as y,ay as ce,$ as B,A as pe,c as R,F as me,a as fe,x as O,y as ve,H as _e,I as Ve}from"./main.2c4303d0.js";import{_ as ge}from"./DialogCloseBtn.0b4e7386.js";import{s as X}from"./successMiddleware.51012923.js";import{e as M}from"./errorsMiddleware.80a04738.js";import{u as j}from"./useVacationStore.abb782b7.js";import{V as ee}from"./VSpacer.60a3d2b9.js";import{V as v,a as Q}from"./VBtn.df68b498.js";import{V as q,c as U}from"./VCard.e288f4fe.js";import{V as ye}from"./VForm.6d323ceb.js";import{V as te,a as z}from"./VRow.6364c436.js";import{V as G}from"./VInput.ad1ab67c.js";import{V as ae}from"./VTextField.f25191b8.js";import{V as De}from"./VNavigationDrawer.1c8aa7fa.js";import{_ as we}from"./AddNewVacation.b024e782.js";import{a as xe}from"./VOverlay.34847f66.js";import{V as L}from"./VDivider.ed65e8b8.js";import{V as he}from"./VSelect.cc9bae98.js";import{V as Ce}from"./VTable.2b2ab8eb.js";import{V as be}from"./VMenu.4f4f7b46.js";import{V as ke}from"./VList.a40c8ca6.js";import{V as $e}from"./VPagination.6bd87f26.js";import{V as Ae}from"./VDialog.d797a76b.js";import"./VAvatar.02a84ac4.js";import"./router.bde67682.js";import"./VImg.c4d008e7.js";import"./position.ef7f4972.js";import"./forwardRefs.c003b6b8.js";import"./index.c40dd661.js";/* empty css                   */import"./VField.f22585ee.js";import"./easing.36b781ab.js";import"./VCounter.6f3fca7e.js";import"./ssrBoot.9a55596c.js";import"./lazy.b22ea8e1.js";import"./dialog-transition.9f6a7431.js";import"./VCheckboxBtn.56fc1aec.js";import"./VSelectionControl.b778673c.js";import"./VChip.72f7cdaa.js";import"./scopeId.8139f85a.js";const Se={class:"d-flex align-center pa-6 pb-1"},Oe=s("h6",{class:"text-h6"}," Add New Record ",-1),Ue={__name:"EditVacation",props:{isDrawerOpen:{type:null,required:!0},loading:{type:null,required:!0},vacation:{type:Object,required:!0}},setup(Y){const _=Y,b=j(),a=r({start_date:"",end_date:"",end_date_restrict:new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+(new Date().getDate()+1),count:0});J(()=>_.vacation,o=>{o&&(a.value={...o})}),K();const k=r(!1),c=r();r(),r({id:-1});const E=()=>{_.isDrawerOpen.open=!1,ce(()=>{var o,u;(o=c.value)==null||o.reset(),(u=c.value)==null||u.resetValidation()})},N=()=>{a.value.start_date===""||a.value.start_date===null||a.value.end_date===""||a.value.end_date===null||a.value.count<=0?((a.value.start_date===""||a.value.start_date===null)&&M("Warning","start date must be selected"),a.value.count<=0&&M("Warning","count days starts from 1 ")):(_.loading.isActive=!0,b.updateVacation(D(a.value.start_date),D(a.value.end_date),a.value.id,a.value.count).then(o=>{_.isDrawerOpen.open=!1,_.loading.isActive=!1,X(o.data.msg),location.reload()}).catch(o=>{_.loading.isActive=!1,M("Error Occured",o.response.data.message)}))},h=o=>{_.isDrawerOpen.value.open=o};function m(o){return parseInt(o)<10?"0"+o:o}const V=o=>{const u=o.getDate(),p=o.getMonth()+1;return`${o.getFullYear()}-${m(p)}-${m(u)}`},P=()=>{a.value.start_date===null&&(a.value.end_date=null),(a.value.start_date===""||a.value.start_date>=a.value.end_date&&a.value.end_date!=="")&&(a.value.end_date=""),x(),a.value.end_date_restrict=new Date(new Date(a.value.start_date).getTime()+24*60*60*2e3).toISOString().split("T")[0]},D=o=>{if(o!=null&&o!==""){console.log(o);let u=new Date(o),p=u.getFullYear(),f=String(u.getMonth()+1).padStart(2,"0"),F=String(u.getDate()).padStart(2,"0");return`${p}-${f}-${F}`}return o},w=()=>{x()},x=()=>{if(a.value.start_date){let o=new Date(a.value.start_date);a.value.end_date=new Date(o.getTime()+a.value.count*24*60*60*1e3)}console.log(a.value.end_date)};return(o,u)=>{const p=ie("VueDatePicker");return C(),I(De,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":_.isDrawerOpen.open,"onUpdate:modelValue":h},{default:l(()=>[s("div",Se,[Oe,e(ee),e(v,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:E},{default:l(()=>[e(A,{size:"18",icon:"tabler-x"})]),_:1})]),e(i(de),{options:{wheelPropagation:!1}},{default:l(()=>[e(q,{flat:""},{default:l(()=>[e(U,null,{default:l(()=>[e(ye,{ref_key:"refForm",ref:c,modelValue:i(k),"onUpdate:modelValue":u[3]||(u[3]=f=>g(k)?k.value=f:null),onSubmit:ue(N,["prevent"])},{default:l(()=>[e(te,null,{default:l(()=>[e(z,{cols:"12"},{default:l(()=>[e(G,null,{default:l(()=>[y(" Vacation Start Date ")]),_:1}),e(p,{modelValue:i(a).start_date,"onUpdate:modelValue":[u[0]||(u[0]=f=>i(a).start_date=f),P],"auto-apply":"",format:V},null,8,["modelValue"])]),_:1}),e(z,{cols:"12"},{default:l(()=>[e(ae,{modelValue:i(a).count,"onUpdate:modelValue":[u[1]||(u[1]=f=>i(a).count=f),w],type:"number",label:"Vacation Days"},null,8,["modelValue"])]),_:1}),e(z,{cols:"12"},{default:l(()=>[e(G,null,{default:l(()=>[y(" Vacation End Date ")]),_:1}),e(p,{modelValue:i(a).end_date,"onUpdate:modelValue":u[2]||(u[2]=f=>i(a).end_date=f),"auto-apply":"",disabled:"true",format:V,"min-date":i(a).end_date_restrict},null,8,["modelValue","min-date"])]),_:1}),e(z,{cols:"12"},{default:l(()=>[e(v,{type:"submit",class:"me-3"},{default:l(()=>[y(" Submit ")]),_:1}),e(v,{type:"reset",variant:"tonal",color:"secondary",onClick:E},{default:l(()=>[y(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const ze={class:"me-3",style:{width:"80px"}},Ee={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Pe={style:{width:"9rem"}},Ie=s("thead",null,[s("tr",null,[s("th",{scope:"col"}," ID "),s("th",{scope:"col"}," Start Date "),s("th",{scope:"col"}," End Date "),s("th",{scope:"col"}," Period "),s("th",{scope:"col"}," ACTIONS ")])],-1),Me={class:"d-flex align-center"},Ne={class:"d-flex flex-column"},Fe={class:"text-base"},Te={class:"d-flex align-center"},Be={class:"d-flex flex-column"},Re={class:"text-base"},Le={class:"d-flex align-center"},qe={class:"d-flex flex-column"},Ye={class:"text-base"},We={class:"text-center",style:{width:"5rem"}},Ze=s("tr",null,[s("td",{colspan:"7",class:"text-center"}," No data available ")],-1),He=[Ze],Qe={class:"text-sm text-disabled"},Pt={__name:"[id]",setup(Y){const _=j(),b=r(""),a=r("Employees"),k=r(!1),c=r({isActive:!0}),E=K(),N=r(!0);r(),r("mahgounoussama23@gmail.com"),r(),r();const h=r(10),m=r(1),V=r(1),P=r(0);let D=r([]),w=r({open:!1}),x=r({open:!1}),o=r({open:!1});r(!1),r(!0);const u=()=>{c.value.isActive=!0,_.fetchListRecord(Number(E.params.id)).then(d=>{D.value=d.data.list.data,V.value=d.data.totalPage,P.value=d.data.totalVacation,k.value=!1,c.value.isActive=!1,console.log(d)}).catch(d=>{console.log(d),c.value.isActive=!1})};B(u),B(()=>{m.value>V.value&&(m.value=V.value)}),J(b,()=>{u()}),r(!1);let p=r(null);B(()=>{m.value>V.value&&(m.value=V.value)});const f=pe(()=>{const d=D.value.length?(m.value-1)*h.value+1:0,n=D.value.length+(m.value-1)*h.value;return`Showing ${d} to ${n} of ${P.value} entries`}),F=d=>{p.value=d,w.value.open=!0},le=d=>{p.value=d,x.value.open=!0},oe=()=>{o.value.open=!0},ne=d=>{p.value=d,w.value.open=!0},se=()=>{c.value.isActive=!0,x.value.open=!1,_.deleteVacation(p.value.id).then(d=>{c.value.isActive=!1,console.log(d),X(d.data.message),u()}).catch(d=>{M(d.data.message),c.value.isActive=!1})},W=()=>{x.value.open=!1},re=d=>{let n=new Date(d.end_date);d.end_date||(n=new Date);const T=n-new Date(d.start_date),t=Math.floor(T/(1e3*60*60*24)),S=Math.floor(t/365),Z=Math.floor(t%365/30),H=t%30;let $="";return S>0&&($+=("0"+S).slice(-2)+" years, "),Z>0&&($+=("0"+Z).slice(-2)+" months, "),H>0&&($+=("0"+H).slice(-2)+" days"),$=$.replace(/,\s*$/,""),$};return(d,n)=>{const T=ge;return C(),R("section",null,[e(te,null,{default:l(()=>[e(xe,{"model-value":i(c).isActive,class:"align-center justify-center"},{default:l(()=>[e(Q,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),e(z,{cols:"12"},{default:l(()=>[e(q,{title:i(a)},{default:l(()=>[e(L),e(U,{class:"d-flex flex-wrap py-4 gap-4"},{default:l(()=>[s("div",ze,[e(he,{modelValue:i(h),"onUpdate:modelValue":n[0]||(n[0]=t=>g(h)?h.value=t:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(ee),s("div",Ee,[s("div",Pe,[i(k)?(C(),I(Q,{key:0,indeterminate:"",color:"primary"})):(C(),I(ae,{key:1,onInput:n[1]||(n[1]=t=>N.value=!0),ref:"searchField",modelValue:i(b),"onUpdate:modelValue":n[2]||(n[2]=t=>g(b)?b.value=t:null),placeholder:"Search",density:"compact"},null,8,["modelValue"]))]),e(v,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:l(()=>[y(" Export ")]),_:1}),e(v,{color:"primary","prepend-icon":"tabler-plus",onClick:n[3]||(n[3]=t=>oe())},{default:l(()=>[y(" New Vacation ")]),_:1})])]),_:1}),e(L),e(Ce,{class:"text-no-wrap"},{default:l(()=>[Ie,s("tbody",null,[(C(!0),R(me,null,fe(i(D),t=>(C(),R("tr",{key:t.id,style:{height:"3.75rem"}},[s("td",null,O(t.id),1),s("td",null,[s("div",Me,[s("div",Ne,[s("h6",Fe,O(t.start_date),1)])])]),s("td",null,[s("div",Te,[s("div",Be,[s("h6",Re,O(t.end_date),1)])])]),s("td",null,[s("div",Le,[s("div",qe,[s("h6",Ye,O(re(t)),1)])])]),s("td",We,[e(v,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"apps-employee-vacation-preview-id",params:{id:t.id}}},{default:l(()=>[e(A,{size:"22",icon:"tabler-screen-share"})]),_:2},1032,["to"]),t.last?(C(),I(v,{key:0,icon:"",size:"x-small",color:"default",variant:"text",onClick:S=>F(t)},{default:l(()=>[e(A,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"])):ve("",!0),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:S=>ne(t)},{default:l(()=>[e(A,{size:"22",icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[e(A,{size:"22",icon:"tabler-trash",onClick:S=>le(t)},null,8,["onClick"])]),_:2},1024),e(v,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(A,{size:22,icon:"tabler-dots-vertical"}),e(be,{activator:"parent"},{default:l(()=>[e(ke,{density:"compact"})]),_:1})]),_:1})])]))),128))]),_e(s("tfoot",null,He,512),[[Ve,!i(D).length]])]),_:1}),e(L),e(U,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:l(()=>[s("span",Qe,O(i(f)),1),e($e,{modelValue:i(m),"onUpdate:modelValue":n[4]||(n[4]=t=>g(m)?m.value=t:null),size:"small","total-visible":5,length:i(V)},null,8,["modelValue","length"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),e(Ue,{isDrawerOpen:i(w),"onUpdate:isDrawerOpen":n[5]||(n[5]=t=>g(w)?w.value=t:w=t),vacation:i(p),"onUpdate:vacation":n[6]||(n[6]=t=>g(p)?p.value=t:p=t),loading:i(c),"onUpdate:loading":n[7]||(n[7]=t=>g(c)?c.value=t:null)},null,8,["isDrawerOpen","vacation","loading"]),e(we,{isDrawerOpen:i(o),"onUpdate:isDrawerOpen":n[8]||(n[8]=t=>g(o)?o.value=t:o=t),loading:i(c),"onUpdate:loading":n[9]||(n[9]=t=>g(c)?c.value=t:null)},null,8,["isDrawerOpen","loading"]),e(Ae,{modelValue:i(x).open,"onUpdate:modelValue":n[12]||(n[12]=t=>i(x).open=t),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(T,{onClick:n[10]||(n[10]=t=>W())}),e(q,{title:"Confirmation"},{default:l(()=>[e(U,null,{default:l(()=>[y(" Are you sure you want to delete this record ? ")]),_:1}),e(U,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(v,{color:"secondary",variant:"tonal",onClick:n[11]||(n[11]=t=>W())},{default:l(()=>[y(" Disagree ")]),_:1}),e(v,{onClick:se},{default:l(()=>[y(" Agree ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Pt as default};
