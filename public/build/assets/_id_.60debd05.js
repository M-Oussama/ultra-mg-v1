import{k as e,bd as Q,$ as D,Z as W,A as Z,o as c,c as d,p as l,w as o,q as r,m as s,x as m,b as N,y as O,F as x,a as V,E as C,D as f}from"./main.e3e9927b.js";import{_ as G,a as H}from"./EditEmployeeDrawer.4dc314cd.js";import{_ as K}from"./ConfirmationDialog.be79351f.js";import{s as P,e as S}from"./errorsMiddleware.970a9b98.js";import{u as X}from"./useAttendanceStore.1790e1d9.js";import{a as Y}from"./VOverlay.69973680.js";import{a as I,V as U}from"./VBtn.eec2e34a.js";import{a as $,V as ee}from"./VRow.fa44e1fc.js";import{V as R,c as T}from"./VCard.2d51fc32.js";import{V as te}from"./VTable.547f6da8.js";import"./AppDateTimePicker.5db138c1.js";import"./VField.1a330e06.js";import"./index.73872f79.js";import"./VInput.4e88dd00.js";import"./router.f7f5a52c.js";import"./VImg.5147d623.js";import"./position.e1779594.js";import"./easing.36b781ab.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VSpacer.7ad3e650.js";import"./VAvatar.3716d284.js";import"./VForm.eb6e8a91.js";import"./forwardRefs.c003b6b8.js";import"./VTextField.b40b8fac.js";/* empty css                   */import"./VCounter.01cc504b.js";import"./VNavigationDrawer.8d53faf0.js";import"./ssrBoot.246faa36.js";import"./DialogCloseBtn.76a96468.js";import"./VDialog.cdcf31e7.js";import"./scopeId.d9d96941.js";import"./dialog-transition.4db747b4.js";import"./lazy.1d27421d.js";const ae={class:"align-center flex-wrap gap-4"},se=s("thead",null,[s("tr",null,[s("th",{class:"text-center"}," Employee "),s("th",{class:"text-center"}," Start Date "),s("th",{class:"text-center"}," Days "),s("th",{class:"text-center"}," Number Of Present Days "),s("th",{class:"text-center"}," End Date ")])],-1),le={class:"text-center"},ne={class:"text-center"},oe={class:"ma-0"},re=s("th",{class:"text-center"}," Jours(J) ",-1),ie={class:"text-center"},ce={class:"text-center"},ue={class:"ma-0"},We={__name:"[id]",setup(de){const y=X(),j=e(""),F=Q(),J=e(!1),i=e({isActive:!0});e(0),e([]),e(!0),e(),e(),e();const b=e(10),p=e(1),v=e(1),M=e(0);e();let h=e({month:"",year:""}),E=e([]),k=e({});D(()=>{i.value.isActive=!0,y.getAttendanceByID(Number(F.params.id)).then(n=>{E.value=n.data.employeeAttendance,h.value=n.data.attendance,console.log(n),i.value.isActive=!1}).catch(n=>{console.error(n),i.value.isActive=!1})}),D(()=>{p.value>v.value&&(p.value=v.value)}),W(j,()=>{fetchAttendances()});const g=e(!1),w=e(!1),_=e(!1);let u=e();D(()=>{p.value>v.value&&(p.value=v.value)}),Z(()=>{const n=k.value.length?(p.value-1)*b.value+1:0,t=k.value.length+(p.value-1)*b.value;return`Showing ${n} to ${t} of ${M.value} entries`});const q=n=>{i.value.isActive=!0,y.updateAttendance(n).then(t=>{P(t.data.message),i.value.isActive=!1,fetchAttendances()}).catch(t=>{S(t.data.message),i.value.isActive=!1})},z=n=>{i.value.isActive=!0,y.deleteAttendance(n).then(t=>{i.value.isActive=!1,P(t.data.message)}).catch(t=>{S(t.data.message),i.value.isActive=!1}),fetchAttendances()};e(!0);const L=()=>{window.print()};return(n,t)=>(c(),d("section",null,[l(ee,null,{default:o(()=>[l(Y,{"model-value":r(i).isActive,class:"align-center justify-center"},{default:o(()=>[l(I,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l($,{cols:"12",md:"9"},{default:o(()=>[l(R,{class:"text-center"},{default:o(()=>[l(T,{class:"flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:o(()=>[s("h3",null,"Attendance "+m(r(h).month)+"/ "+m(r(h).year),1),s("div",ae,[s("div",null,[r(J)?(c(),N(I,{key:0,indeterminate:"",color:"primary"})):O("",!0)]),l(te,{class:"mt-6"},{default:o(()=>[se,s("tbody",null,[(c(!0),d(x,null,V(r(E),a=>(c(),d("tr",null,[s("th",le,m(a.employee.name)+" "+m(a.employee.surname),1),s("th",ne,[(c(!0),d(x,null,V(a.result,(B,A)=>(c(),d("p",oe,m(B[0].start_date),1))),256))]),re,s("th",ie,m(a.present_count),1),s("th",ce,[(c(!0),d(x,null,V(a.result,(B,A)=>(c(),d("p",ue,m(A===""?"Still Working":A),1))),256))])]))),256))])]),_:1})])]),_:1})]),_:1})]),_:1}),l($,{cols:"12",md:"3",class:"d-print-none"},{default:o(()=>[l(R,{class:"mb-8 print-row"},{default:o(()=>[l(T,null,{default:o(()=>[l(U,{block:"","prepend-icon":"tabler-send",class:"mb-2"},{default:o(()=>[C(" Send Invoice ")]),_:1}),l(U,{block:"",color:"default",variant:"tonal",onClick:L},{default:o(()=>[C(" Print ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{isDrawerOpen:r(g),"onUpdate:isDrawerOpen":t[0]||(t[0]=a=>f(g)?g.value=a:null),onEmployeeData:n.addNewEmployee},null,8,["isDrawerOpen","onEmployeeData"]),l(H,{isDrawerOpen:r(w),"onUpdate:isDrawerOpen":t[1]||(t[1]=a=>f(w)?w.value=a:null),employee:r(u),"onUpdate:employee":t[2]||(t[2]=a=>f(u)?u.value=a:u=a),onEmployeeData:q},null,8,["isDrawerOpen","employee"]),r(_)?(c(),N(K,{key:0,isDialogVisible:r(_),"onUpdate:isDialogVisible":t[3]||(t[3]=a=>f(_)?_.value=a:null),employee:r(u),"onUpdate:employee":t[4]||(t[4]=a=>f(u)?u.value=a:u=a),onEmployeeData:z},null,8,["isDialogVisible","employee"])):O("",!0)]))}};export{We as default};
