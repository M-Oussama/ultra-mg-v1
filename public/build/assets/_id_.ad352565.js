import{bd as z,k as _,Z as E,q as e,o as n,c as m,p as s,w as i,m as t,x as o,b as w,y as r,F as G,a as M,E as p,D as V}from"./main.d35fbec3.js";import{_ as Q}from"./InvoiceAddPaymentDrawer.cde1bf20.js";import{_ as Y}from"./InvoiceSendInvoiceDrawer.bdc055b5.js";import{u as H}from"./useSaleStore.e31a2157.js";import{a as J,V as C}from"./VBtn.700b1318.js";import{a as W}from"./VOverlay.14a0b7c6.js";import{a as v,V as A}from"./VRow.8db60750.js";import{V as P,c as y}from"./VCard.f8041308.js";import{V as S}from"./VDivider.29d004f4.js";import{V as X}from"./VTable.9594b719.js";import{V as h}from"./VInput.39d6375e.js";import{V as I}from"./VSwitch.739a5a53.js";import{V as B}from"./VAutocomplete.7a715ec5.js";import{V as L}from"./VTextField.eac73b49.js";import"./AppDateTimePicker.ffef8622.js";import"./VField.227569ed.js";import"./index.61b6a4c2.js";import"./position.9303592e.js";import"./router.c3ce030e.js";import"./easing.36b781ab.js";import"./errorsMiddleware.4625f22b.js";import"./VSpacer.579caa23.js";import"./VAvatar.19c9e7af.js";import"./VImg.ce8fe4e4.js";import"./VForm.9c58eaf3.js";import"./forwardRefs.c003b6b8.js";import"./VTextarea.14acfb25.js";/* empty css                   */import"./VCounter.cf623612.js";import"./VNavigationDrawer.e2f98f69.js";import"./ssrBoot.8070aa61.js";import"./VChip.ad6b807d.js";import"./lazy.db74bf33.js";import"./VSelectionControl.24c4861f.js";import"./VSelect.095bc109.js";import"./VList.36b17c1a.js";import"./dialog-transition.d0501c4f.js";import"./VMenu.094cfd40.js";import"./scopeId.d773ef8a.js";import"./VCheckboxBtn.6bc04730.js";import"./filter.f936f71c.js";const tt={key:0},et={class:"ma-sm-3"},st={class:"d-flex align-center mb-6"},ot={class:"font-weight-bold text-xl"},lt={class:"mb-0"},it=t("p",{class:"mb-0"}," KASR EL ABTALE, 19000, SETIF ",-1),at={class:"mb-0"},dt={class:"mb-0"},nt={class:"mt-4 ma-sm-4"},rt={class:"font-weight-medium text-xl mb-2"},ct={class:"mb-2"},mt=t("span",null,"Date : ",-1),ut={class:"font-weight-semibold"},_t={key:0,class:"mb-2"},pt=t("span",null,"Payment: ",-1),ft={class:"font-weight-semibold"},xt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},vt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),ht={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},bt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},wt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),yt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},gt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Vt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),kt={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},Ft={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Nt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),Dt={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},jt={class:"font-weight-medium text-sm mb-2"},Tt={key:0,class:"mb-2 text-sm"},Ct=t("span",null,"Payment: ",-1),St={class:"font-weight-semibold"},It={class:"mb-2 text-sm"},At=t("span",null,"Date : ",-1),Pt={class:"font-weight-semibold"},Rt={class:"v-col-md-6"},Ut=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center"},null,-1),Zt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ot=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Client ",-1),Et={class:"v-col-md-10 border-left padding-8 data-font"},Bt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Lt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Address ",-1),Kt={class:"v-col-md-10 border-left padding-8 data-font"},$t={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},qt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Phone ",-1),zt={class:"v-col-md-10 border-left padding-8 data-font"},Gt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Mt=t("div",{class:"v-col-md-2 text-sm-subtitle-2 border-right"}," Email ",-1),Qt={class:"v-col-md-10 border-left padding-8 data-font"},Yt=t("div",{class:"v-col-md-2"},null,-1),Ht={key:0,class:"v-col-md-4"},Jt=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),Wt={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},Xt=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0RC ",-1),te={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},ee={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},se=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IF ",-1),oe={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},le={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ie=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right"}," N\xB0IS ",-1),ae={class:"v-col-md-8 text-sm-subtitle-2 border-left padding-8 data-font"},de={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ne=t("div",{class:"v-col-md-3 text-sm-subtitle-2 border-right padding-right-0"},[t("span",null," N\xB0ART ")],-1),re={class:"v-col-md-8 text-sm-subtitle-2 padding-8 border-left data-font"},ce={key:1,class:"v-col-md-4"},me=t("p",{class:"font-weight-bold text-sm-h6 mb-4 text-color-black text-center align-center"},null,-1),ue={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row custom-white-border"},_e=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Facture ",-1),pe={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},fe={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},xe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Payment Type ",-1),ve={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},he={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},be=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Date ",-1),we={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},ye=t("th",{class:"text-sm-caption",scope:"col"}," ID ",-1),ge={key:0,class:"text-sm-caption",scope:"col"},Ve=t("th",{class:"text-sm-caption",scope:"col"}," name ",-1),ke={key:1,scope:"col",class:"text-center text-sm-caption"},Fe=t("th",{scope:"col",class:"text-center text-sm-caption"}," QTY ",-1),Ne={key:2,scope:"col",class:"text-center text-sm-caption"},De={class:"text-no-wrap text-sm-caption"},je={key:0,class:"text-no-wrap text-sm-caption"},Te={class:"text-no-wrap"},Ce={class:"text-sm-caption mb-0"},Se={key:1,class:"text-center text-sm-caption"},Ie={class:"text-center text-sm-caption"},Ae={key:2,class:"text-center text-sm-caption"},Pe={class:"my-2 mx-sm-5 v-col-md-6"},Re={key:0,class:"mt-10 d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ue=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Ancien solde ",-1),Ze={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Oe={key:1,class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Ee={key:0,class:"v-col-md-5 text-sm-subtitle-2 border-right text-success"},Be={key:1,class:"v-col-md-5 text-sm-subtitle-2 border-right"},Le={key:2,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-success"},Ke={key:3,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},$e={class:"my-2 mx-sm-4 v-col-md-4"},qe={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},ze=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Total ",-1),Ge={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},Me={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Qe=t("div",{class:"v-col-md-5 text-sm-subtitle-2 border-right"}," Paiement ",-1),Ye={class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},He={class:"d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row align-center custom-white-border"},Je={key:0,class:"v-col-md-5 text-sm-subtitle-2 border-right"},We={key:1,class:"v-col-md-5 text-sm-subtitle-2 border-right text-success"},Xe={key:2,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font text-success"},ts={key:3,class:"v-col-md-7 text-sm-subtitle-2 border-left padding-8 data-font"},es=t("div",{class:"d-flex mx-sm-4"},[t("h6",{class:"text-sm font-weight-semibold me-1"}," Note: "),t("span",null,"Merci pour votre r\xE8glement rapide. Nous appr\xE9cions votre collaboration ")],-1),ss={class:"d-flex align-center justify-space-between mt-5"},os={class:"d-flex align-center justify-space-between"},ls={class:"d-flex align-center justify-space-between"},is={class:"d-flex align-center justify-space-between"},as={key:0},Ys={__name:"[id]",setup(ds){const K=H(),R=z(),a=_({id:1,balance:0,total_amount:0,sale_date:null,client_id:1,sale_status:{id:-1,name:""},amount_letter:"",notes:"",client:{id:-1,name:"",surname:"",address:"",email:"",phone:"",NRC:"",NIF:"",NART:"",NIS:""},sale_items:[]}),l=_({sku:!1,invoice:!1,price:!0,paymentType:"Espece",sold:!1}),x=_(0),U=_();let g=_([]);const k=_(1),f=_({name:"",address:"",phone:"",email:"",NRC:"",NIF:"",NART:"",NIS:"",capitale:""});let F=_([]);const Z=_(!1);_();const N=_(!1),D=_(!1),O=_({isActive:!1});K.fetchSale(Number(R.params.id)).then(u=>{a.value=u.data.sale,x.value=u.data.sold,U.value={...a.value.client},F=u.data.companies,g=u.data.clients,f.value=F[0],Z.value=!0}).catch(u=>{console.log(u)});const $=()=>{window.print()};E(k,(u,c,d)=>{f.value=F[u-1],console.log(f)});const q=u=>u.name+" "+u.surname,j=_("Facture Proforma"),T=_();return E(T,(u,c,d)=>{u||(a.value.client=U);for(let b=0;b<g.length;b++)g[b].id===u&&(a.value.client={...g[b]})}),(u,c)=>e(Z)?(n(),m("section",tt,[s(W,{"model-value":e(O).isActive,class:"align-center justify-center"},{default:i(()=>[s(J,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"]),s(A,null,{default:i(()=>[s(v,{class:"printed",cols:"12",md:"9"},{default:i(()=>[s(P,null,{default:i(()=>[s(y,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row pb-0"},{default:i(()=>[s(A,null,{default:i(()=>[s(v,{cols:"8"},{default:i(()=>[t("div",et,[t("div",st,[t("h6",ot,o(e(f).name),1)]),t("p",lt,o(e(f).address),1),it,t("p",at,o(e(f).email),1),t("p",dt,o(e(f).phone),1)])]),_:1}),e(l).invoice?r("",!0):(n(),w(v,{key:0,cols:"4"},{default:i(()=>[t("div",nt,[t("h6",rt," Bon Livraison #"+o(e(a).id),1),t("p",ct,[mt,t("span",ut,o(e(a).sale_date),1)]),e(l).price?(n(),m("p",_t,[pt,t("span",ft,o(e(l).paymentType),1)])):r("",!0)])]),_:1})),e(l).invoice?(n(),w(v,{key:1,cols:"4",class:"mt-5"},{default:i(()=>[t("div",xt,[vt,t("div",ht,o(e(f).NRC),1)]),t("div",bt,[wt,t("div",yt,o(e(f).NIF),1)]),t("div",gt,[Vt,t("div",kt,o(e(f).NIS),1)]),t("div",Ft,[Nt,t("div",Dt,o(e(f).NART),1)])]),_:1})):r("",!0)]),_:1})]),_:1}),e(l).invoice?(n(),w(S,{key:0})):r("",!0),e(l).invoice?(n(),w(A,{key:1,class:"ma-3 text-center"},{default:i(()=>[s(v,{cols:"4"},{default:i(()=>[t("h6",jt,o(e(j))+" #"+o(e(a).id),1)]),_:1}),s(v,{cols:"4"},{default:i(()=>[e(l).price?(n(),m("p",Tt,[Ct,t("span",St,o(e(l).paymentType),1)])):r("",!0)]),_:1}),s(v,{cols:"4"},{default:i(()=>[t("p",It,[At,t("span",Pt,o(e(a).sale_date),1)])]),_:1})]),_:1})):r("",!0),s(y,{class:"invoiceGeneral d-flex flex-wrap justify-md-start flex-column flex-sm-row print-row"},{default:i(()=>[t("div",Rt,[Ut,t("div",Zt,[Ot,t("div",Et,o(e(a).client.name)+" "+o(e(a).client.surname),1)]),t("div",Bt,[Lt,t("div",Kt,o(e(a).client.address),1)]),t("div",$t,[qt,t("div",zt,o(e(a).client.phone),1)]),t("div",Gt,[Mt,t("div",Qt,o(e(a).client.email),1)])]),Yt,e(l).invoice?(n(),m("div",Ht,[Jt,t("div",Wt,[Xt,t("div",te,o(e(a).client.NRC),1)]),t("div",ee,[se,t("div",oe,o(e(a).client.NIF),1)]),t("div",le,[ie,t("div",ae,o(e(a).client.NIS),1)]),t("div",de,[ne,t("div",re,o(e(a).client.NART),1)])])):r("",!0),e(l).invoice?r("",!0):(n(),m("div",ce,[me,t("div",ue,[_e,t("div",pe," #"+o(e(a).id),1)]),t("div",fe,[xe,t("div",ve,o(e(l).paymentType),1)]),t("div",he,[be,t("div",we,o(e(a).sale_date),1)])]))]),_:1}),s(S),s(X,null,{default:i(()=>[t("thead",null,[t("tr",null,[ye,e(l).sku?(n(),m("th",ge," SKU ")):r("",!0),Ve,e(l).price?(n(),m("th",ke," Price ")):r("",!0),Fe,e(l).price?(n(),m("th",Ne," TOTAL ")):r("",!0)])]),t("tbody",null,[(n(!0),m(G,null,M(e(a).sale_items,(d,b)=>(n(),m("tr",{key:d.name},[t("td",De,o(b+1),1),e(l).sku?(n(),m("td",je,o(d.product.SKU),1)):r("",!0),t("td",Te,[t("p",Ce,o(d.product.name),1)]),e(l).price?(n(),m("td",Se,o(d.price)+" DZD ",1)):r("",!0),t("td",Ie,o(d.quantity),1),e(l).price?(n(),m("td",Ae,o(d.total_price)+" DZD ",1)):r("",!0)]))),128))])]),_:1}),e(l).price?(n(),w(S,{key:2,class:"my-2"})):r("",!0),e(l).price?(n(),w(y,{key:3,class:"d-flex justify-space-between flex-column flex-sm-row print-row pt-0"},{default:i(()=>[t("div",Pe,[t("h5",null,"La Facture est arret\xE9e \xE0 la somme de : "+o(e(a).amount_letter),1),e(l).sold?(n(),m("div",Re,[Ue,t("div",Ze,o(parseFloat(e(x)).toFixed(2))+" DZD ",1)])):r("",!0),e(l).sold?(n(),m("div",Oe,[e(l).price?(n(),m("div",Ee," Nouveau ")):r("",!0),e(l).price?r("",!0):(n(),m("div",Be," Nouveau ")),e(l).price?(n(),m("div",Le,o(parseFloat(e(x))>0?(parseFloat(e(a).total_amount)+parseFloat(e(x))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(x))).toFixed(2))+" DZD ",1)):r("",!0),e(l).price?r("",!0):(n(),m("div",Ke,o(parseFloat(e(x))>0?(parseFloat(e(a).total_amount)+parseFloat(e(x))).toFixed(2):(-parseFloat(e(a).total_amount)+parseFloat(e(x))).toFixed(2))+" DZD ",1))])):r("",!0)]),t("div",$e,[t("div",qe,[ze,t("div",Ge,o(e(a).total_amount)+" DZD ",1)]),t("div",Me,[Qe,t("div",Ye,o(e(a).payment?parseFloat(e(a).regulation).toFixed(2):0)+" DZD ",1)]),t("div",He,[e(l).sold?(n(),m("div",Je," Nouveau ")):r("",!0),e(l).sold?r("",!0):(n(),m("div",We," Nouveau ")),e(l).sold?r("",!0):(n(),m("div",Xe,o((parseFloat(e(a).total_amount)-parseFloat(e(a).regulation)).toFixed(2))+" DZD ",1)),e(l).sold?(n(),m("div",ts,o((parseFloat(e(a).total_amount)-parseFloat(e(a).regulation)).toFixed(2))+" DZD ",1)):r("",!0)])])]),_:1})):r("",!0),s(S),s(y,null,{default:i(()=>[es]),_:1})]),_:1})]),_:1}),s(v,{cols:"12",md:"3",class:"d-print-none"},{default:i(()=>[s(P,null,{default:i(()=>[s(y,null,{default:i(()=>[s(C,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:c[0]||(c[0]=d=>D.value=!0)},{default:i(()=>[p(" Send Invoice ")]),_:1}),s(C,{block:"",variant:"tonal",color:"secondary",class:"mb-2",onClick:$},{default:i(()=>[p(" Print ")]),_:1}),s(C,{block:"",color:"secondary",variant:"tonal",class:"mb-2",to:{name:"apps-POS-sale-edit-id",params:{id:e(R).params.id}}},{default:i(()=>[p(" Edit Invoice ")]),_:1},8,["to"]),s(C,{block:"","prepend-icon":"tabler-currency-dollar",class:"mb-2",onClick:c[1]||(c[1]=d=>N.value=!0)},{default:i(()=>[p(" Add Payment ")]),_:1})]),_:1})]),_:1}),s(P,{class:"mt-7"},{default:i(()=>[s(y,null,{default:i(()=>[t("div",ss,[s(h,{for:"sold"},{default:i(()=>[p(" Sold ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(l).sold,"onUpdate:modelValue":c[2]||(c[2]=d=>e(l).sold=d)},null,8,["modelValue"])])]),t("div",os,[s(h,{for:"price"},{default:i(()=>[p(" SKU ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(l).sku,"onUpdate:modelValue":c[3]||(c[3]=d=>e(l).sku=d)},null,8,["modelValue"])])]),t("div",ls,[s(h,{for:"price"},{default:i(()=>[p(" Facture ")]),_:1}),t("div",null,[s(I,{id:"sku",modelValue:e(l).invoice,"onUpdate:modelValue":c[4]||(c[4]=d=>e(l).invoice=d)},null,8,["modelValue"])])]),t("div",is,[s(h,{for:"price"},{default:i(()=>[p(" Price ")]),_:1}),t("div",null,[s(I,{id:"price",modelValue:e(l).price,"onUpdate:modelValue":c[5]||(c[5]=d=>e(l).price=d)},null,8,["modelValue"])])]),t("div",null,[s(h,{class:"mb-4 mt-1"},{default:i(()=>[p(" Company ")]),_:1}),s(B,{modelValue:e(k),"onUpdate:modelValue":c[6]||(c[6]=d=>V(k)?k.value=d:null),items:e(F),"item-value":"id",class:"text-sm-subtitle-2","item-title":"name",label:"Company"},null,8,["modelValue","items"])]),t("div",null,[t("div",null,[s(h,{for:"payment-terms",class:"mb-1 mt-1"},{default:i(()=>[p(" Payment ")]),_:1}),s(L,{modelValue:e(l).paymentType,"onUpdate:modelValue":c[7]||(c[7]=d=>e(l).paymentType=d),placeholder:"Thanks for your business"},null,8,["modelValue"])])]),e(l).invoice?(n(),m("div",as,[s(h,{for:"payment-terms",class:"mb-1 mt-1"},{default:i(()=>[p(" Invoice Type ")]),_:1}),s(L,{modelValue:e(j),"onUpdate:modelValue":c[8]||(c[8]=d=>V(j)?j.value=d:null),placeholder:"Put the Invoice Type"},null,8,["modelValue"])])):r("",!0),t("div",null,[s(h,{class:"mb-4 mt-1"},{default:i(()=>[p(" Client ")]),_:1}),s(B,{clearable:"",modelValue:e(T),"onUpdate:modelValue":c[9]||(c[9]=d=>V(T)?T.value=d:null),items:e(g),"item-value":"id","item-title":q,label:"Client"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1})]),_:1}),s(Q,{data:e(a),loading:e(O),isDrawerOpen:e(N),"onUpdate:isDrawerOpen":c[10]||(c[10]=d=>V(N)?N.value=d:null)},null,8,["data","loading","isDrawerOpen"]),s(Y,{isDrawerOpen:e(D),"onUpdate:isDrawerOpen":c[11]||(c[11]=d=>V(D)?D.value=d:null)},null,8,["isDrawerOpen"])])):r("",!0)}};export{Ys as default};
